import{j as e,L}from"./main-CRMJS0Wv.js";import{r as n}from"./router-Cgdj9vyr.js";import{c as h}from"./cobrancaService-CCS4-JdV.js";import{f as p,a as F}from"./formatters-Dm0PafFw.js";import{F as O}from"./PlusIcon-CPn5D4W5.js";import{F as z}from"./DocumentArrowDownIcon-CaS0chxy.js";import{F as A}from"./FunnelIcon-C9OgRzwO.js";import{F as G}from"./MagnifyingGlassIcon-C-bifEwt.js";import{F as q}from"./DocumentTextIcon-B0GYMzL8.js";import{F as J}from"./UserIcon-CLBajSSa.js";import{F as _}from"./CurrencyDollarIcon-BYymgR5k.js";import{F as H}from"./CalendarIcon-DKD9rodC.js";import{F as K}from"./EyeIcon-xG4b5U4j.js";import{F as Q}from"./PencilIcon-1hDDva8l.js";import{F as U}from"./CheckCircleIcon-DFajsejV.js";import{F as W}from"./XCircleIcon-DzfOQtoz.js";import{F as X}from"./TrashIcon-C5Jkp8xz.js";import"./vendor-Csw2ODfV.js";import"./icons-qiKTog5F.js";const fe=()=>{const[P,C]=n.useState([]),[S,g]=n.useState(!0),[f,j]=n.useState(""),[o,b]=n.useState({status:"",tipo:"",banco:"",dataInicio:"",dataFim:"",valorMin:"",valorMax:""}),[y,B]=n.useState({field:"vencimento",direction:"asc"}),[t,c]=n.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:20}),[m,$]=n.useState(!1),[r,M]=n.useState(null),[R,v]=n.useState(!1);n.useEffect(()=>{d()},[t.currentPage,y,o]);const d=async()=>{try{g(!0);const s=await h.getBoletos({page:t.currentPage,search:f,filters:o,sorting:y});C(s.data||[]),c(a=>({...a,totalPages:s.totalPages||1,totalItems:s.totalItems||0}))}catch(s){console.error("Erro ao carregar boletos:",s)}finally{g(!1)}},D=s=>{s.preventDefault(),c(a=>({...a,currentPage:1})),d()},i=(s,a)=>{b(l=>({...l,[s]:a})),c(l=>({...l,currentPage:1}))},I=()=>{b({status:"",tipo:"",banco:"",dataInicio:"",dataFim:"",valorMin:"",valorMax:""}),j(""),c(s=>({...s,currentPage:1}))},u=s=>{c(a=>({...a,currentPage:s}))},x=s=>{B(a=>({field:s,direction:a.field===s&&a.direction==="asc"?"desc":"asc"}))},N=s=>{switch(s==null?void 0:s.toLowerCase()){case"pago":return"text-green-600 bg-green-100";case"vencido":return"text-red-600 bg-red-100";case"pendente":return"text-yellow-600 bg-yellow-100";case"cancelado":return"text-gray-600 bg-gray-100";case"processado":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},w=s=>{switch(s==null?void 0:s.toLowerCase()){case"multa":return"text-red-600 bg-red-100";case"taxa":return"text-blue-600 bg-blue-100";case"juros":return"text-orange-600 bg-orange-100";case"correção":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},E=s=>{M(s),v(!0)},T=s=>{window.location.href=`/cobranca/boletos/${s.id}/editar`},V=async s=>{if(window.confirm(`Tem certeza que deseja excluir o boleto ${s.numero}?`))try{await h.deleteBoleto(s.id),d()}catch(a){console.error("Erro ao excluir boleto:",a)}},k=async(s,a)=>{try{await h.updateBoletoStatus(s.id,a),d()}catch(l){console.error("Erro ao alterar status:",l)}};return S?e.jsx(L,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestão de Boletos"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie todos os boletos de cobrança"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"btn-primary",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Novo Boleto"]}),e.jsxs("button",{className:"btn-secondary",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros e Busca"}),e.jsxs("button",{onClick:()=>$(!m),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),m?"Ocultar Filtros":"Mostrar Filtros"]})]}),e.jsx("form",{onSubmit:D,className:"mb-4",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por número, devedor, documento...",value:f,onChange:s=>j(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Buscar"}),e.jsx("button",{type:"button",onClick:I,className:"btn-secondary",children:"Limpar"})]})}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:o.status,onChange:s=>i("status",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"pago",children:"Pago"}),e.jsx("option",{value:"vencido",children:"Vencido"}),e.jsx("option",{value:"cancelado",children:"Cancelado"}),e.jsx("option",{value:"processado",children:"Processado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:o.tipo,onChange:s=>i("tipo",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"multa",children:"Multa"}),e.jsx("option",{value:"taxa",children:"Taxa"}),e.jsx("option",{value:"juros",children:"Juros"}),e.jsx("option",{value:"correção",children:"Correção"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banco"}),e.jsxs("select",{value:o.banco,onChange:s=>i("banco",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"001",children:"Banco do Brasil"}),e.jsx("option",{value:"104",children:"Caixa Econômica"}),e.jsx("option",{value:"033",children:"Santander"}),e.jsx("option",{value:"341",children:"Itaú"}),e.jsx("option",{value:"237",children:"Bradesco"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Início"}),e.jsx("input",{type:"date",value:o.dataInicio,onChange:s=>i("dataInicio",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:o.dataFim,onChange:s=>i("dataFim",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor Mínimo"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0,00",value:o.valorMin,onChange:s=>i("valorMin",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor Máximo"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0,00",value:o.valorMax,onChange:s=>i("valorMax",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Boletos (",t.totalItems,")"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Página ",t.currentPage," de ",t.totalPages]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("numero"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Número"]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("devedor"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Devedor"]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("valor"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Valor"]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("vencimento"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Vencimento"]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Banco"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.numero}),e.jsxs("div",{className:"text-sm text-gray-500",children:["#",s.id]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.devedor}),e.jsx("div",{className:"text-sm text-gray-500",children:s.documento})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p(s.valor)}),s.valorOriginal&&s.valorOriginal!==s.valor&&e.jsx("div",{className:"text-xs text-gray-500 line-through",children:p(s.valorOriginal)})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:F(s.vencimento)}),s.diasVencido>0&&e.jsxs("div",{className:"text-xs text-red-600",children:[s.diasVencido," dias vencido"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w(s.tipo)}`,children:s.tipo})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.banco}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E(s),className:"text-indigo-600 hover:text-indigo-900",title:"Visualizar",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T(s),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:e.jsx(Q,{className:"w-4 h-4"})}),s.status==="pendente"&&e.jsx("button",{onClick:()=>k(s,"pago"),className:"text-green-600 hover:text-green-900",title:"Marcar como Pago",children:e.jsx(U,{className:"w-4 h-4"})}),s.status==="pendente"&&e.jsx("button",{onClick:()=>k(s,"cancelado"),className:"text-red-600 hover:text-red-900",title:"Cancelar",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>V(s),className:"text-red-600 hover:text-red-900",title:"Excluir",children:e.jsx(X,{className:"w-4 h-4"})})]})})]},s.id))})]})}),t.totalPages>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",(t.currentPage-1)*t.itemsPerPage+1," a"," ",Math.min(t.currentPage*t.itemsPerPage,t.totalItems)," de"," ",t.totalItems," resultados"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>u(t.currentPage-1),disabled:t.currentPage===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Anterior"}),Array.from({length:Math.min(5,t.totalPages)},(s,a)=>{const l=a+1;return e.jsx("button",{onClick:()=>u(l),className:`px-3 py-1 text-sm border rounded-md ${l===t.currentPage?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:l},l)}),e.jsx("button",{onClick:()=>u(t.currentPage+1),disabled:t.currentPage===t.totalPages,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Próximo"})]})]})})]}),R&&r&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Detalhes do Boleto"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Número"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.numero})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Devedor"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.devedor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Documento"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.documento})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p(r.valor)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vencimento"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:F(r.vencimento)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(r.status)}`,children:r.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w(r.tipo)}`,children:r.tipo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Banco"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.banco})]})]})]})})}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:e.jsx("button",{type:"button",onClick:()=>v(!1),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Fechar"})})]})]})})]})};export{fe as default};
