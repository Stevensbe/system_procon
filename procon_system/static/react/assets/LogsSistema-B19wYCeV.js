import{j as e}from"./main-CRMJS0Wv.js";import{u as B,r as i,L as P}from"./router-Cgdj9vyr.js";import{F as U}from"./ArrowLeftIcon-C_0pt37t.js";import{F as V}from"./FunnelIcon-C9OgRzwO.js";import{F as q}from"./MagnifyingGlassIcon-C-bifEwt.js";import{F as d}from"./DocumentTextIcon-B0GYMzL8.js";import{F as J}from"./UserIcon-CLBajSSa.js";import{F as O}from"./ClockIcon-CMrA9XuO.js";import{F as v}from"./ServerIcon-DJ9MiV0h.js";import{F as H}from"./EyeIcon-xG4b5U4j.js";import{F as j}from"./CogIcon-DYKvQWLv.js";import{F as g}from"./InformationCircleIcon-BpFAM9LL.js";import{F as N}from"./XCircleIcon-DzfOQtoz.js";import{F as _}from"./ExclamationTriangleIcon-2kHM3Vz3.js";import{F as G}from"./ScaleIcon-CDQgDKJ-.js";import{F as K}from"./BuildingOfficeIcon-B2iC5QD_.js";import{F as Q}from"./UserGroupIcon-DY3obWR_.js";import"./vendor-Csw2ODfV.js";import"./icons-qiKTog5F.js";const pe=()=>{const w=B(),[k,x]=i.useState(!1),[h,p]=i.useState(!1),[b,f]=i.useState([]),[u,m]=i.useState([]),[s,L]=i.useState({search:"",nivel:"",modulo:"",usuario:"",dataInicio:"",dataFim:"",status:""}),[t,F]=i.useState({logAtivo:!0,nivelLog:"info",rotacaoLog:"diaria",retencaoLog:90,tamanhoMaximoLog:100,compressaoLog:!0,criptografiaLog:!1,logRemoto:!1,servidorLog:"",portaLog:514,protocoloLog:"UDP",usuarioLog:"",senhaLog:"",formatoLog:"syslog",notificarErros:!0,notificarCriticos:!0,emailNotificacao:"admin@procon.gov.br",limiteNotificacoes:10,intervaloNotificacoes:60}),[l,y]=i.useState({});i.useEffect(()=>{C(),T()},[]),i.useEffect(()=>{S()},[b,s]);const C=async()=>{x(!0);try{await new Promise(r=>setTimeout(r,1e3));const a=[{id:1,timestamp:"2024-01-15T14:30:25",nivel:"info",modulo:"sistema",usuario:"admin",acao:"Login realizado com sucesso",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"sucesso",detalhes:"Usuário admin fez login no sistema"},{id:2,timestamp:"2024-01-15T14:28:15",nivel:"warning",modulo:"fiscalizacao",usuario:"fiscal1",acao:"Tentativa de acesso negada",ip:"192.168.1.101",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"erro",detalhes:"Usuário tentou acessar módulo sem permissão"},{id:3,timestamp:"2024-01-15T14:25:42",nivel:"error",modulo:"juridico",usuario:"juridico1",acao:"Erro ao salvar processo",ip:"192.168.1.102",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"erro",detalhes:"Erro de conexão com banco de dados"},{id:4,timestamp:"2024-01-15T14:20:18",nivel:"critical",modulo:"sistema",usuario:"sistema",acao:"Falha crítica no sistema",ip:"127.0.0.1",userAgent:"Sistema",status:"erro",detalhes:"Serviço de backup falhou"},{id:5,timestamp:"2024-01-15T14:15:33",nivel:"info",modulo:"usuarios",usuario:"admin",acao:"Usuário criado",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"sucesso",detalhes:"Novo usuário fiscal2 criado"},{id:6,timestamp:"2024-01-15T14:10:55",nivel:"debug",modulo:"relatorios",usuario:"relatorios1",acao:"Relatório gerado",ip:"192.168.1.103",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"sucesso",detalhes:"Relatório de fiscalização gerado"},{id:7,timestamp:"2024-01-15T14:05:12",nivel:"warning",modulo:"backup",usuario:"sistema",acao:"Backup com aviso",ip:"127.0.0.1",userAgent:"Sistema",status:"aviso",detalhes:"Espaço em disco baixo para backup"},{id:8,timestamp:"2024-01-15T14:00:00",nivel:"info",modulo:"sistema",usuario:"sistema",acao:"Backup automático realizado",ip:"127.0.0.1",userAgent:"Sistema",status:"sucesso",detalhes:"Backup diário concluído com sucesso"}];f(a),m(a)}catch(a){console.error("Erro ao carregar logs:",a)}finally{x(!1)}},T=async()=>{try{await new Promise(a=>setTimeout(a,500))}catch(a){console.error("Erro ao carregar configurações de log:",a)}},S=()=>{let a=[...b];if(s.search){const r=s.search.toLowerCase();a=a.filter(o=>o.acao.toLowerCase().includes(r)||o.detalhes.toLowerCase().includes(r)||o.usuario.toLowerCase().includes(r)||o.ip.toLowerCase().includes(r))}s.nivel&&(a=a.filter(r=>r.nivel===s.nivel)),s.modulo&&(a=a.filter(r=>r.modulo===s.modulo)),s.usuario&&(a=a.filter(r=>r.usuario===s.usuario)),s.status&&(a=a.filter(r=>r.status===s.status)),s.dataInicio&&(a=a.filter(r=>new Date(r.timestamp)>=new Date(s.dataInicio))),s.dataFim&&(a=a.filter(r=>new Date(r.timestamp)<=new Date(s.dataFim))),m(a)},n=(a,r)=>{L(o=>({...o,[a]:r}))},c=(a,r)=>{F(o=>({...o,[a]:r})),l[a]&&y(o=>({...o,[a]:null}))},R=()=>{const a={};return t.logRemoto&&!t.servidorLog.trim()&&(a.servidorLog="Servidor de log é obrigatório"),t.logRemoto&&!t.usuarioLog.trim()&&(a.usuarioLog="Usuário de log é obrigatório"),(t.portaLog<1||t.portaLog>65535)&&(a.portaLog="Porta deve estar entre 1 e 65535"),(t.retencaoLog<1||t.retencaoLog>365)&&(a.retencaoLog="Retenção deve estar entre 1 e 365 dias"),(t.tamanhoMaximoLog<1||t.tamanhoMaximoLog>1e3)&&(a.tamanhoMaximoLog="Tamanho máximo deve estar entre 1 e 1000 MB"),y(a),Object.keys(a).length===0},E=async a=>{if(a.preventDefault(),!!R()){p(!0);try{await new Promise(r=>setTimeout(r,2e3)),alert("Configurações de log salvas com sucesso!")}catch(r){console.error("Erro ao salvar configurações:",r),alert("Erro ao salvar configurações. Tente novamente.")}finally{p(!1)}}},M=async()=>{if(confirm("Tem certeza que deseja limpar todos os logs? Esta ação não pode ser desfeita."))try{await new Promise(a=>setTimeout(a,2e3)),f([]),m([]),alert("Logs limpos com sucesso!")}catch{alert("Erro ao limpar logs. Tente novamente.")}},$=async()=>{try{await new Promise(a=>setTimeout(a,3e3)),alert("Exportação de logs iniciada!")}catch{alert("Erro ao exportar logs. Tente novamente.")}},z=async()=>{try{await new Promise(a=>setTimeout(a,2e3)),alert("Teste de conexão realizado com sucesso!")}catch{alert("Erro no teste de conexão. Verifique as configurações.")}},D=a=>{switch(a){case"debug":return"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300";case"info":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"warning":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"error":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"critical":return"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300"}},A=a=>{switch(a){case"debug":return e.jsx(g,{className:"w-4 h-4"});case"info":return e.jsx(g,{className:"w-4 h-4"});case"warning":return e.jsx(_,{className:"w-4 h-4"});case"error":return e.jsx(N,{className:"w-4 h-4"});case"critical":return e.jsx(N,{className:"w-4 h-4"});default:return e.jsx(g,{className:"w-4 h-4"})}},I=a=>{switch(a){case"sucesso":return"text-green-600";case"erro":return"text-red-600";case"aviso":return"text-yellow-600";default:return"text-gray-600"}},W=a=>{switch(a){case"sistema":return e.jsx(v,{className:"w-4 h-4"});case"usuarios":return e.jsx(Q,{className:"w-4 h-4"});case"fiscalizacao":return e.jsx(K,{className:"w-4 h-4"});case"juridico":return e.jsx(G,{className:"w-4 h-4"});case"relatorios":return e.jsx(d,{className:"w-4 h-4"});case"backup":return e.jsx(d,{className:"w-4 h-4"});default:return e.jsx(j,{className:"w-4 h-4"})}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{to:"/configuracoes/dashboard",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(U,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Logs do Sistema"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Visualize e gerencie os logs do sistema"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:z,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Testar Conexão"}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Exportar Logs"}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Limpar Logs"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),"Filtros"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s.search,onChange:a=>n("search",a.target.value),placeholder:"Buscar nos logs...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),e.jsx(q,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nível"}),e.jsxs("select",{value:s.nivel,onChange:a=>n("nivel",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"debug",children:"Debug"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"error",children:"Error"}),e.jsx("option",{value:"critical",children:"Critical"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Módulo"}),e.jsxs("select",{value:s.modulo,onChange:a=>n("modulo",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"sistema",children:"Sistema"}),e.jsx("option",{value:"usuarios",children:"Usuários"}),e.jsx("option",{value:"fiscalizacao",children:"Fiscalização"}),e.jsx("option",{value:"juridico",children:"Jurídico"}),e.jsx("option",{value:"relatorios",children:"Relatórios"}),e.jsx("option",{value:"backup",children:"Backup"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:s.status,onChange:a=>n("status",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"sucesso",children:"Sucesso"}),e.jsx("option",{value:"erro",children:"Erro"}),e.jsx("option",{value:"aviso",children:"Aviso"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Data Início"}),e.jsx("input",{type:"datetime-local",value:s.dataInicio,onChange:a=>n("dataInicio",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Data Fim"}),e.jsx("input",{type:"datetime-local",value:s.dataFim,onChange:a=>n("dataFim",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Usuário"}),e.jsx("input",{type:"text",value:s.usuario,onChange:a=>n("usuario",a.target.value),placeholder:"Filtrar por usuário...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[e.jsx(d,{className:"w-5 h-5 mr-2"}),"Logs do Sistema (",u.length," registros)"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[u.map(a=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${D(a.nivel)}`,children:[A(a.nivel),e.jsx("span",{className:"capitalize",children:a.nivel})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400",children:[W(a.modulo),e.jsx("span",{className:"text-sm capitalize",children:a.modulo})]}),e.jsx("span",{className:`text-sm font-medium ${I(a.status)}`,children:a.status==="sucesso"?"Sucesso":a.status==="erro"?"Erro":"Aviso"})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:a.acao}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:a.detalhes}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(J,{className:"w-3 h-3"}),e.jsx("span",{children:a.usuario})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(O,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(a.timestamp).toLocaleString("pt-BR")})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{className:"w-3 h-3"}),e.jsx("span",{children:a.ip})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>alert(`Detalhes completos:
${JSON.stringify(a,null,2)}`),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Ver detalhes",children:e.jsx(H,{className:"w-4 h-4"})})})]})},a.id)),u.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(d,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum log encontrado com os filtros aplicados."})]})]})})]}),e.jsxs("form",{onSubmit:E,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"Configurações de Log"]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nível de Log"}),e.jsxs("select",{value:t.nivelLog,onChange:a=>c("nivelLog",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"debug",children:"Debug"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"error",children:"Error"}),e.jsx("option",{value:"critical",children:"Critical"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rotação de Log"}),e.jsxs("select",{value:t.rotacaoLog,onChange:a=>c("rotacaoLog",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"diaria",children:"Diária"}),e.jsx("option",{value:"semanal",children:"Semanal"}),e.jsx("option",{value:"mensal",children:"Mensal"}),e.jsx("option",{value:"por_tamanho",children:"Por Tamanho"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Retenção (dias)"}),e.jsx("input",{type:"number",value:t.retencaoLog,onChange:a=>c("retencaoLog",parseInt(a.target.value)),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${l.retencaoLog?"border-red-500":"border-gray-300"}`}),l.retencaoLog&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.retencaoLog})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tamanho Máximo (MB)"}),e.jsx("input",{type:"number",value:t.tamanhoMaximoLog,onChange:a=>c("tamanhoMaximoLog",parseInt(a.target.value)),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${l.tamanhoMaximoLog?"border-red-500":"border-gray-300"}`}),l.tamanhoMaximoLog&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.tamanhoMaximoLog})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.logAtivo,onChange:a=>c("logAtivo",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Habilitar Logs"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.compressaoLog,onChange:a=>c("compressaoLog",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Comprimir Logs"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.criptografiaLog,onChange:a=>c("criptografiaLog",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Criptografar Logs"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>w("/configuracoes/dashboard"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Salvando...":"Salvar Configurações"})]})]})]})};export{pe as default};
