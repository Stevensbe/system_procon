import{j as e}from"./main-DVdFXPbZ.js";import{r as l}from"./router-C15yhWin.js";import{B as h}from"./BarcodeScannerGoogleVision-EIZEzU2h.js";import{p as b}from"./produtosService-D8wngoxf.js";import{n as t}from"./index-CsOmCsbp.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";import"./XMarkIcon-C8R2LFm1.js";import"./ExclamationTriangleIcon-Y0luX6t1.js";import"./CheckCircleIcon-B-MrGrlS.js";const R=()=>{const[g,m]=l.useState(!1),[a,n]=l.useState([]),[c,i]=l.useState(""),x=async s=>{console.log("Código escaneado:",s);try{const r=await b.buscarPorCodigoBarras(s),o={code:s,timestamp:new Date().toLocaleTimeString(),success:r.success,source:r.source,produto:r.produto,error:r.error};n(d=>[o,...d]),r.success?t.success(`Produto encontrado: ${r.produto.nome}`):t.error(`Erro: ${r.error}`)}catch(r){console.error("Erro ao testar código:",r);const o={code:s,timestamp:new Date().toLocaleTimeString(),success:!1,error:r.message};n(d=>[o,...d]),t.error("Erro ao buscar produto")}},u=async()=>{if(!c.trim()){t.error("Digite um código de barras");return}await x(c.trim()),i("")},p=()=>{n([])};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"🧪 Teste do Scanner de Código de Barras"}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"📱 Abrir Scanner"}),e.jsx("button",{onClick:p,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"🗑️ Limpar Resultados"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:c,onChange:s=>i(s.target.value),placeholder:"Digite um código de barras para testar",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:s=>s.key==="Enter"&&u()}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Testar"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium mb-2",children:"Códigos de teste:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["7891234567890","3017620422003","7891000100103"].map(s=>e.jsx("button",{onClick:()=>i(s),className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:s},s))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["📊 Resultados dos Testes (",a.length,")"]}),a.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"Nenhum teste realizado ainda."}),e.jsx("p",{children:"Use o scanner ou digite um código manualmente."})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.map((s,r)=>{var o;return e.jsx("div",{className:`p-4 rounded-lg border ${s.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.success?"✅ Sucesso":"❌ Erro"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.timestamp})]}),e.jsxs("p",{className:"font-mono text-sm mb-2",children:["Código: ",s.code]}),s.success&&s.produto&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",s.produto.nome]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fonte:"})," ",s.source]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Especificação:"})," ",(o=s.produto.especificacao)==null?void 0:o.substring(0,100),"..."]})]}),s.error&&e.jsxs("p",{className:"text-sm text-red-600",children:[e.jsx("strong",{children:"Erro:"})," ",s.error]})]})})},r)})})]}),e.jsx(h,{isOpen:g,onScan:x,onClose:()=>m(!1)})]})};export{R as default};
