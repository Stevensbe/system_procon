import{j as e}from"./main-QkSqPps8.js";import{r as x}from"./router-C15yhWin.js";import{n as o}from"./index-CsOmCsbp.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";const v=()=>{const[c,n]=x.useState(""),[d,i]=x.useState([]),[a,m]=x.useState(!1),u=async s=>{m(!0);try{console.log("Testando API com c√≥digo:",s);const t=await fetch(`/api/barcode/${s}/`),r=await t.json(),l={code:s,timestamp:new Date().toLocaleTimeString(),success:r.success,source:r.source,produto:r.produto,error:r.error,status:t.status};i(h=>[l,...h]),r.success?o.success(`Produto encontrado: ${r.produto.nome}`):o.error(`Erro: ${r.error}`)}catch(t){console.error("Erro ao testar API:",t);const r={code:s,timestamp:new Date().toLocaleTimeString(),success:!1,error:t.message,status:"ERROR"};i(l=>[r,...l]),o.error("Erro ao buscar produto")}m(!1)},g=async()=>{if(!c.trim()){o.error("Digite um c√≥digo de barras");return}await u(c.trim()),n("")},p=()=>{i([])};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"üß™ Teste da API de C√≥digo de Barras"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex space-x-2 mb-4",children:[e.jsx("input",{type:"text",value:c,onChange:s=>n(s.target.value),placeholder:"Digite um c√≥digo de barras para testar",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:s=>s.key==="Enter"&&g(),disabled:a}),e.jsx("button",{onClick:g,disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",children:a?"Testando...":"Testar"}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Limpar"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium mb-2",children:"C√≥digos de teste:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["7891234567890","3017620422003","7891000100103"].map(s=>e.jsx("button",{onClick:()=>n(s),disabled:a,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50",children:s},s))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["üìä Resultados dos Testes (",d.length,")"]}),d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"Nenhum teste realizado ainda."}),e.jsx("p",{children:"Digite um c√≥digo de barras para testar a API."})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:d.map((s,t)=>{var r;return e.jsx("div",{className:`p-4 rounded-lg border ${s.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.success?"‚úÖ Sucesso":"‚ùå Erro"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.timestamp}),e.jsxs("span",{className:"text-xs text-gray-400",children:["Status: ",s.status]})]}),e.jsxs("p",{className:"font-mono text-sm mb-2",children:["C√≥digo: ",s.code]}),s.success&&s.produto&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",s.produto.nome]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fonte:"})," ",s.source]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Especifica√ß√£o:"})," ",(r=s.produto.especificacao)==null?void 0:r.substring(0,100),"..."]})]}),s.error&&e.jsxs("p",{className:"text-sm text-red-600",children:[e.jsx("strong",{children:"Erro:"})," ",s.error]})]})})},t)})})]})]})};export{v as default};
