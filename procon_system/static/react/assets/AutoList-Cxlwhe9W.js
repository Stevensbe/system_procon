import{j as e}from"./main-CRMJS0Wv.js";import{r as s,L as l}from"./router-Cgdj9vyr.js";import{F as k}from"./PlusIcon-CPn5D4W5.js";import{F as v}from"./FunnelIcon-C9OgRzwO.js";import{F as N}from"./MagnifyingGlassIcon-C-bifEwt.js";import{F}from"./EyeIcon-xG4b5U4j.js";import{F as L}from"./PencilIcon-1hDDva8l.js";import{F as C}from"./TrashIcon-C5Jkp8xz.js";import{F as n}from"./DocumentTextIcon-B0GYMzL8.js";import{F as A}from"./ExclamationTriangleIcon-2kHM3Vz3.js";import{F as S}from"./CheckCircleIcon-DFajsejV.js";import{F as R}from"./ClockIcon-CMrA9XuO.js";import"./vendor-Csw2ODfV.js";import"./icons-qiKTog5F.js";const V=()=>{const[x,o]=s.useState(!0),[c,m]=s.useState([]),[i,u]=s.useState([]),[t,g]=s.useState({search:"",tipo:"",status:"",dataInicio:"",dataFim:""});s.useEffect(()=>{p()},[]),s.useEffect(()=>{h()},[c,t]);const p=async()=>{o(!0);try{m([{id:1,numero:"2024/001234",tipo:"banco",tipoLabel:"Banco",dataFiscalizacao:"2024-06-15",empresa:"Banco XYZ Ltda",fiscal:"João Silva",status:"em_andamento",statusLabel:"Em Andamento",valorMulta:15e3,irregularidades:3},{id:2,numero:"2024/001235",tipo:"posto",tipoLabel:"Posto de Combustível",dataFiscalizacao:"2024-06-14",empresa:"Posto ABC Ltda",fiscal:"Maria Santos",status:"concluido",statusLabel:"Concluído",valorMulta:8e3,irregularidades:2},{id:3,numero:"2024/001236",tipo:"supermercado",tipoLabel:"Supermercado",dataFiscalizacao:"2024-06-13",empresa:"Supermercado DEF Ltda",fiscal:"Pedro Costa",status:"pendente",statusLabel:"Pendente",valorMulta:25e3,irregularidades:5},{id:4,numero:"2024/001237",tipo:"diversos",tipoLabel:"Diversos",dataFiscalizacao:"2024-06-12",empresa:"Empresa GHI Ltda",fiscal:"Ana Oliveira",status:"em_andamento",statusLabel:"Em Andamento",valorMulta:12e3,irregularidades:4}])}catch(a){console.error("Erro ao carregar autos:",a)}finally{o(!1)}},h=()=>{let a=[...c];t.search&&(a=a.filter(r=>r.numero.toLowerCase().includes(t.search.toLowerCase())||r.empresa.toLowerCase().includes(t.search.toLowerCase())||r.fiscal.toLowerCase().includes(t.search.toLowerCase()))),t.tipo&&(a=a.filter(r=>r.tipo===t.tipo)),t.status&&(a=a.filter(r=>r.status===t.status)),t.dataInicio&&(a=a.filter(r=>r.dataFiscalizacao>=t.dataInicio)),t.dataFim&&(a=a.filter(r=>r.dataFiscalizacao<=t.dataFim)),u(a)},d=(a,r)=>{g(j=>({...j,[a]:r}))},y=a=>{switch(a){case"em_andamento":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"concluido":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"pendente":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},b=a=>{switch(a){case"em_andamento":return R;case"concluido":return S;case"pendente":return A;default:return n}},f=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),w=a=>new Date(a).toLocaleDateString("pt-BR");return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Autos de Infração"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Gerenciamento de autos de infração do sistema"})]}),e.jsxs(l,{to:"/fiscalizacao/novo-auto",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Novo Auto"]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(v,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:t.search,onChange:a=>d("search",a.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Número, empresa, fiscal..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tipo"}),e.jsxs("select",{value:t.tipo,onChange:a=>d("tipo",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"banco",children:"Banco"}),e.jsx("option",{value:"posto",children:"Posto de Combustível"}),e.jsx("option",{value:"supermercado",children:"Supermercado"}),e.jsx("option",{value:"diversos",children:"Diversos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:t.status,onChange:a=>d("status",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"em_andamento",children:"Em Andamento"}),e.jsx("option",{value:"concluido",children:"Concluído"}),e.jsx("option",{value:"pendente",children:"Pendente"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data Início"}),e.jsx("input",{type:"date",value:t.dataInicio,onChange:a=>d("dataInicio",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:t.dataFim,onChange:a=>d("dataFim",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Autos de Infração (",i.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Número"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Empresa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fiscal"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Valor Multa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.map(a=>{const r=b(a.status);return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.numero})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:a.tipoLabel})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:a.empresa})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:w(a.dataFiscalizacao)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:a.fiscal})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y(a.status)}`,children:[e.jsx(r,{className:"h-3 w-3 mr-1"}),a.statusLabel]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f(a.valorMulta)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{to:`/fiscalizacao/auto/${a.id}`,className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx(l,{to:`/fiscalizacao/auto/${a.id}/editar`,className:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300",children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:e.jsx(C,{className:"h-4 w-4"})})]})})]},a.id)})})]})}),i.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(n,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Nenhum auto encontrado"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Tente ajustar os filtros ou criar um novo auto."})]})]})]})};export{V as default};
