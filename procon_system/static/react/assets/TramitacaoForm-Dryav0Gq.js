import{j as e}from"./main-DVdFXPbZ.js";import{u as L,e as U,r as l,L as f}from"./router-C15yhWin.js";import{L as j}from"./LoadingSpinner-BMSYS9qZ.js";import{u as J}from"./useNotification-Bm6NCblX.js";import{F as B}from"./ArrowLeftIcon-B1Aara0h.js";import{F as q}from"./DocumentTextIcon-o9njoXYt.js";import{F as G}from"./BuildingOffice2Icon-Ct3o_Y18.js";import{F as H}from"./ScaleIcon-D3m58Xco.js";import{F as k}from"./PaperClipIcon-COa5Xtiy.js";import{F as K}from"./CheckCircleIcon-B-MrGrlS.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";const te=()=>{const N=L(),{id:g}=U(),n=!!g,[w,x]=l.useState(!1),[u,b]=l.useState(!1),{showNotification:c}=J(),[r,m]=l.useState({processoId:"",tipoTramitacao:"",orgaoOrigem:"",orgaoDestino:"",responsavelOrigem:"",responsavelDestino:"",dataEnvio:"",prazoResposta:"",prioridade:"normal",assunto:"",observacoes:"",documentosAnexos:[],status:"pendente",protocoloInterno:"",protocoloExterno:"",motivoTramitacao:"",acao:"",numeroProcesso:"",interessado:"",cpfCnpj:""}),[o,p]=l.useState({}),[h,T]=l.useState([]),[y,C]=l.useState([]),[v,D]=l.useState([]),O=[{value:"encaminhamento",label:"Encaminhamento"},{value:"devolucao",label:"Devolução"},{value:"informacao",label:"Solicitação de Informação"},{value:"parecer",label:"Solicitação de Parecer"},{value:"execucao",label:"Execução"},{value:"arquivamento",label:"Arquivamento"},{value:"redistribuicao",label:"Redistribuição"}],P=[{value:"baixa",label:"Baixa",color:"text-green-600"},{value:"normal",label:"Normal",color:"text-blue-600"},{value:"alta",label:"Alta",color:"text-yellow-600"},{value:"urgente",label:"Urgente",color:"text-red-600"}];l.useEffect(()=>{E(),n&&R()},[g,n]);const E=async()=>{try{await Promise.all([S(),F(),A()])}catch{c("Erro ao carregar dados auxiliares","error")}},S=async()=>{T([{id:1,numero:"2024001",interessado:"João Silva",cpfCnpj:"123.456.789-00"},{id:2,numero:"2024002",interessado:"Empresa ABC Ltda",cpfCnpj:"12.345.678/0001-90"},{id:3,numero:"2024003",interessado:"Maria Santos",cpfCnpj:"987.654.321-00"}])},F=async()=>{C([{id:1,nome:"PROCON Municipal",sigla:"PROCON"},{id:2,nome:"Ministério Público",sigla:"MP"},{id:3,nome:"Tribunal de Justiça",sigla:"TJ"},{id:4,nome:"Defensoria Pública",sigla:"DP"},{id:5,nome:"Polícia Civil",sigla:"PC"}])},A=async()=>{D([{id:1,nome:"Ana Silva",email:"ana@procon.gov.br",cargo:"Fiscal"},{id:2,nome:"Carlos Santos",email:"carlos@procon.gov.br",cargo:"Advogado"},{id:3,nome:"Maria Oliveira",email:"maria@procon.gov.br",cargo:"Coordenadora"}])},R=async()=>{x(!0);try{await new Promise(t=>setTimeout(t,1e3)),m({processoId:"1",tipoTramitacao:"encaminhamento",orgaoOrigem:"1",orgaoDestino:"2",responsavelOrigem:"1",responsavelDestino:"",dataEnvio:"2024-08-27",prazoResposta:"2024-09-10",prioridade:"normal",assunto:"Análise de processo administrativo",observacoes:"Processo necessita de parecer jurídico.",status:"pendente",protocoloInterno:"PROT-2024-001",motivoTramitacao:"Necessário parecer jurídico especializado",acao:"Emitir parecer sobre legalidade do procedimento",numeroProcesso:"2024001",interessado:"João Silva",cpfCnpj:"123.456.789-00"})}catch{c("Erro ao carregar tramitação","error")}finally{x(!1)}},s=(a,t)=>{if(m(i=>({...i,[a]:t})),o[a]&&p(i=>({...i,[a]:null})),a==="processoId"&&t){const i=h.find(d=>d.id.toString()===t);i&&m(d=>({...d,numeroProcesso:i.numero,interessado:i.interessado,cpfCnpj:i.cpfCnpj}))}},I=()=>{const a={};return r.processoId||(a.processoId="Processo é obrigatório"),r.tipoTramitacao||(a.tipoTramitacao="Tipo de tramitação é obrigatório"),r.orgaoOrigem||(a.orgaoOrigem="Órgão de origem é obrigatório"),r.orgaoDestino||(a.orgaoDestino="Órgão de destino é obrigatório"),r.responsavelOrigem||(a.responsavelOrigem="Responsável de origem é obrigatório"),r.dataEnvio||(a.dataEnvio="Data de envio é obrigatória"),r.assunto.trim()||(a.assunto="Assunto é obrigatório"),r.motivoTramitacao.trim()||(a.motivoTramitacao="Motivo da tramitação é obrigatório"),r.acao.trim()||(a.acao="Ação solicitada é obrigatória"),r.orgaoOrigem===r.orgaoDestino&&(a.orgaoDestino="Órgão de destino deve ser diferente do órgão de origem"),p(a),Object.keys(a).length===0},$=async a=>{if(a.preventDefault(),!I()){c("Corrija os erros no formulário","error");return}b(!0);try{await new Promise(t=>setTimeout(t,2e3)),c(n?"Tramitação atualizada com sucesso!":"Tramitação criada com sucesso!","success"),N("/tramitacao/lista")}catch{c("Erro ao salvar tramitação","error")}finally{b(!1)}},z=a=>{const i=Array.from(a.target.files).map(d=>({id:Date.now()+Math.random(),name:d.name,size:d.size,type:d.type,file:d}));m(d=>({...d,documentosAnexos:[...d.documentosAnexos,...i]}))},M=a=>{m(t=>({...t,documentosAnexos:t.documentosAnexos.filter(i=>i.id!==a)}))};return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(j,{})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(f,{to:"/tramitacao/lista",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(B,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:n?"Editar Tramitação":"Nova Tramitação"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:n?"Atualize os dados da tramitação":"Preencha os dados para criar uma nova tramitação"})]})]})}),e.jsxs("form",{onSubmit:$,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[e.jsx(q,{className:"w-5 h-5 mr-2"}),"Dados do Processo"]})}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Processo *"}),e.jsxs("select",{value:r.processoId,onChange:a=>s("processoId",a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${o.processoId?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Selecione um processo"}),h.map(a=>e.jsxs("option",{value:a.id,children:[a.numero," - ",a.interessado]},a.id))]}),o.processoId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.processoId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Número do Processo"}),e.jsx("input",{type:"text",value:r.numeroProcesso,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 dark:bg-gray-600 dark:border-gray-600 dark:text-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Interessado"}),e.jsx("input",{type:"text",value:r.interessado,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 dark:bg-gray-600 dark:border-gray-600 dark:text-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CPF/CNPJ"}),e.jsx("input",{type:"text",value:r.cpfCnpj,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 dark:bg-gray-600 dark:border-gray-600 dark:text-gray-300"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[e.jsx(G,{className:"w-5 h-5 mr-2"}),"Dados da Tramitação"]})}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Tramitação *"}),e.jsxs("select",{value:r.tipoTramitacao,onChange:a=>s("tipoTramitacao",a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${o.tipoTramitacao?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Selecione o tipo"}),O.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),o.tipoTramitacao&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.tipoTramitacao})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prioridade"}),e.jsx("select",{value:r.prioridade,onChange:a=>s("prioridade",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:P.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Órgão de Origem *"}),e.jsxs("select",{value:r.orgaoOrigem,onChange:a=>s("orgaoOrigem",a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${o.orgaoOrigem?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Selecione o órgão"}),y.map(a=>e.jsxs("option",{value:a.id,children:[a.nome," (",a.sigla,")"]},a.id))]}),o.orgaoOrigem&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.orgaoOrigem})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Órgão de Destino *"}),e.jsxs("select",{value:r.orgaoDestino,onChange:a=>s("orgaoDestino",a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${o.orgaoDestino?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Selecione o órgão"}),y.map(a=>e.jsxs("option",{value:a.id,children:[a.nome," (",a.sigla,")"]},a.id))]}),o.orgaoDestino&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.orgaoDestino})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Responsável de Origem *"}),e.jsxs("select",{value:r.responsavelOrigem,onChange:a=>s("responsavelOrigem",a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${o.responsavelOrigem?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Selecione o responsável"}),v.map(a=>e.jsxs("option",{value:a.id,children:[a.nome," - ",a.cargo]},a.id))]}),o.responsavelOrigem&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.responsavelOrigem})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Responsável de Destino"}),e.jsxs("select",{value:r.responsavelDestino,onChange:a=>s("responsavelDestino",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Selecione o responsável"}),v.map(a=>e.jsxs("option",{value:a.id,children:[a.nome," - ",a.cargo]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Data de Envio *"}),e.jsx("input",{type:"date",value:r.dataEnvio,onChange:a=>s("dataEnvio",a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${o.dataEnvio?"border-red-500":"border-gray-300"}`}),o.dataEnvio&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.dataEnvio})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prazo de Resposta"}),e.jsx("input",{type:"date",value:r.prazoResposta,onChange:a=>s("prazoResposta",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Protocolo Interno"}),e.jsx("input",{type:"text",value:r.protocoloInterno,onChange:a=>s("protocoloInterno",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Ex: PROT-2024-001"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Detalhes da Tramitação"]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assunto *"}),e.jsx("input",{type:"text",value:r.assunto,onChange:a=>s("assunto",a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${o.assunto?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Análise de processo administrativo"}),o.assunto&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.assunto})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivo da Tramitação *"}),e.jsx("textarea",{value:r.motivoTramitacao,onChange:a=>s("motivoTramitacao",a.target.value),rows:3,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${o.motivoTramitacao?"border-red-500":"border-gray-300"}`,placeholder:"Descreva o motivo da tramitação"}),o.motivoTramitacao&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.motivoTramitacao})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ação Solicitada *"}),e.jsx("textarea",{value:r.acao,onChange:a=>s("acao",a.target.value),rows:3,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${o.acao?"border-red-500":"border-gray-300"}`,placeholder:"Descreva a ação que deve ser tomada"}),o.acao&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.acao})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observações"}),e.jsx("textarea",{value:r.observacoes,onChange:a=>s("observacoes",a.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Observações adicionais"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Documentos Anexos"]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"file",multiple:!0,onChange:z,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})}),r.documentosAnexos.length>0&&e.jsx("div",{className:"space-y-2",children:r.documentosAnexos.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(k,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(a.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>M(a.id),className:"text-red-600 hover:text-red-900",children:"Remover"})]},a.id))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(f,{to:"/tramitacao/lista",className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:u,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?e.jsxs(e.Fragment,{children:[e.jsx(j,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Salvando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-5 h-5 mr-2"}),n?"Atualizar":"Criar"," Tramitação"]})})]})]})]})})};export{te as default};
