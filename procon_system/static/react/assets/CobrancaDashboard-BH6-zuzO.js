import{j as e,L as M}from"./main-BlGnCLHT.js";import{r as a}from"./router-C15yhWin.js";import{c}from"./cobrancaService-y4NTKzV9.js";import{K as n}from"./KPICard-BnjvXarF.js";import{a as i,f as F}from"./formatters-Ck8j3q9a.js";import{F as B}from"./PlusIcon-DZYmRjce.js";import{F as $}from"./DocumentArrowDownIcon-Bp61FGwk.js";import{F as L}from"./CurrencyDollarIcon-rQfx65sT.js";import{F as q}from"./CreditCardIcon-yDeJ47eb.js";import{F as G}from"./ExclamationTriangleIcon-Y0luX6t1.js";import{F as V}from"./CheckCircleIcon-B-MrGrlS.js";import{F as H}from"./EyeIcon-Cu0Wnbis.js";import{F as K}from"./BanknotesIcon-esZP9Qph.js";import{F as z}from"./ScaleIcon-D3m58Xco.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";const le=()=>{const[E,o]=a.useState(!0),[t,T]=a.useState({}),[d,m]=a.useState([]),[x,g]=a.useState([]),[p,h]=a.useState([]),[y,u]=a.useState([]),[k,j]=a.useState([]),[C,N]=a.useState([]),[I,f]=a.useState([]);a.useEffect(()=>{D()},[]);const D=async()=>{var s;try{o(!0);const[r,b,v,w,R,A,P,S]=await Promise.all([c.getEstatisticas(),c.getBoletosRecentes(),c.getPagamentosRecentes(),c.getRemessasRecentes(),c.getBoletosVencidos(),c.getBoletosPorStatus(),c.getPagamentosPorMes(),c.getRemessasPorStatus()]);T(r),m(Array.isArray(b)?b:[]),g(Array.isArray(v)?v:[]),h(Array.isArray(w)?w:[]),u(Array.isArray(R)?R:[]),j(Array.isArray(A)?A:[]),N(Array.isArray(P)?P:[]),f(Array.isArray(S)?S:[])}catch(r){console.error("Erro ao carregar dados do dashboard:",r),((s=r.response)==null?void 0:s.status)===401&&console.error("Erro de autenticação. Faça login novamente."),m([]),g([]),h([]),u([]),j([]),N([]),f([])}finally{o(!1)}},l=s=>{switch(s==null?void 0:s.toLowerCase()){case"pago":return"text-green-600 bg-green-100";case"vencido":return"text-red-600 bg-red-100";case"pendente":return"text-yellow-600 bg-yellow-100";case"cancelado":return"text-gray-600 bg-gray-100";case"processado":return"text-blue-600 bg-blue-100";case"erro":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return E?e.jsx(M,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard de Cobrança"}),e.jsx("p",{className:"text-gray-600",children:"Gestão avançada de boletos, pagamentos e remessas"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"btn-primary",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Novo Boleto"]}),e.jsxs("button",{className:"btn-secondary",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Gerar Remessa"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(n,{title:"Total em Aberto",value:i(t.totalEmAberto||0),icon:L,color:"blue",change:t.variacaoEmAberto||0,changeType:"percentage",description:"Valor total de boletos pendentes"}),e.jsx(n,{title:"Recebido Hoje",value:i(t.recebidoHoje||0),icon:q,color:"green",change:t.variacaoRecebido||0,changeType:"percentage",description:"Pagamentos processados hoje"}),e.jsx(n,{title:"Boletos Vencidos",value:t.boletosVencidos||0,icon:G,color:"red",change:t.variacaoVencidos||0,changeType:"number",description:"Boletos com prazo expirado"}),e.jsx(n,{title:"Taxa de Pagamento",value:`${t.taxaPagamento||0}%`,icon:V,color:"green",change:t.variacaoTaxa||0,changeType:"percentage",description:"Percentual de boletos pagos"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Boletos por Status"}),e.jsx("div",{className:"space-y-3",children:k.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${l(s.status).split(" ")[1]}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.status})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s.quantidade}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",s.percentual,"%)"]})]})]},r))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pagamentos por Mês"}),e.jsx("div",{className:"space-y-3",children:C.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.mes}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:i(s.valor)}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",s.quantidade," pagamentos)"]})]})]},r))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Boletos Vencidos"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Boleto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Devedor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dias Vencido"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.isArray(y)&&y.slice(0,5).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.numero}),e.jsx("div",{className:"text-sm text-gray-500",children:s.tipo})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.devedor}),e.jsx("div",{className:"text-sm text-gray-500",children:s.documento})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i(s.valor)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F(s.vencimento)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[s.diasVencido," dias"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{className:"text-indigo-600 hover:text-indigo-900 mr-3",children:e.jsx(H,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-green-600 hover:text-green-900",children:e.jsx(V,{className:"w-4 h-4"})})]})]},s.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Boletos Recentes"})}),e.jsx("div",{className:"p-6 space-y-4",children:Array.isArray(d)&&d.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${l(s.status).split(" ")[1]}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.numero}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.devedor," • ",i(s.valor)]})]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l(s.status)}`,children:s.status})]},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pagamentos Recentes"})}),e.jsx("div",{className:"p-6 space-y-4",children:Array.isArray(x)&&x.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.numeroBoleto}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.formaPagamento," • ",i(s.valor)]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:F(s.dataPagamento)})]},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Remessas Recentes"})}),e.jsx("div",{className:"p-6 space-y-4",children:Array.isArray(p)&&p.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${l(s.status).split(" ")[1]}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.numero}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.banco," • ",s.quantidadeBoletos," boletos"]})]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l(s.status)}`,children:s.status})]},s.id))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ações Rápidas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{className:"flex items-center justify-center p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(B,{className:"w-6 h-6 text-gray-600 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Novo Boleto"})]}),e.jsxs("button",{className:"flex items-center justify-center p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx($,{className:"w-6 h-6 text-gray-600 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gerar Remessa"})]}),e.jsxs("button",{className:"flex items-center justify-center p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(K,{className:"w-6 h-6 text-gray-600 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Processar Pagamentos"})]}),e.jsxs("button",{className:"flex items-center justify-center p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(z,{className:"w-6 h-6 text-gray-600 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Relatórios"})]})]})]})]})};export{le as default};
