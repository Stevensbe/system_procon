import{b as d,j as e,L as X}from"./main-DVdFXPbZ.js";import{r as x}from"./router-C15yhWin.js";import{P as Y}from"./PeticionamentoForm-CmDyOx0C.js";import{F as E}from"./EyeIcon-Cu0Wnbis.js";import{F as D}from"./ChatBubbleLeftRightIcon-B6yUNYfx.js";import{F as V}from"./PaperClipIcon-COa5Xtiy.js";import{F as z}from"./ArrowPathIcon-DvGuXmm8.js";import{F as k}from"./DocumentTextIcon-o9njoXYt.js";import{F as Q}from"./CalendarDaysIcon-BUxz6ilb.js";import{F as W}from"./BuildingOfficeIcon-DcZomax8.js";import{F as K}from"./CurrencyDollarIcon-rQfx65sT.js";import{F as ee}from"./UserIcon-Crv8uqGG.js";import{F as se}from"./EnvelopeIcon-C9T2KZQl.js";import{F as ae}from"./PhoneIcon-xf3N8u6b.js";import{F as Z}from"./ClockIcon-CbdR_WDb.js";import{F as $}from"./CheckCircleIcon-B-MrGrlS.js";import{F as S}from"./ExclamationTriangleIcon-Y0luX6t1.js";import{F as te}from"./FunnelIcon-PU3yDtaQ.js";import{F as G}from"./MagnifyingGlassIcon-DxjVcYIb.js";import{F as B}from"./DocumentPlusIcon-CsZVhF-X.js";import{F as re}from"./ChartBarIcon-DI9Vcfue.js";import{F as oe}from"./PaperAirplaneIcon-CzbyTQNx.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";import"./XMarkIcon-C8R2LFm1.js";class ie{async listarPeticoes(s={}){const a=new URLSearchParams(s);return(await d.get(`/peticionamento/api/peticoes/?${a}`)).data}async obterPeticao(s){return(await d.get(`/peticionamento/api/peticoes/${s}/`)).data}async criarPeticao(s){return(await d.post("/peticionamento/api/peticoes/",s)).data}async atualizarPeticao(s,a){return(await d.patch(`/peticionamento/api/peticoes/${s}/`,a)).data}async novaPeticaoPortal(s,a=[]){const n=new FormData;return Object.keys(s).forEach(l=>{s[l]!==null&&s[l]!==void 0&&n.append(l,s[l])}),a.forEach((l,j)=>{n.append(`anexos[${j}]`,l)}),(await d.post("/peticionamento/api/portal/nova-peticao/",n,{headers:{"Content-Type":"multipart/form-data"}})).data}async consultarPeticaoPortal(s,a){return(await d.post("/peticionamento/api/portal/consultar/",{numero_peticao:s,documento:a})).data}async detalhePeticaoPortal(s){return(await d.get(`/peticionamento/api/portal/peticao/${s}/`)).data}async listarTiposPeticao(s=!0){const a=s?"?ativo=true":"";return(await d.get(`/peticionamento/api/tipos-peticao/${a}`)).data}async criarTipoPeticao(s){return(await d.post("/peticionamento/api/tipos-peticao/",s)).data}async atualizarTipoPeticao(s,a){return(await d.patch(`/peticionamento/api/tipos-peticao/${s}/`,a)).data}async listarAnexos(s){return(await d.get(`/peticionamento/api/anexos/?peticao=${s}`)).data}async uploadAnexo(s,a,n="DOCUMENTO",p=""){const l=new FormData;return l.append("peticao",s),l.append("arquivo",a),l.append("tipo_anexo",n),l.append("descricao",p),l.append("nome_arquivo",a.name),l.append("tipo_mime",a.type),l.append("tamanho_bytes",a.size),(await d.post("/peticionamento/api/upload-anexo/",l,{headers:{"Content-Type":"multipart/form-data"}})).data}async removerAnexo(s){return(await d.delete(`/peticionamento/api/anexos/${s}/`)).data}async listarInteracoes(s){return(await d.get(`/peticionamento/api/interacoes/?peticao=${s}`)).data}async adicionarInteracao(s){return(await d.post("/peticionamento/api/interacoes/",s)).data}async listarRespostas(s){return(await d.get(`/peticionamento/api/respostas/?peticao=${s}`)).data}async criarResposta(s){return(await d.post("/peticionamento/api/respostas/",s)).data}async receberPeticao(s,a=""){return(await d.post(`/peticionamento/gestao/peticao/${s}/receber/`,{observacoes:a})).data}async responderPeticao(s,a){return(await d.post(`/peticionamento/gestao/peticao/${s}/responder/`,a)).data}async obterEstatisticas(){return(await d.get("/peticionamento/api/estatisticas/")).data}async obterDadosDashboard(){return(await d.get("/peticionamento/api/dashboard-dados/")).data}async listarPeticoesPendentes(){return(await d.get("/peticionamento/api/peticoes-pendentes/")).data}async listarNotificacoes(){return(await d.get("/peticionamento/api/notificacoes/")).data}async marcarNotificacaoLida(s){return(await d.post(`/peticionamento/api/marcar-notificacao-lida/${s}/`)).data}async validarDocumento(s){return(await d.post("/peticionamento/api/validar-documento/",{documento:s})).data}formatarNumeroPeticao(s){if(!s)return"";const a=s.toString().replace(/[^\d]/g,"");if(a.length>=7){const n=a.substring(0,4),p=a.substring(4);return`PET-${n}-${p.padStart(7,"0")}`}return s}calcularDiasPeticao(s){if(!s)return 0;const a=new Date(s),p=Math.abs(new Date-a);return Math.ceil(p/(1e3*60*60*24))}verificarAtraso(s,a){return!s||!a?!1:this.calcularDiasPeticao(s)>a}formatarStatus(s){return{RASCUNHO:{label:"Rascunho",color:"gray",icon:"üìù"},ENVIADA:{label:"Enviada",color:"blue",icon:"üì§"},RECEBIDA:{label:"Recebida",color:"green",icon:"üì•"},EM_ANALISE:{label:"Em An√°lise",color:"yellow",icon:"üîç"},PENDENTE_DOCUMENTACAO:{label:"Pendente Documenta√ß√£o",color:"orange",icon:"üìã"},RESPONDIDA:{label:"Respondida",color:"purple",icon:"‚úâÔ∏è"},FINALIZADA:{label:"Finalizada",color:"green",icon:"‚úÖ"},ARQUIVADA:{label:"Arquivada",color:"gray",icon:"üìÅ"}}[s]||{label:s,color:"gray",icon:"‚ùì"}}formatarCategoria(s){return{DENUNCIA:{label:"Den√∫ncia",color:"red",icon:"‚ö†Ô∏è"},RECLAMACAO:{label:"Reclama√ß√£o",color:"orange",icon:"üò†"},SOLICITACAO:{label:"Solicita√ß√£o",color:"blue",icon:"üìù"},RECURSO:{label:"Recurso",color:"purple",icon:"‚öñÔ∏è"},OUTROS:{label:"Outros",color:"gray",icon:"üìÑ"}}[s]||{label:s,color:"gray",icon:"‚ùì"}}validarCPF(s){if(s=s.replace(/[^\d]+/g,""),s.length!==11||s.match(/(\d)\1{10}/))return!1;s=s.split("").map(n=>+n);const a=n=>s.slice(0,n-12).reduce((p,l,j)=>p+l*(n-j),0)*10%11%10;return a(10)===s[9]&&a(11)===s[10]}validarCNPJ(s){if(s=s.replace(/[^\d]+/g,""),s.length!==14||s.match(/(\d)\1{13}/))return!1;s=s.split("").map(n=>+n);const a=n=>s.slice(0,n-7).reduce((p,l,j)=>p+l*(n-j>=2?n-j:n-j+8),0)*10%11%10;return a(12)===s[12]&&a(13)===s[13]}formatarCPFCNPJ(s){return s=s.replace(/[^\d]/g,""),s.length<=11?s.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):s.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5")}formatarTelefone(s){return s=s.replace(/[^\d]/g,""),s.length<=10?s.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):s.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3")}}const g=new ie,ne=({peticao:r,onClose:s,onUpdate:a})=>{var m,u;const[n,p]=x.useState("detalhes"),[l,j]=x.useState(!1),[_,A]=x.useState(r.respostas||[]),[c,P]=x.useState(r.anexos||[]),T=i=>({RASCUNHO:{label:"Rascunho",color:"gray",icon:k},ENVIADA:{label:"Enviada",color:"blue",icon:z},RECEBIDA:{label:"Recebida",color:"green",icon:$},EM_ANALISE:{label:"Em An√°lise",color:"yellow",icon:E},PENDENTE_DOCUMENTACAO:{label:"Pendente Documenta√ß√£o",color:"orange",icon:S},RESPONDIDA:{label:"Respondida",color:"purple",icon:D},FINALIZADA:{label:"Finalizada",color:"green",icon:$},INDEFERIDA:{label:"Indeferida",color:"red",icon:S}})[i]||{label:i,color:"gray",icon:S},f=i=>({RECLAMACAO:{label:"Reclama√ß√£o",color:"red",icon:"‚ö†Ô∏è"},DENUNCIA:{label:"Den√∫ncia",color:"orange",icon:"üö®"},SOLICITACAO:{label:"Solicita√ß√£o",color:"blue",icon:"üìã"},SUGESTAO:{label:"Sugest√£o",color:"green",icon:"üí°"},RECURSO:{label:"Recurso",color:"purple",icon:"‚öñÔ∏è"}})[i]||{label:i,color:"gray",icon:"üìÑ"},L=()=>{if(!r.criado_em)return 0;const i=new Date(r.criado_em),b=Math.abs(new Date-i);return Math.ceil(b/(1e3*60*60*24))},N=()=>{if(!r.prazo_resposta)return null;const i=L();return r.prazo_resposta-i},C=T(r.status),I=f((m=r.tipo_peticao)==null?void 0:m.categoria),y=C.icon,O=L(),t=N();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:`bg-${C.color}-500 text-white p-6`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"h-8 w-8 mr-3"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:g.formatarNumeroPeticao(r.numero_peticao)}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsxs("p",{className:"text-sm opacity-90",children:["Status: ",C.label]}),e.jsx("span",{className:"text-lg",children:I.icon}),e.jsx("span",{className:"text-sm opacity-90",children:I.label})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm opacity-75",children:"Dias em an√°lise"}),e.jsx("p",{className:"text-xl font-bold",children:O})]}),t!==null&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm opacity-75",children:"Prazo restante"}),e.jsx("p",{className:`text-xl font-bold ${t<=0?"text-red-200":t<=5?"text-yellow-200":"text-white"}`,children:t>0?`${t} dias`:"Em atraso"})]}),e.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 p-2",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex space-x-8 px-6",children:[{id:"detalhes",label:"Detalhes",icon:E},{id:"respostas",label:"Respostas",icon:D},{id:"anexos",label:"Anexos",icon:V},{id:"historico",label:"Hist√≥rico",icon:z}].map(i=>{const v=i.icon;return e.jsxs("button",{onClick:()=>p(i.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===i.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:i.label}),i.id==="anexos"&&c.length>0&&e.jsx("span",{className:"bg-gray-200 text-gray-600 text-xs rounded-full px-2 py-1",children:c.length}),i.id==="respostas"&&_.length>0&&e.jsx("span",{className:"bg-blue-200 text-blue-600 text-xs rounded-full px-2 py-1",children:_.length})]},i.id)})})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[n==="detalhes"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(k,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Assunto"}),e.jsx("p",{className:"text-gray-900 font-medium",children:r.assunto})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Data de Envio"}),e.jsx("p",{className:"text-gray-900",children:new Date(r.criado_em).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(W,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tipo de Peti√ß√£o"}),e.jsx("p",{className:"text-gray-900",children:((u=r.tipo_peticao)==null?void 0:u.nome)||"N√£o informado"})]})]}),r.valor_causa&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(K,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Valor Envolvido"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r.valor_causa)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(ee,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Peticion√°rio"}),e.jsx("p",{className:"text-gray-900 font-medium",children:r.peticionario_nome}),e.jsx("p",{className:"text-sm text-gray-600",children:r.peticionario_documento})]})]}),r.peticionario_email&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(se,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"E-mail"}),e.jsx("p",{className:"text-gray-900",children:r.peticionario_email})]})]}),r.peticionario_telefone&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(ae,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Telefone"}),e.jsx("p",{className:"text-gray-900",children:r.peticionario_telefone})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Prazo de Resposta"}),e.jsxs("p",{className:"text-gray-900",children:[r.prazo_resposta||30," dias √∫teis"]})]})]})]})]}),r.empresa_nome&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Empresa Reclamada"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Nome/Raz√£o Social"}),e.jsx("p",{className:"text-gray-900",children:r.empresa_nome})]}),r.empresa_cnpj&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"CNPJ"}),e.jsx("p",{className:"text-gray-900",children:r.empresa_cnpj})]}),r.empresa_endereco&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Endere√ßo"}),e.jsx("p",{className:"text-gray-900",children:r.empresa_endereco})]})]})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Descri√ß√£o da Peti√ß√£o"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:r.descricao})})]}),r.pedidos&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Pedidos"}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.pedidos})})]})]}),n==="respostas"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Respostas e Comunica√ß√µes"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 text-sm",children:"Nova Resposta"})]}),_.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma resposta registrada"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"As respostas enviadas ao peticion√°rio aparecer√£o aqui"})]}):e.jsx("div",{className:"space-y-4",children:_.map((i,v)=>{var b;return e.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.tipo==="RESPOSTA_OFICIAL"?"üìã Resposta Oficial":i.tipo==="SOLICITACAO_DOCUMENTOS"?"üìé Solicita√ß√£o de Documentos":i.tipo==="COMUNICACAO_INTERNA"?"üè¢ Comunica√ß√£o Interna":"üí¨ Comunica√ß√£o"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Por: ",((b=i.usuario)==null?void 0:b.nome)||"Sistema"," ‚Ä¢ ",new Date(i.data_envio).toLocaleDateString("pt-BR")]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.enviado_email?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i.enviado_email?"Enviado por e-mail":"Interno"})]}),e.jsx("div",{className:"bg-gray-50 rounded p-3",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:i.conteudo})}),i.anexos&&i.anexos.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Anexos:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.anexos.map((F,R)=>e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:["üìÑ ",F.nome]},R))})]})]},v)})})]}),n==="anexos"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Anexos da Peti√ß√£o"}),c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum anexo encontrado"})]}):e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:c.map((i,v)=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("span",{className:"font-medium text-gray-900 truncate",children:i.nome_arquivo})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm",children:"Download"})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Tamanho: ",(i.tamanho_bytes/1024/1024).toFixed(2)," MB"]}),e.jsxs("p",{children:["Tipo: ",i.tipo_mime]}),i.descricao&&e.jsxs("p",{className:"italic",children:['"',i.descricao,'"']}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Adicionado em ",new Date(i.data_upload).toLocaleDateString("pt-BR")]})]})]},v))})]}),n==="historico"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Hist√≥rico da Peti√ß√£o"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 bg-blue-50 p-4 rounded-lg",children:[e.jsx(k,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Peti√ß√£o criada"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Peti√ß√£o registrada no sistema pelo cidad√£o"}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[new Date(r.criado_em).toLocaleDateString("pt-BR")," √†s"," ",new Date(r.criado_em).toLocaleTimeString("pt-BR")]})]})]}),r.data_recebimento&&e.jsxs("div",{className:"flex items-start space-x-3 bg-green-50 p-4 rounded-lg",children:[e.jsx($,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Peti√ß√£o recebida"}),e.jsx("p",{className:"text-sm text-green-700",children:"Confirmado recebimento pela institui√ß√£o"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:new Date(r.data_recebimento).toLocaleDateString("pt-BR")})]})]}),r.status==="EM_ANALISE"&&e.jsxs("div",{className:"flex items-start space-x-3 bg-yellow-50 p-4 rounded-lg",children:[e.jsx(E,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-900",children:"Em an√°lise"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Peti√ß√£o sendo analisada pela equipe t√©cnica"})]})]}),r.status==="RESPONDIDA"&&e.jsxs("div",{className:"flex items-start space-x-3 bg-purple-50 p-4 rounded-lg",children:[e.jsx(D,{className:"h-5 w-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-900",children:"Peti√ß√£o respondida"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Resposta oficial enviada ao peticion√°rio"}),r.data_resposta&&e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:new Date(r.data_resposta).toLocaleDateString("pt-BR")})]})]})]})]})]}),e.jsx("div",{className:"border-t bg-gray-50 px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Peti√ß√£o gerada automaticamente pelo sistema"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm",children:"Imprimir"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 text-sm",children:"Responder"}),e.jsx("button",{onClick:s,className:"border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50 text-sm",children:"Fechar"})]})]})})]})})},le=({onPeticaoSelect:r})=>{const[s,a]=x.useState(!1),[n,p]=x.useState([]),[l,j]=x.useState({status:"",categoria:"",prazo_vencimento:"",peticionario:"",empresa:"",data_inicio:"",data_fim:""}),[_,A]=x.useState("-criado_em"),[c,P]=x.useState({pagina_atual:1,total_paginas:1,total_items:0,items_por_pagina:10});x.useEffect(()=>{T()},[l,_,c.pagina_atual]);const T=async()=>{a(!0);try{const t={...l,ordering:_,page:c.pagina_atual,page_size:c.items_por_pagina},m=await g.listarPeticoes(t);p(m.results||[]),P(u=>({...u,total_paginas:Math.ceil((m.count||0)/c.items_por_pagina),total_items:m.count||0}))}catch(t){console.error("Erro ao carregar peti√ß√µes:",t),p([{id:1,numero_peticao:"PET-2025-0000123",assunto:"Reclama√ß√£o sobre produto com defeito",peticionario_nome:"Jo√£o Silva Santos",peticionario_documento:"123.456.789-00",tipo_peticao:{nome:"Reclama√ß√£o",categoria:"RECLAMACAO"},status:"EM_ANALISE",criado_em:"2025-08-15T10:30:00Z",prazo_resposta:30,empresa_nome:"Loja XYZ Ltda",valor_causa:1500,analista_responsavel:{nome:"Maria Santos"},tem_anexos:!0,prioridade:"NORMAL"},{id:2,numero_peticao:"PET-2025-0000124",assunto:"Solicita√ß√£o de cancelamento de servi√ßo",peticionario_nome:"Maria Fernanda Costa",peticionario_documento:"987.654.321-00",tipo_peticao:{nome:"Solicita√ß√£o",categoria:"SOLICITACAO"},status:"PENDENTE_DOCUMENTACAO",criado_em:"2025-08-14T14:20:00Z",prazo_resposta:15,empresa_nome:"Telecom ABC",valor_causa:800,analista_responsavel:null,tem_anexos:!1,prioridade:"ALTA"}])}finally{a(!1)}},f=(t,m)=>{j(u=>({...u,[t]:m})),P(u=>({...u,pagina_atual:1}))},L=()=>{j({status:"",categoria:"",prazo_vencimento:"",peticionario:"",empresa:"",data_inicio:"",data_fim:""})},N=t=>{const m=new Date(t);return Math.ceil((new Date-m)/(1e3*60*60*24))},C=(t,m)=>{const u=N(t);return m-u},I=t=>({RASCUNHO:{label:"Rascunho",color:"gray",icon:k},ENVIADA:{label:"Enviada",color:"blue",icon:z},RECEBIDA:{label:"Recebida",color:"green",icon:$},EM_ANALISE:{label:"Em An√°lise",color:"yellow",icon:E},PENDENTE_DOCUMENTACAO:{label:"Pend. Documenta√ß√£o",color:"orange",icon:S},RESPONDIDA:{label:"Respondida",color:"purple",icon:D},FINALIZADA:{label:"Finalizada",color:"green",icon:$},INDEFERIDA:{label:"Indeferida",color:"red",icon:S}})[t]||{label:t,color:"gray",icon:S},y=t=>({RECLAMACAO:{label:"Reclama√ß√£o",color:"red",icon:"‚ö†Ô∏è"},DENUNCIA:{label:"Den√∫ncia",color:"orange",icon:"üö®"},SOLICITACAO:{label:"Solicita√ß√£o",color:"blue",icon:"üìã"},SUGESTAO:{label:"Sugest√£o",color:"green",icon:"üí°"},RECURSO:{label:"Recurso",color:"purple",icon:"‚öñÔ∏è"}})[t]||{label:t,color:"gray",icon:"üìÑ"},O=t=>({BAIXA:{label:"Baixa",color:"green",icon:"üü¢"},NORMAL:{label:"Normal",color:"blue",icon:"üîµ"},ALTA:{label:"Alta",color:"orange",icon:"üü†"},URGENTE:{label:"Urgente",color:"red",icon:"üî¥"}})[t]||{label:"Normal",color:"blue",icon:"üîµ"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Gest√£o Interna de Peti√ß√µes"}),e.jsx("p",{className:"text-gray-600",children:"Analise, responda e gerencie peti√ß√µes recebidas dos cidad√£os"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(te,{className:"h-5 w-5 mr-2"}),"Filtros de Pesquisa"]}),e.jsx("button",{onClick:L,className:"text-sm text-blue-600 hover:text-blue-800",children:"Limpar Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:l.status,onChange:t=>f("status",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos os status"}),e.jsx("option",{value:"ENVIADA",children:"Enviada"}),e.jsx("option",{value:"RECEBIDA",children:"Recebida"}),e.jsx("option",{value:"EM_ANALISE",children:"Em An√°lise"}),e.jsx("option",{value:"PENDENTE_DOCUMENTACAO",children:"Pendente Documenta√ß√£o"}),e.jsx("option",{value:"RESPONDIDA",children:"Respondida"}),e.jsx("option",{value:"FINALIZADA",children:"Finalizada"}),e.jsx("option",{value:"INDEFERIDA",children:"Indeferida"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsxs("select",{value:l.categoria,onChange:t=>f("categoria",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todas as categorias"}),e.jsx("option",{value:"RECLAMACAO",children:"Reclama√ß√£o"}),e.jsx("option",{value:"DENUNCIA",children:"Den√∫ncia"}),e.jsx("option",{value:"SOLICITACAO",children:"Solicita√ß√£o"}),e.jsx("option",{value:"SUGESTAO",children:"Sugest√£o"}),e.jsx("option",{value:"RECURSO",children:"Recurso"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prazo"}),e.jsxs("select",{value:l.prazo_vencimento,onChange:t=>f("prazo_vencimento",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos os prazos"}),e.jsx("option",{value:"vencido",children:"Vencido"}),e.jsx("option",{value:"vence_hoje",children:"Vence hoje"}),e.jsx("option",{value:"vence_5_dias",children:"Vence em 5 dias"}),e.jsx("option",{value:"no_prazo",children:"No prazo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordena√ß√£o"}),e.jsxs("select",{value:_,onChange:t=>A(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"-criado_em",children:"Mais recentes"}),e.jsx("option",{value:"criado_em",children:"Mais antigas"}),e.jsx("option",{value:"prazo_resposta",children:"Prazo (crescente)"}),e.jsx("option",{value:"-prazo_resposta",children:"Prazo (decrescente)"}),e.jsx("option",{value:"peticionario_nome",children:"Peticion√°rio (A-Z)"}),e.jsx("option",{value:"-valor_causa",children:"Valor (maior)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peticion√°rio"}),e.jsx("input",{type:"text",value:l.peticionario,onChange:t=>f("peticionario",t.target.value),placeholder:"Nome ou documento",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Empresa"}),e.jsx("input",{type:"text",value:l.empresa,onChange:t=>f("empresa",t.target.value),placeholder:"Nome da empresa",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data In√≠cio"}),e.jsx("input",{type:"date",value:l.data_inicio,onChange:t=>f("data_inicio",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:l.data_fim,onChange:t=>f("data_fim",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Peti√ß√µes Encontradas (",c.total_items,")"]}),e.jsxs("button",{onClick:T,disabled:s,className:"flex items-center px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:[e.jsx(z,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Atualizar"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:s?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma peti√ß√£o encontrada"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Ajuste os filtros ou tente uma nova busca"})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Peti√ß√£o"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Peticion√°rio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prazo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A√ß√µes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(t=>{var F;const m=I(t.status),u=y((F=t.tipo_peticao)==null?void 0:F.categoria),i=O(t.prioridade),v=N(t.criado_em),b=C(t.criado_em,t.prazo_resposta);return e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>r(t),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-blue-600",children:g.formatarNumeroPeticao(t.numero_peticao)}),t.tem_anexos&&e.jsx(V,{className:"h-4 w-4 text-gray-400"})]}),e.jsx("div",{className:"text-sm text-gray-900 mt-1 truncate max-w-xs",children:t.assunto}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-${u.color}-100 text-${u.color}-800`,children:[u.icon," ",u.label]}),e.jsx("span",{className:"text-lg",children:i.icon})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.peticionario_nome}),e.jsx("div",{className:"text-sm text-gray-500",children:t.peticionario_documento})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:t.empresa_nome||"N√£o informado"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-${m.color}-100 text-${m.color}-800`,children:m.label}),t.analista_responsavel&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.analista_responsavel.nome})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:`font-medium ${b<0?"text-red-600":b<=5?"text-orange-600":"text-green-600"}`,children:b<0?`${Math.abs(b)} dias em atraso`:b===0?"Vence hoje":`${b} dias restantes`}),e.jsxs("div",{className:"text-xs text-gray-500",children:[v," dias em an√°lise"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.valor_causa?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.valor_causa):"‚Äî"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:R=>{R.stopPropagation(),r(t)},className:"text-blue-600 hover:text-blue-900",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx("button",{onClick:R=>{R.stopPropagation()},className:"text-green-600 hover:text-green-900",children:e.jsx(D,{className:"h-4 w-4"})})]})})]},t.id)})})]})}),c.total_paginas>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",(c.pagina_atual-1)*c.items_por_pagina+1," a"," ",Math.min(c.pagina_atual*c.items_por_pagina,c.total_items)," de"," ",c.total_items," resultados"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>P(t=>({...t,pagina_atual:t.pagina_atual-1})),disabled:c.pagina_atual===1,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["P√°gina ",c.pagina_atual," de ",c.total_paginas]}),e.jsx("button",{onClick:()=>P(t=>({...t,pagina_atual:t.pagina_atual+1})),disabled:c.pagina_atual===c.total_paginas,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr√≥xima"})]})]})})]})]})},$e=()=>{var i,v,b,F,R,J,q;const[r,s]=x.useState(!0),[a,n]=x.useState(null),[p,l]=x.useState([]),[j,_]=x.useState([]),[A,c]=x.useState("dashboard"),[P,T]=x.useState(""),[f,L]=x.useState(""),[N,C]=x.useState(null),[I,y]=x.useState(null),[O,t]=x.useState(!1);x.useEffect(()=>{m()},[]);const m=async()=>{s(!0);try{const[o,h,w]=await Promise.all([g.obterDadosDashboard(),g.listarPeticoesPendentes(),g.listarPeticoes({ordering:"-criado_em",limit:10})]);n(o),l(h.results||h||[]),_(w.results||w||[])}catch(o){console.error("Erro ao carregar dados:",o),n({total_peticoes:856,peticoes_mes:124,enviadas:234,em_analise:89,respondidas:456,pendentes:34,finalizadas:533}),l([{id:1,numero_peticao:"PET-2025-0000123",assunto:"Reclama√ß√£o sobre produto com defeito",peticionario_nome:"Jo√£o Silva Santos",tipo_peticao:{nome:"Reclama√ß√£o",categoria:"RECLAMACAO"},status:"EM_ANALISE",criado_em:"2025-08-15T10:30:00Z",prazo_resposta:30,empresa_nome:"Loja XYZ Ltda"},{id:2,numero_peticao:"PET-2025-0000124",assunto:"Solicita√ß√£o de cancelamento de servi√ßo",peticionario_nome:"Maria Fernanda Costa",tipo_peticao:{nome:"Solicita√ß√£o",categoria:"SOLICITACAO"},status:"PENDENTE_DOCUMENTACAO",criado_em:"2025-08-14T14:20:00Z",prazo_resposta:15,empresa_nome:"Telecom ABC"}]),_([{id:3,numero_peticao:"PET-2025-0000125",assunto:"Den√∫ncia de propaganda enganosa",peticionario_nome:"Carlos Eduardo Lima",tipo_peticao:{nome:"Den√∫ncia",categoria:"DENUNCIA"},status:"ENVIADA",criado_em:"2025-08-16T09:15:00Z"}])}finally{s(!1)}},u=async o=>{if(o.preventDefault(),!P.trim()&&!f.trim()){alert("Informe o n√∫mero da peti√ß√£o ou documento");return}t(!0);try{const h=await g.consultarPeticaoPortal(P,f);C(h)}catch(h){console.error("Erro na consulta:",h),C({encontrada:!1,erro:"Peti√ß√£o n√£o encontrada ou dados incorretos"})}finally{t(!1)}};return r&&A==="dashboard"?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(X,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Peticionamento Eletr√¥nico"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie peti√ß√µes, recursos e solicita√ß√µes dos cidad√£os"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>c("nova-peticao"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(B,{className:"h-5 w-5 mr-2"}),"Nova Peti√ß√£o"]}),e.jsxs("button",{onClick:m,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(z,{className:"h-5 w-5 mr-2"}),"Atualizar"]})]})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[{id:"dashboard",label:"Dashboard",icon:re},{id:"consultar",label:"Consultar Peti√ß√£o",icon:G},{id:"nova-peticao",label:"Nova Peti√ß√£o",icon:B},{id:"gestao",label:"Gest√£o Interna",icon:D}].map(o=>{const h=o.icon;return e.jsxs("button",{onClick:()=>c(o.id),className:`flex items-center space-x-2 px-4 py-2 rounded-md font-medium transition-colors ${A===o.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(h,{className:"h-5 w-5"}),e.jsx("span",{children:o.label})]},o.id)})}),A==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-7 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm font-medium uppercase tracking-wider",children:"Total"}),e.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:(i=a==null?void 0:a.total_peticoes)==null?void 0:i.toLocaleString()})]}),e.jsx(B,{className:"h-10 w-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-600 text-sm font-medium uppercase tracking-wider",children:"Este M√™s"}),e.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:(v=a==null?void 0:a.peticoes_mes)==null?void 0:v.toLocaleString()})]}),e.jsx($,{className:"h-10 w-10 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-cyan-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-cyan-600 text-sm font-medium uppercase tracking-wider",children:"Enviadas"}),e.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:(b=a==null?void 0:a.enviadas)==null?void 0:b.toLocaleString()})]}),e.jsx(oe,{className:"h-10 w-10 text-cyan-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-600 text-sm font-medium uppercase tracking-wider",children:"Em An√°lise"}),e.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:(F=a==null?void 0:a.em_analise)==null?void 0:F.toLocaleString()})]}),e.jsx(E,{className:"h-10 w-10 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-600 text-sm font-medium uppercase tracking-wider",children:"Respondidas"}),e.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:(R=a==null?void 0:a.respondidas)==null?void 0:R.toLocaleString()})]}),e.jsx(D,{className:"h-10 w-10 text-purple-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-600 text-sm font-medium uppercase tracking-wider",children:"Pendentes"}),e.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:(J=a==null?void 0:a.pendentes)==null?void 0:J.toLocaleString()})]}),e.jsx(Z,{className:"h-10 w-10 text-red-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-gray-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium uppercase tracking-wider",children:"Finalizadas"}),e.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:(q=a==null?void 0:a.finalizadas)==null?void 0:q.toLocaleString()})]}),e.jsx($,{className:"h-10 w-10 text-gray-500"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Z,{className:"h-5 w-5 mr-2 text-red-500"}),"Peti√ß√µes Pendentes de An√°lise"]})}),e.jsx("div",{className:"p-6",children:p.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma peti√ß√£o pendente"}):e.jsx("div",{className:"space-y-4",children:p.slice(0,5).map(o=>{var U;const h=g.formatarStatus(o.status),w=g.formatarCategoria((U=o.tipo_peticao)==null?void 0:U.categoria),M=g.calcularDiasPeticao(o.criado_em);return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>y(o),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-blue-600 hover:text-blue-800",children:g.formatarNumeroPeticao(o.numero_peticao)}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:o.assunto}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"Peticion√°rio:"})," ",o.peticionario_nome]}),o.empresa_nome&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Empresa:"})," ",o.empresa_nome]}),e.jsx("div",{className:"flex items-center space-x-2 mt-2",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium bg-${w.color}-100 text-${w.color}-800`,children:[w.icon," ",w.label]})})]}),e.jsxs("div",{className:"ml-4 flex flex-col items-end",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",onClick:H=>{H.stopPropagation(),y(o)},children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium bg-${h.color}-100 text-${h.color}-800`,children:h.label})]}),e.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[M," dias"]}),M>(o.prazo_resposta||30)&&e.jsx(S,{className:"h-4 w-4 text-red-500 mt-1"})]})]})},o.id)})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(B,{className:"h-5 w-5 mr-2 text-blue-500"}),"Peti√ß√µes Recentes"]})}),e.jsx("div",{className:"p-6",children:j.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma peti√ß√£o recente"}):e.jsx("div",{className:"space-y-4",children:j.slice(0,5).map(o=>{var M;const h=g.formatarStatus(o.status),w=g.formatarCategoria((M=o.tipo_peticao)==null?void 0:M.categoria);return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>y(o),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-blue-600 hover:text-blue-800",children:g.formatarNumeroPeticao(o.numero_peticao)}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:o.assunto}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"Peticion√°rio:"})," ",o.peticionario_nome]}),e.jsx("div",{className:"flex items-center space-x-2 mt-2",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium bg-${w.color}-100 text-${w.color}-800`,children:[w.icon," ",w.label]})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(o.criado_em).toLocaleDateString("pt-BR")," √†s ",new Date(o.criado_em).toLocaleTimeString("pt-BR")]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",onClick:U=>{U.stopPropagation(),y(o)},children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium bg-${h.color}-100 text-${h.color}-800`,children:h.label})]})]})},o.id)})})})]})]})]}),A==="consultar"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[e.jsx(G,{className:"h-6 w-6 mr-2 text-blue-600"}),"Consultar Peti√ß√£o"]}),e.jsxs("form",{onSubmit:u,className:"max-w-2xl space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N√∫mero da Peti√ß√£o"}),e.jsx("input",{type:"text",value:P,onChange:o=>T(o.target.value),placeholder:"PET-2025-0000123",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPF/CNPJ do Peticion√°rio"}),e.jsx("input",{type:"text",value:f,onChange:o=>L(o.target.value),placeholder:"000.000.000-00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsx("button",{type:"submit",disabled:O,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:O?"Consultando...":"Consultar Peti√ß√£o"})]}),N&&e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(k,{className:"h-5 w-5 mr-2 text-blue-600"}),"Resultado da Consulta"]}),N.encontrada?e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-green-600",children:"‚úÖ Peti√ß√£o Encontrada"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600 mt-2",children:g.formatarNumeroPeticao(N.numero_peticao)})]}),e.jsxs("button",{onClick:()=>y(N),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Ver Detalhes"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status:"}),e.jsx("p",{className:"font-medium",children:g.formatarStatus(N.status).label})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Assunto:"}),e.jsx("p",{className:"font-medium",children:N.assunto})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Data de Envio:"}),e.jsx("p",{className:"font-medium",children:new Date(N.criado_em).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Peticion√°rio:"}),e.jsx("p",{className:"font-medium",children:N.peticionario_nome})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(S,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-red-600 mb-2",children:"Peti√ß√£o N√£o Encontrada"}),e.jsx("p",{className:"text-gray-600",children:N.erro||"Verifique os dados informados e tente novamente."})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border-l-4 border-blue-400",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Como consultar?"}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[e.jsx("p",{children:"‚Ä¢ Informe o n√∫mero da peti√ß√£o OU o CPF/CNPJ do peticion√°rio"}),e.jsx("p",{children:"‚Ä¢ O sistema ir√° mostrar o status atual e hist√≥rico da peti√ß√£o"}),e.jsx("p",{children:"‚Ä¢ Voc√™ pode acompanhar todas as etapas do processo"})]})]})})})]}),A==="nova-peticao"&&e.jsx(Y,{onSuccess:o=>{m(),c("dashboard"),setTimeout(()=>{y(o)},500)},onCancel:()=>c("dashboard")}),A==="gestao"&&e.jsx(le,{onPeticaoSelect:o=>y(o)}),I&&e.jsx(ne,{peticao:I,onClose:()=>y(null),onUpdate:o=>{m(),y(null)}})]})};export{$e as default};
