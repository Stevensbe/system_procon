import{j as t}from"./main-QkSqPps8.js";import{r as y}from"./router-C15yhWin.js";const B=({label:w,name:m,value:l,onChange:d,width:o=400,height:c=150,className:q="",required:S=!1})=>{const u=y.useRef(null),[b,v]=y.useState(!1),[j,D]=y.useState(!0);y.useEffect(()=>{const r=u.current;if(!r)return;const s=r.getContext("2d",{willReadFrequently:!0});if(r.width=o,r.height=c,s.strokeStyle="#000000",s.lineWidth=2,s.lineCap="round",s.lineJoin="round",s.fillStyle="#ffffff",s.fillRect(0,0,o,c),l){const a=new Image;a.onload=()=>{s.clearRect(0,0,o,c),s.fillStyle="#ffffff",s.fillRect(0,0,o,c),s.drawImage(a,0,0,o,c),D(!1)},a.src=l}},[o,c,l]);const E=r=>{const s=u.current,a=s.getBoundingClientRect(),g=s.width/a.width,h=s.height/a.height;return r.touches&&r.touches[0]?{x:(r.touches[0].clientX-a.left)*g,y:(r.touches[0].clientY-a.top)*h}:{x:(r.clientX-a.left)*g,y:(r.clientY-a.top)*h}},R=r=>{r.preventDefault(),v(!0);const a=u.current.getContext("2d",{willReadFrequently:!0}),{x:g,y:h}=E(r);a.beginPath(),a.moveTo(g,h)},F=r=>{if(r.preventDefault(),!b)return;const a=u.current.getContext("2d",{willReadFrequently:!0}),{x:g,y:h}=E(r);a.lineTo(g,h),a.stroke(),D(!1)},N=r=>{if(r.preventDefault(),!b)return;v(!1);const a=u.current.toDataURL("image/png");d&&m&&d(m,a)},M=()=>{const s=u.current.getContext("2d",{willReadFrequently:!0});s.clearRect(0,0,o,c),s.fillStyle="#ffffff",s.fillRect(0,0,o,c),D(!0),d&&m&&d(m,"")},T=()=>{const s=u.current.toDataURL("image/png");d&&m&&d(m,s)};return t.jsxs("div",{className:`signature-pad-container ${q}`,children:[w&&t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[w," ",S&&t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-4 bg-white",children:[t.jsx("canvas",{ref:u,className:"border border-gray-200 rounded cursor-crosshair touch-none",style:{width:"100%",maxWidth:`${o}px`,height:`${c}px`},onMouseDown:R,onMouseMove:F,onMouseUp:N,onMouseLeave:N,onTouchStart:R,onTouchMove:F,onTouchEnd:N}),t.jsxs("div",{className:"flex justify-between items-center mt-3",children:[t.jsx("div",{className:"text-xs text-gray-500",children:j?"Clique e arraste para assinar":"Assinatura capturada"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{type:"button",onClick:M,className:"px-3 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Limpar"}),t.jsx("button",{type:"button",onClick:T,className:"px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Salvar"})]})]})]}),l&&t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Preview da assinatura:"}),t.jsx("img",{src:l,alt:"Assinatura",className:"border border-gray-200 rounded max-w-xs h-auto"})]})]})},U=({label:w,name:m,accept:l="*/*",multiple:d=!1,maxSize:o=10,onFilesChange:c,existingFiles:q=[],className:S=""})=>{const[u,b]=y.useState(!1),[v,j]=y.useState(q),[D,E]=y.useState({}),R=y.useRef(null),F=e=>{if(e===0)return"0 Bytes";const n=1024,x=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,f)).toFixed(2))+" "+x[f]},N=e=>{if(e.size>o*1024*1024)return`Arquivo muito grande. Máximo: ${o}MB`;if(l!=="*/*"){const n=l.split(",").map(p=>p.trim()),x="."+e.name.split(".").pop().toLowerCase(),f=e.type;if(!n.some(p=>p.includes("*")?f.startsWith(p.replace("*","")):p===f||p===x))return`Tipo de arquivo não permitido. Aceitos: ${l}`}return null},M=e=>{const n=Array.from(e),x=[],f=[];if(n.forEach(i=>{const p=N(i);if(p)f.push(`${i.name}: ${p}`);else{if(i.type.startsWith("image/")){const $=new FileReader;$.onload=P=>{i.preview=P.target.result,j(A=>[...A])},$.readAsDataURL(i)}x.push({file:i,id:Date.now()+Math.random(),name:i.name,size:i.size,type:i.type,preview:null})}}),f.length>0&&alert(`Erros encontrados:
`+f.join(`
`)),x.length>0){const i=d?[...v,...x]:x;j(i),c(m,i)}},T=e=>{const n=v.filter(x=>x.id!==e);j(n),c(m,n)},r=e=>{e.preventDefault(),e.stopPropagation(),b(!0)},s=e=>{e.preventDefault(),e.stopPropagation(),b(!1)},a=e=>{e.preventDefault(),e.stopPropagation()},g=e=>{e.preventDefault(),e.stopPropagation(),b(!1);const n=e.dataTransfer.files;n&&M(n)},h=e=>{const n=e.target.files;n&&M(n)},L=e=>e.startsWith("image/")?"🖼️":e.includes("pdf")?"📄":e.includes("doc")?"📝":e.includes("excel")||e.includes("spreadsheet")?"📊":e.startsWith("video/")?"🎥":e.startsWith("audio/")?"🎵":"📎";return t.jsxs("div",{className:`file-upload-container ${S}`,children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:w}),t.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ${u?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:r,onDragLeave:s,onDragOver:a,onDrop:g,children:[t.jsx("input",{ref:R,type:"file",accept:l,multiple:d,onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-4xl",children:"📁"}),t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-medium text-blue-600 hover:text-blue-500 cursor-pointer",children:"Clique para selecionar"})," ou arraste arquivos aqui"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[l!=="*/*"&&`Tipos aceitos: ${l}`,o&&` • Tamanho máximo: ${o}MB`,d&&" • Múltiplos arquivos permitidos"]})]})]}),v.length>0&&t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["Arquivos selecionados (",v.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:v.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[t.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[t.jsx("div",{className:"text-2xl",children:L(e.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),t.jsx("div",{className:"text-xs text-gray-500",children:F(e.size)})]}),e.preview&&t.jsx("div",{className:"w-10 h-10 rounded border overflow-hidden",children:t.jsx("img",{src:e.preview,alt:"Preview",className:"w-full h-full object-cover"})})]}),t.jsx("button",{type:"button",onClick:()=>T(e.id),className:"ml-3 text-red-500 hover:text-red-700 text-lg font-bold",title:"Remover arquivo",children:"×"})]},e.id))})]}),t.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"💡 Dica: Você pode arrastar e soltar arquivos diretamente na área acima"})]})};export{U as F,B as S};
