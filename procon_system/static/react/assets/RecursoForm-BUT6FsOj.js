import{j as e}from"./main-QkSqPps8.js";import{u as _,e as F,r as l}from"./router-C15yhWin.js";import{r as d}from"./recursosDefesasService-DZNXFWoi.js";import{n as c}from"./index-CsOmCsbp.js";import{L as b}from"./LoadingSpinner-CioJYzaJ.js";import{F as I}from"./ArrowLeftIcon-B1Aara0h.js";import{F as q}from"./XMarkIcon-C8R2LFm1.js";import{F as k}from"./DocumentCheckIcon-CEHDhKx0.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";const J=()=>{const i=_(),{id:n}=F(),[g,u]=l.useState(!1),[x,f]=l.useState(!1),[h,v]=l.useState([]),[y,j]=l.useState([]),[s,m]=l.useState({numero:"",tipo:"",processo:"",requerente:"",advogado:"",data_apresentacao:"",prazo_resposta:"",fundamentacao:"",pedidos:"",documentos_anexos:[],status:"PENDENTE",observacoes:""}),N=[{value:"RECURSO_ADMINISTRATIVO",label:"Recurso Administrativo"},{value:"RECURSO_ESPECIAL",label:"Recurso Especial"},{value:"RECURSO_ORDINARIO",label:"Recurso Ordinário"},{value:"DEFESA_PREVIA",label:"Defesa Prévia"},{value:"DEFESA_FINAL",label:"Defesa Final"},{value:"RECONSIDERACAO",label:"Pedido de Reconsideração"}],R=[{value:"PENDENTE",label:"Pendente",color:"text-yellow-600"},{value:"EM_ANALISE",label:"Em Análise",color:"text-blue-600"},{value:"DEFERIDO",label:"Deferido",color:"text-green-600"},{value:"INDEFERIDO",label:"Indeferido",color:"text-red-600"},{value:"ARQUIVADO",label:"Arquivado",color:"text-gray-600"}];l.useEffect(()=>{E(),n&&w()},[n]);const E=async()=>{try{u(!0);const r=await d.listarProcessos();v(r);const a=await d.listarAdvogados();j(a)}catch(r){console.error("Erro ao carregar dados iniciais:",r),c.error("Erro ao carregar dados iniciais")}finally{u(!1)}},w=async()=>{try{u(!0);const r=await d.obterRecurso(n);m(r)}catch(r){console.error("Erro ao carregar recurso:",r),c.error("Erro ao carregar recurso"),i("/recursos-defesas")}finally{u(!1)}},o=r=>{const{name:a,value:t}=r.target;m(p=>({...p,[a]:t}))},D=r=>{const a=Array.from(r.target.files);m(t=>({...t,documentos_anexos:[...t.documentos_anexos,...a]}))},A=r=>{m(a=>({...a,documentos_anexos:a.documentos_anexos.filter((t,p)=>p!==r)}))},C=()=>{const r=[];return s.numero.trim()||r.push("Número do recurso é obrigatório"),s.tipo||r.push("Tipo de recurso é obrigatório"),s.processo||r.push("Processo é obrigatório"),s.requerente.trim()||r.push("Requerente é obrigatório"),s.advogado||r.push("Advogado é obrigatório"),s.data_apresentacao||r.push("Data de apresentação é obrigatória"),s.fundamentacao.trim()||r.push("Fundamentação é obrigatória"),s.pedidos.trim()||r.push("Pedidos são obrigatórios"),r},S=async r=>{r.preventDefault();const a=C();if(a.length>0){a.forEach(t=>c.error(t));return}try{f(!0),n?(await d.atualizarRecurso(n,s),c.success("Recurso atualizado com sucesso!")):(await d.criarRecurso(s),c.success("Recurso criado com sucesso!")),i("/recursos-defesas")}catch(t){console.error("Erro ao salvar recurso:",t),c.error("Erro ao salvar recurso")}finally{f(!1)}};return g?e.jsx(b,{}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>i("/recursos-defesas"),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n?"Editar Recurso/Defesa":"Novo Recurso/Defesa"}),e.jsx("p",{className:"text-gray-600",children:n?"Edite os dados do recurso/defesa":"Crie um novo recurso ou defesa"})]})]})})}),e.jsxs("form",{onSubmit:S,className:"bg-white shadow-lg rounded-lg p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número do Recurso *"}),e.jsx("input",{type:"text",name:"numero",value:s.numero,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: REC-2025-001",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Recurso/Defesa *"}),e.jsxs("select",{name:"tipo",value:s.tipo,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Selecione o tipo"}),N.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Processo *"}),e.jsxs("select",{name:"processo",value:s.processo,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um processo"}),h.map(r=>e.jsxs("option",{value:r.id,children:[r.numero," - ",r.titulo]},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("select",{name:"status",value:s.status,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:R.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requerente *"}),e.jsx("input",{type:"text",name:"requerente",value:s.requerente,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do requerente",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Advogado *"}),e.jsxs("select",{name:"advogado",value:s.advogado,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um advogado"}),y.map(r=>e.jsxs("option",{value:r.id,children:[r.nome," - OAB: ",r.oab]},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Apresentação *"}),e.jsx("input",{type:"date",name:"data_apresentacao",value:s.data_apresentacao,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prazo para Resposta"}),e.jsx("input",{type:"date",name:"prazo_resposta",value:s.prazo_resposta,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fundamentação Jurídica *"}),e.jsx("textarea",{name:"fundamentacao",value:s.fundamentacao,onChange:o,rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descreva a fundamentação jurídica do recurso/defesa",required:!0})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pedidos *"}),e.jsx("textarea",{name:"pedidos",value:s.pedidos,onChange:o,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descreva os pedidos do recurso/defesa",required:!0})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),e.jsx("textarea",{name:"observacoes",value:s.observacoes,onChange:o,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observações adicionais"})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Documentos Anexos"}),e.jsx("input",{type:"file",multiple:!0,onChange:D,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"}),s.documentos_anexos.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:s.documentos_anexos.map((r,a)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-700",children:r.name}),e.jsx("button",{type:"button",onClick:()=>A(a),className:"text-red-500 hover:text-red-700",children:e.jsx(q,{className:"h-4 w-4"})})]},a))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>i("/recursos-defesas"),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[x?e.jsx(b,{size:"sm"}):e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:x?"Salvando...":"Salvar Recurso"})]})]})]})]})})};export{J as default};
