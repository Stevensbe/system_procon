import{j as e,c as j,e as u}from"./main-DVdFXPbZ.js";import{e as f,u as N,r as o,L as i}from"./router-C15yhWin.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";function w(){const{id:t}=f(),m=N(),[a,h]=o.useState(null),[c,d]=o.useState(!0),[l,n]=o.useState("");o.useEffect(()=>{(async()=>{try{const s=await j(t);h(s)}catch(s){n(s.message||"Erro ao carregar detalhes.")}finally{d(!1)}})()},[t]);const x=async()=>{if(window.confirm(`Você tem certeza que deseja deletar o Auto de Banco No ${a.numero}? Esta ação não pode ser desfeita.`)){d(!0);try{await u(t),alert("Auto de Banco deletado com sucesso!"),m("/fiscalizacao/bancos")}catch(s){n(s.message||"Falha ao deletar o auto."),d(!1)}}},p=`http://localhost:8000/api/bancos/${t}/gerar-documento/`;return c?e.jsx("div",{className:"p-8",children:"Carregando..."}):l?e.jsx("div",{className:"p-8 text-red-500",children:l}):a?e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Detalhes do Auto de Banco"}),e.jsxs("p",{className:"text-gray-600",children:["Número: ",a.numero]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Informações do Auto"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Número:"}),e.jsx("p",{children:a.numero})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Razão Social:"}),e.jsx("p",{children:a.razao_social})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Nome Fantasia:"}),e.jsx("p",{children:a.nome_fantasia||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"CNPJ:"}),e.jsx("p",{children:a.cnpj})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Data da Fiscalização:"}),e.jsx("p",{children:new Date(a.data_fiscalizacao+"T00:00:00").toLocaleDateString("pt-BR")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Hora da Fiscalização:"}),e.jsx("p",{children:a.hora_fiscalizacao})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Endereço:"}),e.jsx("p",{children:a.endereco})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Município/UF:"}),e.jsxs("p",{children:[a.municipio,"/",a.estado]})]})]}),a.observacoes&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-medium",children:"Observações:"}),e.jsx("p",{className:"whitespace-pre-wrap",children:a.observacoes})]})]}),a.atendimentos_caixa&&a.atendimentos_caixa.length>0&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Atendimentos de Caixa"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Senha"}),e.jsx("th",{className:"text-left py-2",children:"Chegada"}),e.jsx("th",{className:"text-left py-2",children:"Atendimento"}),e.jsx("th",{className:"text-left py-2",children:"Tempo de Espera"})]})}),e.jsx("tbody",{children:a.atendimentos_caixa.map((r,s)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2",children:r.letra_senha}),e.jsx("td",{className:"py-2",children:r.horario_chegada}),e.jsx("td",{className:"py-2",children:r.horario_atendimento}),e.jsx("td",{className:"py-2",children:r.tempo_espera_formatado})]},s))})]})]}),e.jsxs("div",{className:"flex gap-4 mt-8 pt-4 border-t",children:[e.jsx(i,{to:"/fiscalizacao/bancos",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"← Voltar para a Lista"}),e.jsx(i,{to:`/fiscalizacao/bancos/${t}/editar`,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"✏️ Editar"}),e.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Gerar Documento (.docx)"}),e.jsx(i,{to:"/fiscalizacao/infracoes/novo",state:{autoConstatacao:a},className:"px-4 py-2 bg-red-700 text-white rounded hover:bg-red-800 font-bold",children:"⚖️ Gerar Infração"}),e.jsx("button",{onClick:x,disabled:c,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:bg-gray-400 ml-auto",children:c?"Deletando...":"Deletar"})]})]}):e.jsx("div",{className:"p-8",children:"Auto não encontrado."})}export{w as default};
