import{z as y,j as e,A as _}from"./main-CRMJS0Wv.js";import{a as w,u as L,r as d,L as c}from"./router-Cgdj9vyr.js";import"./vendor-Csw2ODfV.js";import"./icons-qiKTog5F.js";function E(){const{id:l}=w(),g=L(),[a,u]=d.useState(null),[h,m]=d.useState(!0),[x,p]=d.useState(""),[f,n]=d.useState(!1);d.useEffect(()=>{j()},[l]);const j=async()=>{try{m(!0);const r=await y(l);u(r)}catch(r){console.error("‚ùå Erro ao carregar auto:",r),p("Erro ao carregar auto de infra√ß√£o")}finally{m(!1)}},b=async()=>{try{await _(l),alert("Auto de infra√ß√£o exclu√≠do com sucesso!"),g("/fiscalizacao/infracoes")}catch(r){console.error("‚ùå Erro ao excluir auto:",r),alert("Erro ao excluir auto de infra√ß√£o")}n(!1)},v=r=>({autuado:"bg-red-100 text-red-800 border-red-200",notificado:"bg-orange-100 text-orange-800 border-orange-200",em_defesa:"bg-blue-100 text-blue-800 border-blue-200",julgado:"bg-purple-100 text-purple-800 border-purple-200",pago:"bg-green-100 text-green-800 border-green-200",cancelado:"bg-gray-100 text-gray-800 border-gray-200"})[r]||"bg-gray-100 text-gray-800 border-gray-200",N=r=>({autuado:"Autuado",notificado:"Notificado",em_defesa:"Em Defesa",julgado:"Julgado",pago:"Pago",cancelado:"Cancelado"})[r]||r,s=(r,o,i="")=>e.jsxs("div",{className:`bg-gray-50 p-4 rounded-lg ${i}`,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:r}),e.jsx("p",{className:"text-gray-900",children:o||"-"})]}),t=(r,o,i=null)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mb-6",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[i&&e.jsx("span",{className:"mr-2",children:i}),r]})}),e.jsx("div",{className:"p-6",children:o})]});return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando auto de infra√ß√£o..."})]})}):x||!a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Erro ao carregar"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:x}),e.jsx("div",{className:"mt-6",children:e.jsx(c,{to:"/fiscalizacao/infracoes",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Voltar para Lista"})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white shadow-sm rounded-lg mb-6",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Auto de Infra√ß√£o ",a.numero]}),e.jsx("p",{className:"text-gray-600 mt-1",children:a.razao_social}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full border ${v(a.status)}`,children:N(a.status)})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("a",{href:`/api/infracoes/${a.id}/documento/`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Gerar Documento"]}),e.jsxs(c,{to:`/fiscalizacao/infracoes/${a.id}/editar`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar"]}),e.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Excluir"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx(c,{to:"/fiscalizacao/infracoes",className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"‚Üê Voltar para Lista de Infra√ß√µes"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t("Dados B√°sicos",e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s("Data da Fiscaliza√ß√£o",new Date(a.data_fiscalizacao).toLocaleDateString("pt-BR")),s("Hora da Fiscaliza√ß√£o",a.hora_fiscalizacao),s("Munic√≠pio",a.municipio),s("Estado",a.estado)]}),"üìÖ"),t("Estabelecimento Fiscalizado",e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s("Raz√£o Social",a.razao_social),s("Nome Fantasia",a.nome_fantasia),s("CNPJ",a.cnpj),s("Telefone",a.telefone)]}),s("Atividade",a.atividade),s("Endere√ßo",a.endereco)]}),"üè¢"),(a.parecer_numero||a.parecer_origem)&&t("Parecer Pr√©vio",e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s("N√∫mero do Parecer",a.parecer_numero),s("Origem",a.parecer_origem)]}),"üìã"),t("Relat√≥rio da Fiscaliza√ß√£o",e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:a.relatorio})}),"üìù"),t("Base Legal",e.jsxs("div",{className:"space-y-4",children:[a.base_legal_cdc&&s("C√≥digo de Defesa do Consumidor",a.base_legal_cdc),a.base_legal_outras&&s("Outras Bases Legais",a.base_legal_outras)]}),"‚öñÔ∏è"),t("Infra√ß√µes Constatadas",e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Artigos do CDC"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[a.infracao_art_34&&e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:"Art. 34"}),a.infracao_art_35&&e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:"Art. 35"}),a.infracao_art_36&&e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:"Art. 36"}),a.infracao_art_55&&e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:"Art. 55"}),a.infracao_art_56&&e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:"Art. 56"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Outras Infra√ß√µes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[a.infracao_publicidade_enganosa&&e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:"Publicidade Enganosa"}),a.infracao_precos_abusivos&&e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:"Pre√ßos Abusivos"}),a.infracao_produtos_vencidos&&e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:"Produtos Vencidos"}),a.infracao_falta_informacao&&e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:"Falta de Informa√ß√£o"})]})]}),a.outras_infracoes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Infra√ß√µes Espec√≠ficas"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded",children:a.outras_infracoes})]})]}),"üö´"),(a.fundamentacao_tecnica||a.fundamentacao_juridica)&&t("Fundamenta√ß√£o",e.jsxs("div",{className:"space-y-4",children:[a.fundamentacao_tecnica&&s("Fundamenta√ß√£o T√©cnica",a.fundamentacao_tecnica),a.fundamentacao_juridica&&s("Fundamenta√ß√£o Jur√≠dica",a.fundamentacao_juridica)]}),"üìñ"),t("Respons√°veis",e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Autoridade Fiscalizadora"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s("Nome",a.fiscal_nome),s("Cargo",a.fiscal_cargo)]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Estabelecimento Fiscalizado"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s("Respons√°vel",a.responsavel_nome),s("CPF",a.responsavel_cpf),s("Fun√ß√£o",a.responsavel_funcao)]}),a.estabelecimento_responsavel&&s("Respons√°vel Legal",a.estabelecimento_responsavel)]})]}),"üë•"),(a.assinatura_fiscal||a.assinatura_responsavel)&&t("Assinaturas",e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.assinatura_fiscal&&e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Autoridade Fiscalizadora"}),e.jsx("img",{src:a.assinatura_fiscal,alt:"Assinatura do Fiscal",className:"border border-gray-300 rounded max-h-32 mx-auto"})]}),a.assinatura_responsavel&&e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Respons√°vel do Estabelecimento"}),e.jsx("img",{src:a.assinatura_responsavel,alt:"Assinatura do Respons√°vel",className:"border border-gray-300 rounded max-h-32 mx-auto"})]})]}),"‚úçÔ∏è"),a.observacoes&&t("Observa√ß√µes",e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:a.observacoes})}),"üìÑ")]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"üí∞ Penalidade"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Valor da Multa"}),e.jsx("p",{className:"text-2xl font-bold text-red-800",children:a.valor_multa_formatado||`R$ ${parseFloat(a.valor_multa||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`})]}),a.data_notificacao&&s("Data de Notifica√ß√£o",new Date(a.data_notificacao).toLocaleDateString("pt-BR")),a.data_vencimento&&s("Data de Vencimento",new Date(a.data_vencimento).toLocaleDateString("pt-BR"))]})]}),a.possui_anexo&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"üìé Anexos"}),e.jsxs("div",{className:"space-y-2",children:[a.descricao_anexo&&e.jsx("p",{className:"text-sm text-gray-600",children:a.descricao_anexo}),e.jsx("p",{className:"text-xs text-gray-500",children:"Anexos dispon√≠veis no sistema"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"‚ÑπÔ∏è Informa√ß√µes do Sistema"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Criado em:"}),e.jsx("p",{className:"text-gray-900",children:new Date(a.criado_em).toLocaleString("pt-BR")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"√öltima atualiza√ß√£o:"}),e.jsx("p",{className:"text-gray-900",children:new Date(a.atualizado_em).toLocaleString("pt-BR")})]})]})]})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-2",children:"Confirmar Exclus√£o"}),e.jsx("div",{className:"mt-2 px-7 py-3",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Tem certeza que deseja excluir o Auto de Infra√ß√£o ",a.numero,"? Esta a√ß√£o n√£o pode ser desfeita."]})}),e.jsx("div",{className:"items-center px-4 py-3",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300 flex-1",children:"Cancelar"}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-300 flex-1",children:"Excluir"})]})})]})})})]})})}export{E as default};
