import{j as e}from"./main-BlGnCLHT.js";import{r,L as n}from"./router-C15yhWin.js";import{r as i}from"./recursosDefesasService-ChrvZDcY.js";import{n as g}from"./index-CsOmCsbp.js";import{F as B}from"./ArrowPathIcon-DvGuXmm8.js";import{F as U}from"./PlusIcon-DZYmRjce.js";import{F as K}from"./DocumentTextIcon-o9njoXYt.js";import{F as V}from"./ClockIcon-CbdR_WDb.js";import{F as q}from"./CheckCircleIcon-B-MrGrlS.js";import{F as G}from"./ExclamationTriangleIcon-Y0luX6t1.js";import{R as x,P as X,b as Y,c as z,T as m,B as H,C as f,X as j,Y as N,d as J,A as Q,a as W}from"./charts-BhhE3E4a.js";import{F as Z}from"./FunnelIcon-PU3yDtaQ.js";import{F as y}from"./UserIcon-Crv8uqGG.js";import{F as b}from"./EyeIcon-Cu0Wnbis.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";const ge=()=>{const[d,w]=r.useState({total_recursos:0,recursos_pendentes:0,recursos_deferidos:0,recursos_indeferidos:0,recursos_hoje:0,recursos_semana:0,recursos_mes:0,tempo_medio_tramitacao:0}),[v,h]=r.useState([]),[R,A]=r.useState([]),[u,_]=r.useState([]),[F,E]=r.useState([]),[T,k]=r.useState([]),[D,c]=r.useState(!0),[a,l]=r.useState({tipo:"",status:"",advogado:"",data_inicio:"",data_fim:""});r.useEffect(()=>{o()},[]);const o=async()=>{try{c(!0);const s=await i.obterEstatisticas();w(s);const t=await i.obterRecursosRecentes();h(t);const L=await i.obterAdvogadosTop();A(L);const $=await i.obterRecursosPorTipo();_($);const P=await i.obterRecursosPorStatus();E(P);const M=await i.obterTendenciaMensal();k(M)}catch(s){console.error("Erro ao carregar dados de recursos e defesas:",s),g.error("Erro ao carregar dados de recursos e defesas")}finally{c(!1)}},S=async()=>{try{c(!0);const s=await i.filtrarRecursos(a);h(s)}catch(s){console.error("Erro ao aplicar filtros:",s),g.error("Erro ao aplicar filtros")}finally{c(!1)}},I=()=>{l({tipo:"",status:"",advogado:"",data_inicio:"",data_fim:""}),o()},C=s=>{switch(s){case"MULTA":return"#ef4444";case"AUTO_INFRACAO":return"#f59e0b";case"DECISAO_ADMINISTRATIVA":return"#3b82f6";case"OUTROS":return"#6b7280";default:return"#6b7280"}},p=s=>new Date(s).toLocaleString("pt-BR"),O=s=>s?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s):"N/A";return D?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Recursos e Defesas"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sistema de gestão de recursos administrativos e defesas"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:o,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Atualizar"]}),e.jsxs(n,{to:"/recursos-defesas/novo",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Novo Recurso"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(K,{className:"h-6 w-6 text-blue-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total de Recursos"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:d.total_recursos.toLocaleString()})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(V,{className:"h-6 w-6 text-yellow-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pendentes"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:d.recursos_pendentes.toLocaleString()})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(q,{className:"h-6 w-6 text-green-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Deferidos"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:d.recursos_deferidos.toLocaleString()})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(G,{className:"h-6 w-6 text-red-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Indeferidos"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:d.recursos_indeferidos.toLocaleString()})]})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recursos por Tipo"}),e.jsx(x,{width:"100%",height:300,children:e.jsxs(X,{children:[e.jsx(Y,{data:u,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:t})=>`${s} ${(t*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:u.map((s,t)=>e.jsx(z,{fill:C(s.tipo)},`cell-${t}`))}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recursos por Status"}),e.jsx(x,{width:"100%",height:300,children:e.jsxs(H,{data:F,children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"status"}),e.jsx(N,{}),e.jsx(m,{}),e.jsx(J,{dataKey:"count",fill:"#3b82f6"})]})})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tendência de Recursos Mensal"}),e.jsx(x,{width:"100%",height:300,children:e.jsxs(Q,{data:T,children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"mes"}),e.jsx(N,{}),e.jsx(m,{}),e.jsx(W,{type:"monotone",dataKey:"recursos",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Filtros Avançados"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Recurso"}),e.jsxs("select",{value:a.tipo,onChange:s=>l({...a,tipo:s.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"MULTA",children:"Multa"}),e.jsx("option",{value:"AUTO_INFRACAO",children:"Auto de Infração"}),e.jsx("option",{value:"DECISAO_ADMINISTRATIVA",children:"Decisão Administrativa"}),e.jsx("option",{value:"OUTROS",children:"Outros"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:a.status,onChange:s=>l({...a,status:s.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"PENDENTE",children:"Pendente"}),e.jsx("option",{value:"EM_ANALISE",children:"Em Análise"}),e.jsx("option",{value:"DEFERIDO",children:"Deferido"}),e.jsx("option",{value:"INDEFERIDO",children:"Indeferido"}),e.jsx("option",{value:"PARCIALMENTE_DEFERIDO",children:"Parcialmente Deferido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advogado"}),e.jsx("input",{type:"text",value:a.advogado,onChange:s=>l({...a,advogado:s.target.value}),placeholder:"Nome do advogado",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Início"}),e.jsx("input",{type:"date",value:a.data_inicio,onChange:s=>l({...a,data_inicio:s.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:a.data_fim,onChange:s=>l({...a,data_fim:s.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsx("button",{onClick:I,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Limpar Filtros"}),e.jsxs("button",{onClick:S,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Aplicar Filtros"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Top Advogados"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ranking"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Advogado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OAB"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recursos"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taxa Sucesso"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Último Recurso"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ${t===0?"bg-yellow-100 text-yellow-800":t===1?"bg-gray-100 text-gray-800":t===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:t+1})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.nome}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.numero_oab}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.total_recursos}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${s.taxa_sucesso}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[s.taxa_sucesso,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p(s.ultimo_recurso)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(n,{to:`/recursos-defesas/advogado/${s.id}`,className:"text-blue-600 hover:text-blue-900",children:e.jsx(b,{className:"h-4 w-4"})})})]},s.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recursos Recentes"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Número"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requerente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Advogado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.numero})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(GavelIcon,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.get_tipo_display})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.requerente_nome}),e.jsx("div",{className:"text-sm text-gray-500",children:s.requerente_documento})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-900",children:((t=s.advogado)==null?void 0:t.nome)||"Não informado"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O(s.valor)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.status==="PENDENTE"?"bg-yellow-100 text-yellow-800":s.status==="EM_ANALISE"?"bg-blue-100 text-blue-800":s.status==="DEFERIDO"?"bg-green-100 text-green-800":s.status==="INDEFERIDO"?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"}`,children:s.get_status_display})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p(s.data_protocolo)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(n,{to:`/recursos-defesas/${s.id}`,className:"text-blue-600 hover:text-blue-900 mr-3",children:e.jsx(b,{className:"h-4 w-4"})})})]},s.id)})})]})})]})]})};export{ge as default};
