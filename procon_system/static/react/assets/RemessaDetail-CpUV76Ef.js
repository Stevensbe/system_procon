import{j as e,L as D}from"./main-QkSqPps8.js";import{e as $,u as k,r as n}from"./router-C15yhWin.js";import{c as h}from"./cobrancaService-y4NTKzV9.js";import{f as r,a as S}from"./formatters-Ck8j3q9a.js";import{n as t}from"./index-CsOmCsbp.js";import{F as p}from"./ExclamationTriangleIcon-Y0luX6t1.js";import{F as N}from"./ArrowLeftIcon-B1Aara0h.js";import{F as d}from"./DocumentArrowDownIcon-Bp61FGwk.js";import{F as i}from"./DocumentArrowUpIcon-DBsAc1ml.js";import{F as f}from"./BanknotesIcon-esZP9Qph.js";import{F as y}from"./ArrowDownTrayIcon-ClXVXjsb.js";import{F as b}from"./ClockIcon-CbdR_WDb.js";import{F as P}from"./XCircleIcon-BTR4Rsg8.js";import{F as A}from"./CheckCircleIcon-B-MrGrlS.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";const Y=()=>{var j,u;const{id:c}=$(),m=k(),[s,v]=n.useState(null),[w,g]=n.useState(!0),[o,l]=n.useState(!1);n.useEffect(()=>{x()},[c]);const x=async()=>{try{g(!0);const a=await h.getRemessa(c);v(a)}catch(a){console.error("Erro ao carregar remessa:",a),t.error("Erro ao carregar remessa"),m("/cobranca/remessas")}finally{g(!1)}},R=async()=>{try{l(!0),await h.gerarRemessa(c),t.success("Remessa gerada com sucesso!"),x()}catch(a){console.error("Erro ao gerar remessa:",a),t.error("Erro ao gerar remessa")}finally{l(!1)}},_=async()=>{try{l(!0),await h.processarRetorno(c),t.success("Retorno processado com sucesso!"),x()}catch(a){console.error("Erro ao processar retorno:",a),t.error("Erro ao processar retorno")}finally{l(!1)}},q=()=>{if(s!=null&&s.arquivo_remessa){const a=document.createElement("a");a.href=s.arquivo_remessa,a.download=`remessa_${s.numero}.rem`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},F=()=>{if(s!=null&&s.arquivo_retorno){const a=document.createElement("a");a.href=s.arquivo_retorno,a.download=`retorno_${s.numero}.ret`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},C=a=>{switch(a==null?void 0:a.toLowerCase()){case"pendente":return"text-yellow-600 bg-yellow-100";case"gerado":return"text-blue-600 bg-blue-100";case"enviado":return"text-purple-600 bg-purple-100";case"processado":return"text-green-600 bg-green-100";case"erro":return"text-red-600 bg-red-100";case"cancelado":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},E=a=>{switch(a==null?void 0:a.toLowerCase()){case"pendente":return e.jsx(b,{className:"w-5 h-5"});case"gerado":return e.jsx(d,{className:"w-5 h-5"});case"enviado":return e.jsx(i,{className:"w-5 h-5"});case"processado":return e.jsx(A,{className:"w-5 h-5"});case"erro":return e.jsx(p,{className:"w-5 h-5"});case"cancelado":return e.jsx(P,{className:"w-5 h-5"});default:return e.jsx(b,{className:"w-5 h-5"})}};return w?e.jsx(D,{}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>m("/cobranca/remessas"),className:"text-gray-600 hover:text-gray-900",children:e.jsx(N,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Remessa ",s.numero]}),e.jsx("p",{className:"text-gray-600",children:"Detalhes da remessa bancária"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[s.status==="pendente"&&e.jsxs("button",{onClick:R,disabled:o,className:"btn-primary",children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),o?"Gerando...":"Gerar Remessa"]}),s.status==="enviado"&&e.jsxs("button",{onClick:_,disabled:o,className:"btn-secondary",children:[e.jsx(i,{className:"w-4 h-4 mr-2"}),o?"Processando...":"Processar Retorno"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${C(s.status)}`,children:[E(s.status),e.jsx("span",{className:"ml-2",children:s.status})]})}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Criado em ",r(s.criado_em)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dados da Remessa"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Número"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.numero})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tipo"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.tipo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Banco"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[(j=s.banco)==null?void 0:j.nome," (",(u=s.banco)==null?void 0:u.codigo,")"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Sequencial"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.sequencial})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estatísticas"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"w-5 h-5 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Quantidade de Boletos"})]}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:s.quantidade_boletos})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"w-5 h-5 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Valor Total"})]}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:S(s.valor_total)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Datas"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Data de Geração"}),e.jsx("p",{className:"text-sm text-gray-900",children:r(s.data_geracao)})]}),s.data_envio&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Data de Envio"}),e.jsx("p",{className:"text-sm text-gray-900",children:r(s.data_envio)})]}),s.data_processamento&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Data de Processamento"}),e.jsx("p",{className:"text-sm text-gray-900",children:r(s.data_processamento)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Arquivo de Remessa"}),s.arquivo_remessa?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.arquivo_remessa.split("/").pop()}),e.jsx("p",{className:"text-sm text-gray-500",children:"Arquivo CNAB gerado"})]})]}),e.jsxs("button",{onClick:q,className:"btn-secondary",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Download"]})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(d,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhum arquivo gerado"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"O arquivo de remessa ainda não foi gerado."})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Arquivo de Retorno"}),s.arquivo_retorno?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.arquivo_retorno.split("/").pop()}),e.jsx("p",{className:"text-sm text-gray-500",children:"Arquivo de retorno processado"})]})]}),e.jsxs("button",{onClick:F,className:"btn-secondary",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Download"]})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(i,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhum retorno"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"O arquivo de retorno ainda não foi processado."})]})]})]}),s.observacoes&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Observações"}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:s.observacoes})]}),s.erro_processamento&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-4",children:"Erro de Processamento"}),e.jsx("p",{className:"text-sm text-red-700 whitespace-pre-wrap",children:s.erro_processamento})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações do Sistema"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Criado por:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:s.criado_por||"Sistema"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Última atualização:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r(s.atualizado_em)})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(p,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Remessa não encontrada"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"A remessa solicitada não foi encontrada ou não existe."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>m("/cobranca/remessas"),className:"btn-primary",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Voltar para Remessas"]})})]})};export{Y as default};
