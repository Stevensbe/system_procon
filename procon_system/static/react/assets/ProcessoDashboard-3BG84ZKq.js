import{D as b,E as N,j as e}from"./main-BZolao6g.js";import{r as t,L as d}from"./router-Cgdj9vyr.js";import"./vendor-Csw2ODfV.js";import"./icons-qiKTog5F.js";function _(){var n,x,m;const[r,h]=t.useState({total_processos:0,por_status:{},por_prioridade:{},prazos_vencidos:0,valor_total_multas:0,processos_recentes:[],alertas:[]}),[p,i]=t.useState(!0),[o,g]=t.useState("");t.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0);const[s,a]=await Promise.all([b(),N()]);h({...s,...a})}catch(s){console.error("❌ Erro ao carregar dashboard:",s),g("Erro ao carregar dashboard de processos")}finally{i(!1)}},l=s=>({aguardando_defesa:"bg-yellow-500",defesa_apresentada:"bg-blue-500",em_analise:"bg-purple-500",aguardando_recurso:"bg-orange-500",recurso_apresentado:"bg-indigo-500",julgamento:"bg-red-500",finalizado_procedente:"bg-green-500",finalizado_improcedente:"bg-gray-500",arquivado:"bg-gray-400",prescrito:"bg-red-400"})[s]||"bg-gray-400",u=s=>({urgente:"text-red-600 bg-red-100",alta:"text-orange-600 bg-orange-100",normal:"text-gray-600 bg-gray-100",baixa:"text-green-600 bg-green-100"})[s]||"text-gray-600 bg-gray-100",j=s=>s?`R$ ${parseFloat(s).toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"R$ 0,00";return p?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando dashboard..."})]})}):o?e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:o})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard de Processos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Visão geral dos processos administrativos"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(d,{to:"/processos",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Ver Todos os Processos"]}),e.jsxs("button",{onClick:c,className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Atualizar"]})]})]})}),r.alertas&&r.alertas.length>0&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-6 w-6 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Alertas Importantes"})]}),e.jsx("div",{className:"mt-2 space-y-1",children:r.alertas.map((s,a)=>e.jsxs("p",{className:"text-sm text-red-700",children:["• ",s]},a))})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total de Processos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.total_processos})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Prazos Vencidos"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:r.prazos_vencidos})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Valor Total"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:j(r.valor_total_multas)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Em Andamento"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:r.total_processos-(((n=r.por_status)==null?void 0:n.finalizado_procedente)||0)-(((x=r.por_status)==null?void 0:x.finalizado_improcedente)||0)-(((m=r.por_status)==null?void 0:m.arquivado)||0)})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Processos por Status"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.por_status||{}).map(([s,a])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${l(s)} mr-3`}),e.jsx("span",{className:"text-sm text-gray-700 capitalize",children:s.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${l(s)}`,style:{width:`${a/r.total_processos*100}%`}})})]})]},s))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Processos por Prioridade"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.por_prioridade||{}).map(([s,a])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(s)}`,children:s.charAt(0).toUpperCase()+s.slice(1)})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(a/r.total_processos*100).toFixed(1),"%)"]})]})]},s))})]})]}),r.processos_recentes&&r.processos_recentes.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Processos Recentes"}),e.jsx(d,{to:"/processos",className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Ver Todos →"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Processo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Empresa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Criado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.processos_recentes.slice(0,5).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.numero_processo})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.autuado}),e.jsx("div",{className:"text-sm text-gray-500",children:s.cnpj})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full text-white ${l(s.status)}`,children:s.status_display||s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.criado_em).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(d,{to:`/processos/${s.id}`,className:"text-blue-600 hover:text-blue-800",children:"Ver Dossiê"})})]},s.id))})]})})]})]})})}export{_ as default};
