import{b as r,j as a}from"./main-QkSqPps8.js";import{r as d}from"./router-C15yhWin.js";import{F as M}from"./XMarkIcon-C8R2LFm1.js";const i="multas/multas",o="multas",y={async getMultas(e={}){return(await r.get(`${i}/`,{params:e})).data},async getMulta(e){return(await r.get(`${i}/${e}/`)).data},async createMulta(e){return(await r.post(`${i}/`,e)).data},async updateMulta(e,s){return(await r.put(`${i}/${e}/`,s)).data},async deleteMulta(e){return(await r.delete(`${i}/${e}/`)).data},async marcarComoPaga(e,s=null,c=""){const n=new FormData;return s&&n.append("comprovante",s),c&&n.append("observacao",c),(await r.post(`${i}/${e}/marcar_como_paga/`,n)).data},async cancelarMulta(e,s=""){return(await r.post(`${i}/${e}/cancelar/`,{motivo:s})).data},async alterarStatus(e,s,c=""){return(await r.post(`${i}/${e}/alterar_status/`,{status:s,observacao:c})).data},async atualizarStatusVencimento(){return(await r.post(`${i}/atualizar_status_vencimento/`)).data},async getEstatisticas(){return(await r.get(`${i}/estatisticas/`)).data},async getEstatisticasTeste(){return(await r.get(`${i}/estatisticas_simples/`)).data},async getMultasVencidas(){return(await r.get(`${i}/vencidas/`)).data},async getEmpresas(e={}){return(await r.get(`${o}/empresas/`,{params:e})).data},async getEmpresa(e){return(await r.get(`${o}/empresas/${e}/`)).data},async createEmpresa(e){return(await r.post(`${o}/empresas/`,e)).data},async updateEmpresa(e,s){return(await r.put(`${o}/empresas/${e}/`,s)).data},async deleteEmpresa(e){return(await r.delete(`${o}/empresas/${e}/`)).data},async getCobrancas(e={}){return(await r.get(`${o}/cobrancas/`,{params:e})).data},async getCobranca(e){return(await r.get(`${o}/cobrancas/${e}/`)).data},async createCobranca(e){return(await r.post(`${o}/cobrancas/`,e)).data},async updateCobranca(e,s){return(await r.put(`${o}/cobrancas/${e}/`,s)).data},async deleteCobranca(e){return(await r.delete(`${o}/cobrancas/${e}/`)).data},async getPeticoes(e={}){return(await r.get(`${o}/peticoes/`,{params:e})).data},async createPeticao(e){return(await r.post(`${o}/peticoes/`,e)).data},async updatePeticao(e,s){return(await r.put(`${o}/peticoes/${e}/`,s)).data},async deletePeticao(e){return(await r.delete(`${o}/peticoes/${e}/`)).data},async getRecursos(e={}){return(await r.get(`${o}/recursos/`,{params:e})).data},async createRecurso(e){return(await r.post(`${o}/recursos/`,e)).data},async updateRecurso(e,s){return(await r.put(`${o}/recursos/${e}/`,s)).data},async deleteRecurso(e){return(await r.delete(`${o}/recursos/${e}/`)).data},async getAnalises(e={}){return(await r.get(`${o}/analises/`,{params:e})).data},async createAnalise(e){return(await r.post(`${o}/analises/`,e)).data},async updateAnalise(e,s){return(await r.put(`${o}/analises/${e}/`,s)).data},async deleteAnalise(e){return(await r.delete(`${o}/analises/${e}/`)).data}};function _({multa:e=null,onSave:s,onCancel:c}){const[n,m]=d.useState({processo:"",empresa:"",valor:"",observacoes:""}),[f,$]=d.useState([]),[h,w]=d.useState([]),[b,v]=d.useState(!1),[l,g]=d.useState({});d.useEffect(()=>{j(),N(),e&&m({processo:e.processo||"",empresa:e.empresa||"",valor:e.valor||"",observacoes:e.observacoes||""})},[e]);const j=async()=>{try{const t=await y.getEmpresas();$(t.results||t)}catch(t){console.error("Erro ao carregar empresas:",t)}},N=async()=>{try{w([{id:1,numero:"PROC-2024-001"},{id:2,numero:"PROC-2024-002"},{id:3,numero:"PROC-2024-003"}])}catch(t){console.error("Erro ao carregar processos:",t)}},u=t=>{const{name:p,value:S}=t.target;m(x=>({...x,[p]:S})),l[p]&&g(x=>({...x,[p]:""}))},E=()=>{const t={};return n.processo||(t.processo="Processo é obrigatório"),n.empresa||(t.empresa="Empresa é obrigatória"),n.valor||(t.valor="Valor é obrigatório"),g(t),Object.keys(t).length===0},C=async t=>{if(t.preventDefault(),!!E()){v(!0);try{const p={...n,valor:parseFloat(n.valor)};e?await y.updateMulta(e.id,p):await y.createMulta(p),s()}catch(p){console.error("Erro ao salvar multa:",p),g({submit:"Erro ao salvar multa. Tente novamente."})}finally{v(!1)}}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:e?"Editar Multa":"Nova Multa"}),a.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600",children:a.jsx(M,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Processo *"}),a.jsxs("select",{name:"processo",value:n.processo,onChange:u,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.processo?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Selecione um processo"}),h.map(t=>a.jsx("option",{value:t.id,children:t.numero},t.id))]}),l.processo&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.processo})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Empresa *"}),a.jsxs("select",{name:"empresa",value:n.empresa,onChange:u,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.empresa?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Selecione uma empresa"}),f.map(t=>a.jsx("option",{value:t.id,children:t.razao_social},t.id))]}),l.empresa&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.empresa})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor (R$) *"}),a.jsx("input",{type:"number",name:"valor",value:n.valor,onChange:u,step:"0.01",min:"0",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.valor?"border-red-500":"border-gray-300"}`,placeholder:"0,00"}),l.valor&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.valor})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),a.jsx("textarea",{name:"observacoes",value:n.observacoes,onChange:u,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observações sobre a multa..."})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),a.jsx("textarea",{name:"observacoes",value:n.observacoes,onChange:u,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observações adicionais..."})]}),l.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-red-600",children:l.submit})}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:b,children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:b,children:b?"Salvando...":e?"Atualizar":"Criar"})]})]})]})})}export{_ as M,y as m};
