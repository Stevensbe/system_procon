import{j as e,o as N,p as u}from"./main-BZolao6g.js";import{a as g,u as f,r as d,L as t}from"./router-Cgdj9vyr.js";import"./vendor-Csw2ODfV.js";import"./icons-qiKTog5F.js";function w(){var m;const{id:l}=g(),x=f(),[s,h]=d.useState(null),[r,c]=d.useState(!0),[o,n]=d.useState("");d.useEffect(()=>{(async()=>{try{const i=await N(l);h(i)}catch(i){n(i.message||"Erro ao carregar detalhes.")}finally{c(!1)}})()},[l]);const p=async()=>{if(window.confirm(`Voc√™ tem certeza que deseja deletar o Auto de Posto No ${s.numero}? Esta a√ß√£o n√£o pode ser desfeita.`)){c(!0);try{await u(l),alert("Auto de Posto deletado com sucesso!"),x("/fiscalizacao/postos")}catch(i){n(i.message||"Falha ao deletar o auto."),c(!1)}}},j=`http://localhost:8000/api/postos/${l}/gerar-documento/`;return r?e.jsx("div",{className:"p-8",children:"Carregando..."}):o?e.jsx("div",{className:"p-8 text-red-500",children:o}):s?e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-orange-800",children:"Detalhes do Auto de Posto"}),e.jsxs("p",{className:"text-gray-600",children:["N√∫mero: ",s.numero]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-orange-700",children:"Informa√ß√µes do Auto"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"N√∫mero:"}),e.jsx("p",{children:s.numero})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Raz√£o Social:"}),e.jsx("p",{children:s.razao_social})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Nome Fantasia:"}),e.jsx("p",{children:s.nome_fantasia||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"CNPJ:"}),e.jsx("p",{children:s.cnpj})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Data da Fiscaliza√ß√£o:"}),e.jsx("p",{children:new Date(s.data_fiscalizacao+"T00:00:00").toLocaleDateString("pt-BR")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Hora da Fiscaliza√ß√£o:"}),e.jsx("p",{children:s.hora_fiscalizacao})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Endere√ßo:"}),e.jsx("p",{children:s.endereco})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Munic√≠pio/UF:"}),e.jsxs("p",{children:[s.municipio,"/",s.estado]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Origem:"}),e.jsx("p",{className:"capitalize",children:(m=s.origem)==null?void 0:m.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Porte:"}),e.jsx("p",{className:"capitalize",children:s.porte})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Status da Fiscaliza√ß√£o:"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-4 h-4 rounded mr-2 ${s.nada_consta?"bg-green-500":"bg-gray-300"}`}),e.jsx("span",{children:"Nada consta"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-4 h-4 rounded mr-2 ${s.sem_irregularidades?"bg-green-500":"bg-gray-300"}`}),e.jsx("span",{children:"Sem irregularidades"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-orange-700",children:"Pre√ßos dos Combust√≠veis no Totem"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Gasolina Comum:"}),e.jsx("p",{className:"text-lg text-orange-600",children:s.preco_gasolina_comum?`R$ ${s.preco_gasolina_comum}`:"N√£o comercializado"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Gasolina Aditivada:"}),e.jsx("p",{className:"text-lg text-orange-600",children:s.preco_gasolina_aditivada?`R$ ${s.preco_gasolina_aditivada}`:"N√£o comercializado"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Etanol:"}),e.jsx("p",{className:"text-lg text-orange-600",children:s.preco_etanol?`R$ ${s.preco_etanol}`:"N√£o comercializado"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Diesel Comum:"}),e.jsx("p",{className:"text-lg text-orange-600",children:s.preco_diesel_comum?`R$ ${s.preco_diesel_comum}`:"N√£o comercializado"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Diesel S-10:"}),e.jsx("p",{className:"text-lg text-orange-600",children:s.preco_diesel_s10?`R$ ${s.preco_diesel_s10}`:"N√£o comercializado"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"GNV:"}),e.jsx("p",{className:"text-lg text-orange-600",children:s.preco_gnv?`R$ ${s.preco_gnv}`:"N√£o comercializado"})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Produtos n√£o comercializados pelo estabelecimento:"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[s.nao_vende_gas_comum&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded mr-2"}),"Gasolina Comum"]}),s.nao_vende_gas_aditivada&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded mr-2"}),"Gasolina Aditivada"]}),s.nao_vende_etanol&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded mr-2"}),"Etanol"]}),s.nao_vende_diesel_comum&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded mr-2"}),"Diesel Comum"]}),s.nao_vende_diesel_s10&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded mr-2"}),"Diesel S-10"]}),s.nao_vende_gnv&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded mr-2"}),"GNV"]})]})]})]}),s.notas_fiscais&&s.notas_fiscais.length>0&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-orange-700",children:"Notas Fiscais de Aquisi√ß√£o"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Tipo"}),e.jsx("th",{className:"text-left py-2",children:"Produto"}),e.jsx("th",{className:"text-left py-2",children:"N¬∫ da NF"}),e.jsx("th",{className:"text-left py-2",children:"Data"}),e.jsx("th",{className:"text-left py-2",children:"Pre√ßo/Litro"})]})}),e.jsx("tbody",{children:s.notas_fiscais.map((a,i)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 capitalize",children:a.tipo_nota}),e.jsx("td",{className:"py-2",children:a.produto}),e.jsx("td",{className:"py-2",children:a.numero_nota}),e.jsx("td",{className:"py-2",children:new Date(a.data+"T00:00:00").toLocaleDateString("pt-BR")}),e.jsxs("td",{className:"py-2",children:["R$ ",a.preco]})]},i))})]})})]}),s.cupons_fiscais&&s.cupons_fiscais.length>0&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-orange-700",children:"Cupons Fiscais de Venda"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Item"}),e.jsx("th",{className:"text-left py-2",children:"Data"}),e.jsx("th",{className:"text-left py-2",children:"N¬∫ Cupom"}),e.jsx("th",{className:"text-left py-2",children:"Produto"}),e.jsx("th",{className:"text-left py-2",children:"Valor"}),e.jsx("th",{className:"text-left py-2",children:"% Diferen√ßa"})]})}),e.jsx("tbody",{children:s.cupons_fiscais.map((a,i)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2",children:a.item_tabela}),e.jsx("td",{className:"py-2",children:new Date(a.dia+"T00:00:00").toLocaleDateString("pt-BR")}),e.jsx("td",{className:"py-2",children:a.numero_cupom}),e.jsx("td",{className:"py-2",children:a.produto}),e.jsxs("td",{className:"py-2",children:["R$ ",a.valor]}),e.jsxs("td",{className:"py-2",children:[a.percentual_diferenca||"-","%"]})]},i))})]})})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-6 rounded-lg shadow mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-yellow-800",children:"Prazo para Envio de Documentos"}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"font-medium",children:"Prazo:"}),e.jsxs("span",{className:"ml-2 text-lg font-bold text-yellow-700",children:[s.prazo_envio_documentos||48," horas"]})]}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["A empresa fica notificada a apresentar, no prazo de ",s.prazo_envio_documentos||48," horas, via e-mail ",e.jsx("strong",{children:"fiscalizacaoprocon@procon.am.gov.br"}),", as notas fiscais de aquisi√ß√£o e os cupons fiscais de venda ao consumidor at√© a presente data desta fiscaliza√ß√£o."]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-orange-700",children:"Outras Informa√ß√µes"}),s.outras_irregularidades&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-medium",children:"Outras Irregularidades:"}),e.jsx("p",{className:"whitespace-pre-wrap",children:s.outras_irregularidades})]}),s.dispositivos_legais&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-medium",children:"Dispositivos Legais:"}),e.jsx("p",{className:"whitespace-pre-wrap",children:s.dispositivos_legais})]}),s.info_adicionais&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-medium",children:"Informa√ß√µes Adicionais:"}),e.jsx("p",{className:"whitespace-pre-wrap",children:s.info_adicionais})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-orange-700",children:"Respons√°veis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Autoridade Fiscalizadora"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Fiscal 1:"}),e.jsx("p",{children:s.fiscal_nome_1}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Matr√≠cula: ",s.fiscal_matricula_1]})]}),s.fiscal_nome_2&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Fiscal 2:"}),e.jsx("p",{children:s.fiscal_nome_2}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Matr√≠cula: ",s.fiscal_matricula_2]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Estabelecimento Fiscalizado"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Respons√°vel:"}),e.jsx("p",{children:s.responsavel_nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:["CPF: ",s.responsavel_cpf]})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-8 pt-4 border-t",children:[e.jsx(t,{to:"/fiscalizacao/postos",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"‚Üê Voltar para a Lista"}),e.jsx(t,{to:`/fiscalizacao/postos/${l}/editar`,className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700",children:"‚úèÔ∏è Editar"}),e.jsx("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"üìÑ Gerar Documento (.docx)"}),e.jsx(t,{to:"/fiscalizacao/infracoes/novo",state:{autoConstatacao:s,tipoAuto:"posto"},className:"px-4 py-2 bg-red-700 text-white rounded hover:bg-red-800 font-bold",children:"‚öñÔ∏è Gerar Infra√ß√£o"}),e.jsx("button",{onClick:p,disabled:r,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:bg-gray-400 ml-auto",children:r?"Deletando...":"Deletar"})]})]}):e.jsx("div",{className:"p-8",children:"Auto n√£o encontrado."})}export{w as default};
