import{c as y,j as e,f as _}from"./main-DVdFXPbZ.js";import{e as w,u as C,r as d,L as m}from"./router-C15yhWin.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";function S(){const{id:r}=w(),p=C(),[b,x]=d.useState(!0),[n,u]=d.useState(!1),[t,i]=d.useState(""),[a,h]=d.useState({numero:"",data_fiscalizacao:"",hora_fiscalizacao:"",razao_social:"",nome_fantasia:"",cnpj:"",endereco:"",municipio:"",cep:"",telefone:"",email:"",responsavel_nome:"",responsavel_cpf:"",responsavel_funcao:"",agencia:"",codigo_banco:"",tipo_atendimento:"",horario_funcionamento:"",tem_irregularidades:!1,irregularidades_detalhes:"",documentos_solicitados:"",documentos_apresentados:!1,prazo_apresentacao:"24",observacoes:"",fiscal_responsavel:"",fiscal_apoio:""});d.useEffect(()=>{g()},[r]);const g=async()=>{var o;try{x(!0);const l=await y(r),c={...l,data_fiscalizacao:l.data_fiscalizacao||"",hora_fiscalizacao:l.hora_fiscalizacao||"",tem_irregularidades:!!l.tem_irregularidades,documentos_apresentados:!!l.documentos_apresentados,prazo_apresentacao:((o=l.prazo_apresentacao)==null?void 0:o.toString())||"24"};h(c)}catch(l){i(l.message||"Erro ao carregar auto de banco")}finally{x(!1)}},s=o=>{const{name:l,value:c,type:f,checked:v}=o.target;h(N=>({...N,[l]:f==="checkbox"?v:c}))},j=async o=>{o.preventDefault();try{u(!0),i("");const l={...a,prazo_apresentacao:parseInt(a.prazo_apresentacao)||24};await _(r,l),p(`/fiscalizacao/bancos/${r}`,{state:{message:"Auto de banco atualizado com sucesso!"}})}catch(l){i(l.message||"Erro ao atualizar auto de banco")}finally{u(!1)}};return b?e.jsx("div",{className:"flex justify-center items-center p-8 min-h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("div",{className:"text-lg text-gray-600",children:"Carregando auto de banco..."})]})}):t&&!a.id?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Erro ao carregar auto"}),e.jsx("p",{className:"mt-2",children:t}),e.jsx(m,{to:"/fiscalizacao/banco",className:"mt-3 inline-block px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"← Voltar à lista"})]})}):e.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-800",children:"Editar Auto de Banco"}),e.jsxs("p",{className:"text-gray-600",children:["Auto nº ",a.numero||r]})]}),e.jsx(m,{to:`/fiscalizacao/bancos/${r}`,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"← Voltar"})]})}),t&&e.jsx("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:t}),e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:"Dados Básicos"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número do Auto"}),e.jsx("input",{type:"text",name:"numero",value:a.numero,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ex: 2024/001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Fiscalização *"}),e.jsx("input",{type:"date",name:"data_fiscalizacao",value:a.data_fiscalizacao,onChange:s,required:!0,className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora da Fiscalização"}),e.jsx("input",{type:"time",name:"hora_fiscalizacao",value:a.hora_fiscalizacao,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:"Dados do Estabelecimento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razão Social *"}),e.jsx("input",{type:"text",name:"razao_social",value:a.razao_social,onChange:s,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite a razão social"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Fantasia"}),e.jsx("input",{type:"text",name:"nome_fantasia",value:a.nome_fantasia,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite o nome fantasia"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CNPJ *"}),e.jsx("input",{type:"text",name:"cnpj",value:a.cnpj,onChange:s,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"00.000.000/0000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Município *"}),e.jsx("input",{type:"text",name:"municipio",value:a.municipio,onChange:s,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite o município"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereço"}),e.jsx("input",{type:"text",name:"endereco",value:a.endereco,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite o endereço completo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP"}),e.jsx("input",{type:"text",name:"cep",value:a.cep,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"00000-000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"text",name:"telefone",value:a.telefone,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"email@exemplo.com"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:"Responsável Legal"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Responsável"}),e.jsx("input",{type:"text",name:"responsavel_nome",value:a.responsavel_nome,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Nome completo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF do Responsável"}),e.jsx("input",{type:"text",name:"responsavel_cpf",value:a.responsavel_cpf,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Função"}),e.jsx("input",{type:"text",name:"responsavel_funcao",value:a.responsavel_funcao,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ex: Gerente, Superintendente"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:"Informações Bancárias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agência"}),e.jsx("input",{type:"text",name:"agencia",value:a.agencia,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código do Banco"}),e.jsx("input",{type:"text",name:"codigo_banco",value:a.codigo_banco,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Atendimento"}),e.jsxs("select",{name:"tipo_atendimento",value:a.tipo_atendimento,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"presencial",children:"Presencial"}),e.jsx("option",{value:"autoatendimento",children:"Autoatendimento"}),e.jsx("option",{value:"misto",children:"Misto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Horário de Funcionamento"}),e.jsx("input",{type:"text",name:"horario_funcionamento",value:a.horario_funcionamento,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ex: 8h às 14h"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:"Irregularidades"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"tem_irregularidades",checked:a.tem_irregularidades,onChange:s,className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Foram encontradas irregularidades"})]})}),a.tem_irregularidades&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Detalhes das Irregularidades"}),e.jsx("textarea",{name:"irregularidades_detalhes",value:a.irregularidades_detalhes||"",onChange:s,rows:4,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Descreva as irregularidades encontradas..."})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:"Documentos"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Documentos Solicitados"}),e.jsx("textarea",{name:"documentos_solicitados",value:a.documentos_solicitados,onChange:s,rows:3,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Liste os documentos solicitados..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"documentos_apresentados",checked:a.documentos_apresentados,onChange:s,className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Documentos apresentados no local"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prazo para apresentação (horas)"}),e.jsxs("select",{name:"prazo_apresentacao",value:a.prazo_apresentacao,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"24",children:"24 horas"}),e.jsx("option",{value:"48",children:"48 horas"}),e.jsx("option",{value:"72",children:"72 horas"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:"Fiscais Responsáveis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fiscal Responsável"}),e.jsx("input",{type:"text",name:"fiscal_responsavel",value:a.fiscal_responsavel,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Nome do fiscal responsável"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fiscal de Apoio"}),e.jsx("input",{type:"text",name:"fiscal_apoio",value:a.fiscal_apoio,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Nome do fiscal de apoio"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:"Observações"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observações Gerais"}),e.jsx("textarea",{name:"observacoes",value:a.observacoes,onChange:s,rows:4,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Observações adicionais..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(m,{to:`/fiscalizacao/bancos/${r}`,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:n,className:`px-6 py-3 rounded-lg text-white font-medium ${n?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:n?"Salvando...":"Salvar Alterações"})]})]})]})}export{S as default};
