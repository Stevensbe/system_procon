import{j as e}from"./main-BlGnCLHT.js";import{r as s}from"./router-C15yhWin.js";import{j as S}from"./juridicoService-B0le0wh-.js";import{L as C}from"./LoadingSpinner-B1xxHhLi.js";import{N as D}from"./NotificationContainer-uqWzZZ4D.js";import{u as L}from"./useNotification-Bm6NCblX.js";import{F as _}from"./PlusIcon-DZYmRjce.js";import{F as I}from"./FunnelIcon-PU3yDtaQ.js";import{F as M}from"./EyeIcon-Cu0Wnbis.js";import{F as O}from"./PencilIcon-CajHx5Rb.js";import{F as T}from"./TrashIcon-CKnVykBy.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";import"./XMarkIcon-C8R2LFm1.js";import"./InformationCircleIcon-o8enZ7c_.js";import"./ExclamationTriangleIcon-Y0luX6t1.js";import"./XCircleIcon-BTR4Rsg8.js";import"./CheckCircleIcon-B-MrGrlS.js";const ae=()=>{const[c,y]=s.useState([]),[b,m]=s.useState(!0),[d,g]=s.useState({status:"",prioridade:"",analista:"",parte:"",assunto:""}),[n,j]=s.useState(!1),[a,i]=s.useState(1),[x,f]=s.useState(1),{notifications:N,addNotification:v,removeNotification:k}=L();s.useEffect(()=>{w()},[d,a]);const w=async()=>{try{m(!0);const t=new URLSearchParams({page:a,...d}),r=await S.listarProcessos(t.toString());y(r.data.results||r.data),f(Math.ceil((r.data.count||0)/20))}catch(t){console.error("Erro ao carregar processos:",t),v("Erro ao carregar processos","error")}finally{m(!1)}},l=(t,r)=>{g(o=>({...o,[t]:r})),i(1)},A=()=>{g({status:"",prioridade:"",analista:"",parte:"",assunto:""}),i(1)},P=t=>{switch(t){case"ABERTO":return"bg-yellow-100 text-yellow-800";case"EM_ANALISE":return"bg-blue-100 text-blue-800";case"RESPONDIDO":return"bg-green-100 text-green-800";case"ARQUIVADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},E=t=>{switch(t){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAIXA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},R=t=>new Date(t).toLocaleDateString("pt-BR"),F=t=>t==null?"-":t<0?`${Math.abs(t)} dias atrasado`:t===0?"Vence hoje":`${t} dias`;return b?e.jsx(C,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(D,{notifications:N,onRemove:k}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Processos Jurídicos"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Gerencie todos os processos jurídicos"})]}),e.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center",children:[e.jsx(_,{className:"h-5 w-5 mr-2"}),"Novo Processo"]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow mb-6",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Filtros"}),e.jsxs("button",{onClick:()=>j(!n),className:"flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[e.jsx(I,{className:"h-5 w-5 mr-2"}),n?"Ocultar":"Mostrar"," Filtros"]})]})}),n&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:d.status,onChange:t=>l("status",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Todos os status"}),e.jsx("option",{value:"ABERTO",children:"Aberto"}),e.jsx("option",{value:"EM_ANALISE",children:"Em Análise"}),e.jsx("option",{value:"RESPONDIDO",children:"Respondido"}),e.jsx("option",{value:"ARQUIVADO",children:"Arquivado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prioridade"}),e.jsxs("select",{value:d.prioridade,onChange:t=>l("prioridade",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Todas as prioridades"}),e.jsx("option",{value:"URGENTE",children:"Urgente"}),e.jsx("option",{value:"ALTA",children:"Alta"}),e.jsx("option",{value:"MEDIA",children:"Média"}),e.jsx("option",{value:"BAIXA",children:"Baixa"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Parte Envolvida"}),e.jsx("input",{type:"text",value:d.parte,onChange:t=>l("parte",t.target.value),placeholder:"Buscar por parte...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assunto"}),e.jsx("input",{type:"text",value:d.assunto,onChange:t=>l("assunto",t.target.value),placeholder:"Buscar por assunto...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:A,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:"Limpar Filtros"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Processos (",c.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Processo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Parte"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prioridade"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prazo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Analista"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c.map(t=>{var r,o,u,h,p;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.numero}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.numero_peticao})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:t.parte}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.empresa_cnpj})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(t.status)}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E(t.prioridade)}`,children:t.prioridade})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:t.data_limite?R(t.data_limite):"-"}),e.jsx("div",{className:`text-sm ${t.esta_atrasado?"text-red-600 dark:text-red-400":t.dias_restantes<=3?"text-orange-600 dark:text-orange-400":"text-gray-500 dark:text-gray-400"}`,children:F(t.dias_restantes)})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[(o=(r=t.analista)==null?void 0:r.user)==null?void 0:o.first_name," ",(h=(u=t.analista)==null?void 0:u.user)==null?void 0:h.last_name]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(p=t.analista)==null?void 0:p.oab})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(M,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(O,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(T,{className:"h-5 w-5"})})]})})]},t.id)})})]})}),x>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Página ",a," de ",x]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>i(a-1),disabled:a===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:"Anterior"}),e.jsx("button",{onClick:()=>i(a+1),disabled:a===x,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:"Próxima"})]})]})})]})]})]})};export{ae as default};
