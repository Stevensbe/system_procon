import{j as e}from"./main-CRMJS0Wv.js";import{r as o}from"./router-Cgdj9vyr.js";import{m as f,M as L}from"./MultaForm-GeErSjwf.js";import{f as P,a as $}from"./formatters-Dm0PafFw.js";import{F as A}from"./DocumentTextIcon-B0GYMzL8.js";import{F as R}from"./CurrencyDollarIcon-BYymgR5k.js";import{F as G}from"./CheckCircleIcon-DFajsejV.js";import{F as K}from"./ClockIcon-CMrA9XuO.js";import{F as q}from"./ExclamationTriangleIcon-2kHM3Vz3.js";import{F as O}from"./PlusIcon-CPn5D4W5.js";import{F as T}from"./MagnifyingGlassIcon-C-bifEwt.js";import{F as z}from"./FunnelIcon-C9OgRzwO.js";import{F as H}from"./EyeIcon-xG4b5U4j.js";import{F as D}from"./DocumentArrowUpIcon-DteXzQOc.js";import{F as B}from"./XMarkIcon-D1YaT3yw.js";import"./vendor-Csw2ODfV.js";import"./icons-qiKTog5F.js";function I(){var d,N,w,x,t,k,C,m,g,_,c,u,p,j,M,y,F,S;const[s,E]=o.useState(null),[V,h]=o.useState(!0);o.useEffect(()=>{i()},[]);const i=async()=>{try{h(!0);const r=await f.getEstatisticasTeste();console.log("Endpoint de teste funcionando:",r);const n=await f.getEstatisticas();E(n)}catch(r){console.error("Erro ao carregar estatísticas:",r)}finally{h(!1)}};if(V)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((r,n)=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]})},n))});if(!s)return e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Erro ao carregar estatísticas"})});const v=[{title:"Total de Multas",value:((d=s.resumo)==null?void 0:d.total_multas)||0,icon:A,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Valor Total",value:P(((N=s.valores)==null?void 0:N.valor_total)||0),icon:R,color:"text-green-600",bgColor:"bg-green-50"},{title:"Multas Pagas",value:((w=s.resumo)==null?void 0:w.multas_pagas)||0,icon:G,color:"text-green-600",bgColor:"bg-green-50"},{title:"Multas Pendentes",value:((x=s.resumo)==null?void 0:x.multas_pendentes)||0,icon:K,color:"text-yellow-600",bgColor:"bg-yellow-50"},{title:"Multas Vencidas",value:((t=s.resumo)==null?void 0:t.multas_vencidas)||0,icon:q,color:"text-red-600",bgColor:"bg-red-50"},{title:"Valor Pendente",value:P(((k=s.valores)==null?void 0:k.valor_pendente)||0),icon:R,color:"text-orange-600",bgColor:"bg-orange-50"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map((r,n)=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-lg ${r.bgColor}`,children:e.jsx(r.icon,{className:`w-6 h-6 ${r.color}`})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:r.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.value})]})]})},n))}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribuição por Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:((C=s.por_status)==null?void 0:C.paga)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pagas"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[((m=s.resumo)==null?void 0:m.total_multas)>0?Math.round((((g=s.por_status)==null?void 0:g.paga)||0)/s.resumo.total_multas*100):0,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:((_=s.por_status)==null?void 0:_.pendente)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pendentes"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[((c=s.resumo)==null?void 0:c.total_multas)>0?Math.round((((u=s.por_status)==null?void 0:u.pendente)||0)/s.resumo.total_multas*100):0,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:((p=s.por_status)==null?void 0:p.vencida)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Vencidas"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[((j=s.resumo)==null?void 0:j.total_multas)>0?Math.round((((M=s.por_status)==null?void 0:M.vencida)||0)/s.resumo.total_multas*100):0,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:((y=s.por_status)==null?void 0:y.cancelada)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Canceladas"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[((F=s.resumo)==null?void 0:F.total_multas)>0?Math.round((((S=s.por_status)==null?void 0:S.cancelada)||0)/s.resumo.total_multas*100):0,"%"]})]})]})]})]})}function ie(){var r,n;const[s,E]=o.useState([]),[V,h]=o.useState(!0),[i,v]=o.useState(""),[d,N]=o.useState(""),[w,x]=o.useState(!1),[t,k]=o.useState(null),[C,m]=o.useState(!1),[g,_]=o.useState(!0);o.useEffect(()=>{c()},[]);const c=async()=>{try{h(!0);const a={};i&&(a.search=i),d&&(a.status=d);const l=await f.getMultas(a);E(l.results||l)}catch(a){console.error("Erro ao carregar multas:",a)}finally{h(!1)}},u=()=>{c()},p=a=>{N(a),c()},j=a=>{const l={pendente:{color:"bg-yellow-100 text-yellow-800",text:"Pendente"},paga:{color:"bg-green-100 text-green-800",text:"Paga"},vencida:{color:"bg-red-100 text-red-800",text:"Vencida"},cancelada:{color:"bg-gray-100 text-gray-800",text:"Cancelada"}},b=l[a]||l.pendente;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b.color}`,children:b.text})},M=a=>{k(a),m(!0)},y=async a=>{try{await f.marcarComoPaga(a),c()}catch(l){console.error("Erro ao marcar como paga:",l)}},F=async a=>{if(window.confirm("Tem certeza que deseja cancelar esta multa?"))try{await f.cancelarMulta(a),c()}catch(l){console.error("Erro ao cancelar multa:",l)}},S=()=>{x(!1),c()};return e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-[#0c0f12] min-h-screen transition-colors duration-300",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white transition-colors duration-300",children:"Gestão de Multas"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2 transition-colors duration-300",children:"Gerencie as multas aplicadas e acompanhe o status de pagamento"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>_(!g),className:"inline-flex items-center px-4 py-2 bg-gray-600 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors",children:g?"Ver Lista":"Ver Dashboard"}),e.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors",children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),"Nova Multa"]})]})]}),e.jsx("div",{className:"bg-white dark:bg-[#1a1d21] rounded-lg shadow-sm p-4 transition-colors duration-300",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Buscar por processo, empresa...",value:i,onChange:a=>v(a.target.value),onKeyPress:a=>a.key==="Enter"&&u(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-300"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:d,onChange:a=>p(a.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors duration-300",children:[e.jsx("option",{value:"",children:"Todos os Status"}),e.jsx("option",{value:"false",children:"Pendente"}),e.jsx("option",{value:"true",children:"Paga"})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-600 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors",children:e.jsx(z,{className:"w-5 h-5"})})]})]})})]}),g?e.jsx(I,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-[#1a1d21] rounded-lg shadow-sm p-4 mb-6 transition-colors duration-300",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Buscar por processo, empresa...",value:i,onChange:a=>v(a.target.value),onKeyPress:a=>a.key==="Enter"&&u(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-300"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:d,onChange:a=>p(a.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors duration-300",children:[e.jsx("option",{value:"",children:"Todos os Status"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"paga",children:"Paga"}),e.jsx("option",{value:"vencida",children:"Vencida"}),e.jsx("option",{value:"cancelada",children:"Cancelada"})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-600 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors",children:e.jsx(z,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:V?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando multas..."})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(a=>{var l,b;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((l=a.processo_info)==null?void 0:l.numero)||a.processo})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:((b=a.empresa_info)==null?void 0:b.razao_social)||a.empresa})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:P(a.valor)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:$(a.data_vencimento)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j(a.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>M(a),className:"text-blue-600 hover:text-blue-900",title:"Ver detalhes",children:e.jsx(H,{className:"w-5 h-5"})}),a.status==="pendente"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y(a.id),className:"text-green-600 hover:text-green-900",title:"Marcar como paga",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>F(a.id),className:"text-red-600 hover:text-red-900",title:"Cancelar multa",children:e.jsx(B,{className:"w-5 h-5"})})]}),a.status==="vencida"&&e.jsx("button",{onClick:()=>y(a.id),className:"text-green-600 hover:text-green-900",title:"Marcar como paga",children:e.jsx(D,{className:"w-5 h-5"})})]})})]},a.id)})})]}),s.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma multa encontrada"})})]})})]}),C&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Detalhes da Multa"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(B,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Processo"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((r=t.processo_info)==null?void 0:r.numero)||t.processo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Empresa"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((n=t.empresa_info)==null?void 0:n.razao_social)||t.empresa})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:P(t.valor)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("div",{className:"mt-1",children:j(t.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Emissão"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:$(t.data_emissao)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Vencimento"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:$(t.data_vencimento)})]})]}),t.observacoes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.observacoes})]}),t.comprovante_pagamento&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comprovante de Pagamento"}),e.jsxs("a",{href:t.comprovante_pagamento,target:"_blank",rel:"noopener noreferrer",className:"mt-1 inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"Ver comprovante"]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Fechar"})})]})}),w&&e.jsx(L,{onSave:S,onCancel:()=>x(!1)})]})}export{ie as default};
