import{j as e}from"./main-QkSqPps8.js";import{r as c}from"./router-C15yhWin.js";import{L as k}from"./LoadingSpinner-CioJYzaJ.js";import{c as d,F as v,a as _,D}from"./caixaEntradaService-CgiHTE19.js";import{F as A}from"./ArrowPathIcon-DvGuXmm8.js";import{F as f}from"./DocumentTextIcon-o9njoXYt.js";import{F}from"./EyeIcon-Cu0Wnbis.js";import{F as E}from"./ExclamationTriangleIcon-Y0luX6t1.js";import{F as L}from"./ClockIcon-CbdR_WDb.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";import"./formatters-Ck8j3q9a.js";import"./BellIcon-e_OUeLXo.js";import"./UserIcon-Crv8uqGG.js";import"./BuildingOfficeIcon-DcZomax8.js";import"./CalendarIcon-BxLx5Sh6.js";import"./PaperClipIcon-COa5Xtiy.js";import"./CheckCircleIcon-B-MrGrlS.js";import"./PaperAirplaneIcon-CzbyTQNx.js";import"./FunnelIcon-PU3yDtaQ.js";import"./XMarkIcon-C8R2LFm1.js";import"./MagnifyingGlassIcon-DxjVcYIb.js";const W=()=>{const[N,m]=c.useState(!1),[t,i]=c.useState([]),[x,u]=c.useState({total:0,naoLidos:0,urgentes:0,atrasados:0}),[g,j]=c.useState({status:"",tipo:"",prioridade:"",busca:""});c.useEffect(()=>{p(),h()},[g]);const p=async()=>{m(!0);try{const a=await d.getDocumentosSetor({...g,setor:"FINANCEIRO"});i(a.documentos||[])}catch(a){console.error("Erro ao carregar documentos:",a),i([{id:1,numero_protocolo:"2024/001234",assunto:"Multa - Pagamento em atraso",remetente_nome:"Sistema Autom√°tico",empresa_nome:"Loja ABC Ltda",data_entrada:"2024-01-15T10:30:00",prazo_resposta:"2024-01-22T10:30:00",prioridade:"URGENTE",status:"NAO_LIDO",setor_destino:"Financeiro",tipo_documento:"MULTA",notificado_dte:!1,anexos_count:2},{id:2,numero_protocolo:"2024/001235",assunto:"Cobran√ßa - D√≠vida Ativa",remetente_nome:"Advogado Dr. Santos",empresa_nome:"Supermercado XYZ",data_entrada:"2024-01-15T14:20:00",prazo_resposta:"2024-01-20T14:20:00",prioridade:"ALTA",status:"EM_ANALISE",setor_destino:"Financeiro",tipo_documento:"COBRANCA",notificado_dte:!1,anexos_count:4},{id:3,numero_protocolo:"2024/001236",assunto:"Pagamento - Confirma√ß√£o",remetente_nome:"Banco Central",empresa_nome:"Farm√°cia Central",data_entrada:"2024-01-15T16:45:00",prazo_resposta:"2024-01-25T16:45:00",prioridade:"NORMAL",status:"NAO_LIDO",setor_destino:"Financeiro",tipo_documento:"PAGAMENTO",notificado_dte:!1,anexos_count:1}])}finally{m(!1)}},h=async()=>{try{const a=await d.getEstatisticas();u(a.estatisticas||{total:t.length,naoLidos:t.filter(r=>r.status==="NAO_LIDO").length,urgentes:t.filter(r=>r.prioridade==="URGENTE").length,atrasados:t.filter(r=>new Date(r.prazo_resposta)<new Date&&r.status!=="ARQUIVADO").length})}catch(a){console.error("Erro ao carregar estat√≠sticas:",a),u({total:t.length,naoLidos:t.filter(r=>r.status==="NAO_LIDO").length,urgentes:t.filter(r=>r.prioridade==="URGENTE").length,atrasados:t.filter(r=>new Date(r.prazo_resposta)<new Date&&r.status!=="ARQUIVADO").length})}},y=a=>{j(a)},b=()=>{p(),h()},w=async(a,r)=>{try{switch(m(!0),r){case"visualizar":const o=await d.visualizarDocumento(a);console.log("Documento visualizado:",o),alert(`Visualizando documento ${a}`);break;case"marcar_lido":await d.marcarComoLido(a),console.log("Documento marcado como lido:",a),i(l=>l.map(s=>s.id===a?{...s,status:"LIDO"}:s));break;case"encaminhar":const n=prompt("Para qual setor deseja encaminhar? (DIRETORIA)");n&&(await d.encaminharDocumento(a,{setor_destino:n,observacao:"Encaminhado pelo Financeiro"}),console.log("Documento encaminhado:",a,"para",n),i(l=>l.filter(s=>s.id!==a)));break;case"arquivar":await d.arquivarDocumento(a),console.log("Documento arquivado:",a),i(l=>l.map(s=>s.id===a?{...s,status:"ARQUIVADO"}:s));break;default:console.warn("A√ß√£o n√£o reconhecida:",r)}await h()}catch(o){console.error("Erro ao executar a√ß√£o:",o),alert(`Erro ao executar a√ß√£o: ${o.message}`)}finally{m(!1)}};return N?e.jsx(k,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"üì¨ Caixa de Entrada - Financeiro"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Processos para cobran√ßa de multa e pagamentos"})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:b,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Atualizar"]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900",children:e.jsx(f,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Total"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:x.total})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900",children:e.jsx(F,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"N√£o Lidos"}),e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:x.naoLidos})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-100 dark:bg-orange-900",children:e.jsx(E,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Urgentes"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:x.urgentes})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900",children:e.jsx(L,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Atrasados"}),e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:x.atrasados})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsx(_,{filtros:g,onFiltrosChange:y,showSetorFilter:!1})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Documentos do Financeiro"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length," documento(s) encontrado(s)"]})]})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.length>0?t.map(a=>e.jsx(D,{documento:a,onRefresh:b,onAcao:w},a.id)):e.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(f,{className:"h-12 w-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhum documento encontrado"}),e.jsx("p",{className:"text-sm",children:"N√£o h√° documentos na caixa de entrada do Financeiro com os filtros aplicados."})]})})]})]})]})};export{W as default};
