import{v as y,j as e,y as w}from"./main-QkSqPps8.js";import{e as C,u as k,r as i,L as p}from"./router-C15yhWin.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";function B(){const{id:l}=C(),h=k(),[g,u]=i.useState(!0),[n,x]=i.useState(!1),[c,m]=i.useState(""),[a,b]=i.useState({numero:"",data_fiscalizacao:"",hora_fiscalizacao:"",razao_social:"",nome_fantasia:"",cnpj:"",endereco:"",municipio:"",cep:"",telefone:"",email:"",responsavel_nome:"",responsavel_cpf:"",responsavel_funcao:"",publicidade_enganosa:!1,publicidade_enganosa_obs:"",precos_fora_padrao:!1,precos_fora_padrao_obs:"",ausencia_precos:!1,ausencia_precos_obs:"",precos_eletronico_fora_padrao:!1,precos_eletronico_fora_padrao_obs:"",ausencia_precos_eletronico:!1,ausencia_precos_eletronico_obs:"",fracionados_fora_padrao:!1,fracionados_fora_padrao_obs:"",ausencia_desconto_visibilidade:!1,ausencia_desconto_visibilidade_obs:"",ausencia_exemplar_cdc:!1,ausencia_exemplar_cdc_obs:"",substituicao_troco:!1,substituicao_troco_obs:"",aplicar_advertencia:!1,motivo_advertencia:"",observacoes:"",fiscal_responsavel:"",fiscal_apoio:""});i.useEffect(()=>{_()},[l]);const _=async()=>{try{u(!0);const s=await y(l),d={...s,data_fiscalizacao:s.data_fiscalizacao||"",hora_fiscalizacao:s.hora_fiscalizacao||"",publicidade_enganosa:!!s.publicidade_enganosa,precos_fora_padrao:!!s.precos_fora_padrao,ausencia_precos:!!s.ausencia_precos,precos_eletronico_fora_padrao:!!s.precos_eletronico_fora_padrao,ausencia_precos_eletronico:!!s.ausencia_precos_eletronico,fracionados_fora_padrao:!!s.fracionados_fora_padrao,ausencia_desconto_visibilidade:!!s.ausencia_desconto_visibilidade,ausencia_exemplar_cdc:!!s.ausencia_exemplar_cdc,substituicao_troco:!!s.substituicao_troco,aplicar_advertencia:!!s.aplicar_advertencia};b(d)}catch(s){m(s.message||"Erro ao carregar auto diversos")}finally{u(!1)}},o=s=>{const{name:d,value:t,type:v,checked:j}=s.target;b(N=>({...N,[d]:v==="checkbox"?j:t}))},f=async s=>{s.preventDefault();try{x(!0),m(""),await w(l,a),h(`/fiscalizacao/diversos/${l}`,{state:{message:"Auto diversos atualizado com sucesso!"}})}catch(d){m(d.message||"Erro ao atualizar auto diversos")}finally{x(!1)}},r=({name:s,label:d,obsName:t})=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",name:s,checked:a[s],onChange:o,className:"mr-2",id:s}),e.jsx("label",{htmlFor:s,className:"text-sm font-medium text-gray-700",children:d})]}),a[s]&&e.jsx("textarea",{name:t,value:a[t]||"",onChange:o,placeholder:"Descreva os detalhes...",className:"w-full p-2 border border-gray-300 rounded-md text-sm",rows:2})]});return g?e.jsx("div",{className:"flex justify-center items-center p-8 min-h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("div",{className:"text-lg text-gray-600",children:"Carregando auto diversos..."})]})}):c&&!a.id?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Erro ao carregar auto"}),e.jsx("p",{className:"mt-2",children:c}),e.jsx(p,{to:"/fiscalizacao/diversos",className:"mt-3 inline-block px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"← Voltar à lista"})]})}):e.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-purple-800",children:"Editar Auto de Legislação Diversa"}),e.jsxs("p",{className:"text-gray-600",children:["Auto nº ",a.numero||l]})]}),e.jsx(p,{to:`/fiscalizacao/diversos/${l}`,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"← Voltar"})]})}),c&&e.jsx("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:c}),e.jsxs("form",{onSubmit:f,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-purple-800 mb-4",children:"Dados Básicos"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número do Auto"}),e.jsx("input",{type:"text",name:"numero",value:a.numero,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ex: 2024/001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Fiscalização *"}),e.jsx("input",{required:!0,className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora da Fiscalização"}),e.jsx("input",{type:"time",name:"hora_fiscalizacao",value:a.hora_fiscalizacao,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-purple-800 mb-4",children:"Dados do Estabelecimento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razão Social *"}),e.jsx("input",{type:"text",name:"razao_social",value:a.razao_social,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite a razão social"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Fantasia"}),e.jsx("input",{type:"text",name:"nome_fantasia",value:a.nome_fantasia,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite o nome fantasia"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CNPJ *"}),e.jsx("input",{type:"text",name:"cnpj",value:a.cnpj,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"00.000.000/0000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Município *"}),e.jsx("input",{type:"text",name:"municipio",value:a.municipio,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite o município"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereço"}),e.jsx("input",{type:"text",name:"endereco",value:a.endereco,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite o endereço completo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP"}),e.jsx("input",{type:"text",name:"cep",value:a.cep,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"00000-000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"text",name:"telefone",value:a.telefone,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"email@exemplo.com"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-purple-800 mb-4",children:"Responsável Legal"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Responsável"}),e.jsx("input",{type:"text",name:"responsavel_nome",value:a.responsavel_nome,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Nome completo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF do Responsável"}),e.jsx("input",{type:"text",name:"responsavel_cpf",value:a.responsavel_cpf,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Função"}),e.jsx("input",{type:"text",name:"responsavel_funcao",value:a.responsavel_funcao,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ex: Gerente, Proprietário"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-purple-800 mb-4",children:"Irregularidades da Legislação Diversa"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(r,{name:"publicidade_enganosa",label:"Publicidade enganosa ou abusiva",obsName:"publicidade_enganosa_obs"}),e.jsx(r,{name:"precos_fora_padrao",label:"Preços fora do padrão estabelecido",obsName:"precos_fora_padrao_obs"}),e.jsx(r,{name:"ausencia_precos",label:"Ausência de preços visíveis",obsName:"ausencia_precos_obs"}),e.jsx(r,{name:"precos_eletronico_fora_padrao",label:"Preços eletrônicos fora do padrão",obsName:"precos_eletronico_fora_padrao_obs"}),e.jsx(r,{name:"ausencia_precos_eletronico",label:"Ausência de preços eletrônicos",obsName:"ausencia_precos_eletronico_obs"}),e.jsx(r,{name:"fracionados_fora_padrao",label:"Produtos fracionados fora do padrão",obsName:"fracionados_fora_padrao_obs"}),e.jsx(r,{name:"ausencia_desconto_visibilidade",label:"Falta de visibilidade em descontos",obsName:"ausencia_desconto_visibilidade_obs"}),e.jsx(r,{name:"ausencia_exemplar_cdc",label:"Ausência de exemplar do CDC",obsName:"ausencia_exemplar_cdc_obs"}),e.jsx(r,{name:"substituicao_troco",label:"Substituição indevida de troco",obsName:"substituicao_troco_obs"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-purple-800 mb-4",children:"Medidas Administrativas"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"aplicar_advertencia",checked:a.aplicar_advertencia,onChange:o,className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Aplicar advertência"})]})}),a.aplicar_advertencia&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo da Advertência"}),e.jsx("textarea",{name:"motivo_advertencia",value:a.motivo_advertencia||"",onChange:o,rows:3,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Descreva o motivo da advertência..."})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-purple-800 mb-4",children:"Fiscais Responsáveis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fiscal Responsável"}),e.jsx("input",{type:"text",name:"fiscal_responsavel",value:a.fiscal_responsavel,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Nome do fiscal responsável"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fiscal de Apoio"}),e.jsx("input",{type:"text",name:"fiscal_apoio",value:a.fiscal_apoio,onChange:o,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Nome do fiscal de apoio"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-purple-800 mb-4",children:"Observações"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observações Gerais"}),e.jsx("textarea",{name:"observacoes",value:a.observacoes,onChange:o,rows:4,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Observações adicionais..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(p,{to:`/fiscalizacao/diversos/${l}`,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:n,className:`px-6 py-3 rounded-lg text-white font-medium ${n?"bg-gray-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:n?"Salvando...":"Salvar Alterações"})]})]})]})}export{B as default};
