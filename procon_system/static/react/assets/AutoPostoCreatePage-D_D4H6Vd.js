import{j as e,q as ae}from"./main-BZolao6g.js";import{u as se,r as x,L as oe}from"./router-Cgdj9vyr.js";import{S as F,F as re}from"./FileUpload-DGKzh3cf.js";import"./vendor-Csw2ODfV.js";import"./icons-qiKTog5F.js";function ce(){const I=se(),[z,b]=x.useState(!1),[D,j]=x.useState(""),[s,S]=x.useState({razao_social:"",nome_fantasia:"",atividade:"",endereco:"",cep:"",municipio:"",estado:"AM",cnpj:"",telefone:"",data_fiscalizacao:new Date().toISOString().split("T")[0],hora_fiscalizacao:new Date().toTimeString().split(" ")[0].substring(0,5),origem:"acao",origem_outros:"",fiscal_nome_1:"",fiscal_nome_2:"",responsavel_nome:"",responsavel_cpf:"",porte:"",atuacao:"",nada_consta:!1,sem_irregularidades:!1,preco_gasolina_comum:"",preco_gasolina_aditivada:"",preco_etanol:"",preco_diesel_comum:"",preco_diesel_s10:"",preco_gnv:"",nao_vende_gas_comum:!1,nao_vende_gas_aditivada:!1,nao_vende_etanol:!1,nao_vende_diesel_comum:!1,nao_vende_diesel_s10:!1,nao_vende_gnv:!1,prazo_envio_documentos:48,info_adicionais:"",outras_irregularidades:"",dispositivos_legais:""}),[d,T]=x.useState({assinatura_fiscal_1:"",assinatura_fiscal_2:"",assinatura_representante:""}),[f,M]=x.useState([]),[N,R]=x.useState([]),[u,k]=x.useState({tipo_nota:"aumento",produto:"gas_comum",numero_nota:"",data:"",preco:""}),[y,P]=x.useState([]),[m,E]=x.useState({item_tabela:"",dia:"",numero_cupom:"",produto:"",valor:"",percentual_diferenca:""}),G=a=>{const t=a.replace(/\D/g,"");return t.length===11&&!/^(\d)\1{10}$/.test(t)},q=()=>{const a=[];return s.fiscal_nome_1&&s.fiscal_nome_1.trim()&&!d.assinatura_fiscal_1&&a.push("Assinatura do fiscal principal √© obrigat√≥ria quando o nome √© preenchido"),s.fiscal_nome_2&&s.fiscal_nome_2.trim()&&!d.assinatura_fiscal_2&&a.push("Assinatura do fiscal 2 √© obrigat√≥ria quando o nome √© preenchido"),s.responsavel_nome&&s.responsavel_nome.trim()&&!d.assinatura_representante&&a.push("Assinatura do representante √© obrigat√≥ria quando o nome √© preenchido"),Object.entries(d).forEach(([t,o])=>{if(o&&o.length<50){const n=t.replace("assinatura_","").replace("_"," ");a.push(`Assinatura ${n} parece muito simples`)}}),a},B=()=>{const a=q(),o=[{field:"razao_social",message:"Raz√£o Social √© obrigat√≥ria"},{field:"cnpj",message:"CNPJ √© obrigat√≥rio"},{field:"atividade",message:"Atividade √© obrigat√≥ria"},{field:"endereco",message:"Endere√ßo √© obrigat√≥rio"},{field:"municipio",message:"Munic√≠pio √© obrigat√≥rio"},{field:"data_fiscalizacao",message:"Data da Fiscaliza√ß√£o √© obrigat√≥ria"},{field:"hora_fiscalizacao",message:"Hora da Fiscaliza√ß√£o √© obrigat√≥ria"},{field:"fiscal_nome_1",message:"Nome do fiscal principal √© obrigat√≥rio"},{field:"responsavel_nome",message:"Nome do respons√°vel √© obrigat√≥rio"},{field:"responsavel_cpf",message:"CPF do respons√°vel √© obrigat√≥rio"}].filter(({field:n})=>!s[n]||s[n].toString().trim()==="").map(({message:n})=>n);return s.cnpj&&s.cnpj.replace(/\D/g,"").length!==14&&o.push("CNPJ deve ter 14 d√≠gitos"),s.responsavel_cpf&&!G(s.responsavel_cpf)&&o.push("CPF do respons√°vel tem formato inv√°lido"),s.data_fiscalizacao&&new Date(s.data_fiscalizacao)>new Date&&o.push("Data da fiscaliza√ß√£o n√£o pode ser futura"),[...a,...o]},V=()=>e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Status das Assinaturas:"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:`flex items-center ${s.fiscal_nome_1?d.assinatura_fiscal_1?"text-green-600":"text-red-600":"text-gray-400"}`,children:[s.fiscal_nome_1?d.assinatura_fiscal_1?"‚úì":"‚úó":"‚Äì"," Fiscal Principal",s.fiscal_nome_1&&!d.assinatura_fiscal_1&&" (OBRIGAT√ìRIA)"]}),e.jsxs("div",{className:`flex items-center ${s.fiscal_nome_2?d.assinatura_fiscal_2?"text-green-600":"text-red-600":"text-gray-400"}`,children:[s.fiscal_nome_2?d.assinatura_fiscal_2?"‚úì":"‚úó":"‚Äì"," Fiscal Secund√°rio",s.fiscal_nome_2&&!d.assinatura_fiscal_2&&" (OBRIGAT√ìRIA)"]}),e.jsxs("div",{className:`flex items-center ${s.responsavel_nome?d.assinatura_representante?"text-green-600":"text-red-600":"text-gray-400"}`,children:[s.responsavel_nome?d.assinatura_representante?"‚úì":"‚úó":"‚Äì"," Representante",s.responsavel_nome&&!d.assinatura_representante&&" (OBRIGAT√ìRIA)"]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"üí° Dica: As assinaturas s√£o obrigat√≥rias apenas quando os nomes correspondentes s√£o preenchidos."})]}),_=a=>{const{name:t,value:o,type:n,checked:c}=a.target;S(n==="checkbox"?r=>({...r,[t]:c}):r=>({...r,[t]:o}))},C=(a,t)=>{T(o=>({...o,[a]:t}))},H=a=>{M(a)},h=a=>{const{name:t,value:o}=a.target;k(n=>({...n,[t]:o}))},U=()=>{if(!u.numero_nota||!u.data||!u.preco){alert("Preencha todos os campos da nota fiscal.");return}R(a=>[...a,{...u}]),k({tipo_nota:"aumento",produto:"gas_comum",numero_nota:"",data:"",preco:""})},J=a=>{R(t=>t.filter((o,n)=>n!==a))},g=a=>{const{name:t,value:o}=a.target;E(n=>({...n,[t]:o}))},Z=()=>{if(!m.item_tabela||!m.dia||!m.numero_cupom||!m.produto||!m.valor){alert("Preencha todos os campos obrigat√≥rios do cupom fiscal.");return}P(a=>[...a,{...m}]),E({item_tabela:"",dia:"",numero_cupom:"",produto:"",valor:"",percentual_diferenca:""})},W=a=>{P(t=>t.filter((o,n)=>n!==a))},Q=(a,t)=>{var o;try{if(!a||typeof a!="string")return console.warn(`Dados de assinatura inv√°lidos para ${t}`),null;if(!a.includes("data:image/"))return console.warn(`Formato de assinatura inv√°lido para ${t}`),null;const n=a.split(",");if(n.length!==2)throw new Error("Formato base64 inv√°lido");const c=(o=n[0].match(/:(.*?);/))==null?void 0:o[1];if(!c)throw new Error("MIME type n√£o encontrado");const r=atob(n[1]),l=r.length,L=new Uint8Array(l);for(let v=0;v<l;v++)L[v]=r.charCodeAt(v);return new File([L],t,{type:c})}catch(n){return console.error(`Erro ao converter assinatura ${t}:`,n),null}},X=async a=>{a.preventDefault(),b(!0),j("");const t=B();if(t.length>0){j(`Erros de valida√ß√£o:
${t.join(`
`)}`),b(!1);return}try{const o=new FormData,n={razao_social:s.razao_social||"",nome_fantasia:s.nome_fantasia||"",atividade:s.atividade||"",endereco:s.endereco||"",cep:s.cep||"",municipio:s.municipio||"",estado:s.estado||"AM",cnpj:s.cnpj||"",telefone:s.telefone||"",data_fiscalizacao:s.data_fiscalizacao||"",hora_fiscalizacao:s.hora_fiscalizacao||"",origem:s.origem||"acao",origem_outros:s.origem_outros||"",fiscal_nome_1:s.fiscal_nome_1||"",fiscal_nome_2:s.fiscal_nome_2||"",responsavel_nome:s.responsavel_nome||"",responsavel_cpf:s.responsavel_cpf||"",porte:s.porte||"",atuacao:s.atuacao||"",nada_consta:s.nada_consta||!1,sem_irregularidades:s.sem_irregularidades||!1,preco_gasolina_comum:s.preco_gasolina_comum||null,preco_gasolina_aditivada:s.preco_gasolina_aditivada||null,preco_etanol:s.preco_etanol||null,preco_diesel_comum:s.preco_diesel_comum||null,preco_diesel_s10:s.preco_diesel_s10||null,preco_gnv:s.preco_gnv||null,nao_vende_gas_comum:s.nao_vende_gas_comum||!1,nao_vende_gas_aditivada:s.nao_vende_gas_aditivada||!1,nao_vende_etanol:s.nao_vende_etanol||!1,nao_vende_diesel_comum:s.nao_vende_diesel_comum||!1,nao_vende_diesel_s10:s.nao_vende_diesel_s10||!1,nao_vende_gnv:s.nao_vende_gnv||!1,prazo_envio_documentos:parseInt(s.prazo_envio_documentos)||48,info_adicionais:s.info_adicionais||"",outras_irregularidades:s.outras_irregularidades||"",dispositivos_legais:s.dispositivos_legais||""};Object.keys(n).forEach(r=>{const l=n[r];typeof l=="boolean"?o.append(r,l?"true":"false"):l!=null&&l!==""&&o.append(r,String(l))}),Object.keys(d).forEach(r=>{if(d[r]){const l=Q(d[r],`${r}.png`);l?o.append(r,l):console.warn(`Falha ao processar assinatura: ${r}`)}}),f&&f.length>0&&f.forEach((r,l)=>{r&&r.file instanceof File&&(o.append("anexos",r.file),o.append(`anexo_descricao_${l}`,r.name||r.file.name))}),N.forEach((r,l)=>{o.append(`notas_fiscais[${l}][tipo_nota]`,r.tipo_nota),o.append(`notas_fiscais[${l}][produto]`,r.produto),o.append(`notas_fiscais[${l}][numero_nota]`,r.numero_nota),o.append(`notas_fiscais[${l}][data]`,r.data),o.append(`notas_fiscais[${l}][preco]`,r.preco)}),y.forEach((r,l)=>{o.append(`cupons_fiscais[${l}][item_tabela]`,r.item_tabela),o.append(`cupons_fiscais[${l}][dia]`,r.dia),o.append(`cupons_fiscais[${l}][numero_cupom]`,r.numero_cupom),o.append(`cupons_fiscais[${l}][produto]`,r.produto),o.append(`cupons_fiscais[${l}][valor]`,r.valor),r.percentual_diferenca&&o.append(`cupons_fiscais[${l}][percentual_diferenca]`,r.percentual_diferenca)}),console.log("=== DADOS SENDO ENVIADOS PARA AUTOPOSTO ===");for(let[r,l]of o.entries())l instanceof File?console.log(`${r}: [File] ${l.name} (${l.size} bytes)`):console.log(`${r}: ${l}`);const c=await ae(o);alert(`Auto de Posto "${c.numero}" criado com sucesso!`),I("/fiscalizacao")}catch(o){j(o.message||"Ocorreu um erro ao salvar. Verifique os dados e a conex√£o.")}finally{b(!1)}},i=(a,t,o="text",n=!1,c=null,r=null)=>e.jsxs("div",{children:[e.jsxs("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700",children:[t," ",n&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:o,id:a,name:a,value:s[a],onChange:_,required:n,maxLength:c,step:r,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-orange-500 focus:border-orange-500"})]}),w=(a,t,o=3,n=!1)=>e.jsxs("div",{children:[e.jsxs("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700",children:[t," ",n&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:a,name:a,value:s[a],onChange:_,required:n,rows:o,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-orange-500 focus:border-orange-500"})]}),p=(a,t)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:a,name:a,checked:s[a],onChange:_,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded mt-1"}),e.jsx("label",{htmlFor:a,className:"ml-2 block text-sm text-gray-700",children:t})]}),A=(a,t,o,n=!1)=>e.jsxs("div",{children:[e.jsxs("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700",children:[t," ",n&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:a,name:a,value:s[a],onChange:_,required:n,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-orange-500 focus:border-orange-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),o.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))]})]}),Y=[{value:"microempresa",label:"Microempresa"},{value:"pequeno",label:"Pequeno Porte"},{value:"medio",label:"M√©dio Porte"},{value:"grande",label:"Grande Porte"}],K=[{value:"acao",label:"A√ß√£o Fiscalizat√≥ria"},{value:"denuncia",label:"Den√∫ncia"},{value:"forca_tarefa",label:"For√ßa Tarefa"},{value:"outros",label:"Outros"}],$=[{value:"aumento",label:"√öltimo Aumento"},{value:"anterior",label:"Anteriores"}],O=[{value:"gas_comum",label:"Gasolina Comum"},{value:"gas_aditivada",label:"Gasolina Aditivada"},{value:"etanol",label:"Etanol"},{value:"diesel_comum",label:"Diesel Comum"},{value:"diesel_s10",label:"Diesel S-10"},{value:"gnv",label:"GNV"}],ee=[{value:24,label:"24 horas"},{value:48,label:"48 horas"},{value:72,label:"72 horas"}];return e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white shadow-xl rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-orange-600 px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Novo Auto de Constata√ß√£o - Posto de Combust√≠vel"}),e.jsxs("p",{className:"text-orange-100 mt-1",children:["N√∫mero: ",e.jsx("span",{className:"font-mono bg-orange-700 px-2 py-1 rounded text-sm",children:"Gerado Automaticamente"})]})]}),e.jsxs("form",{onSubmit:X,className:"p-6 space-y-8",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"1"}),"Dados do Estabelecimento"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i("razao_social","Raz√£o Social","text",!0,255),i("nome_fantasia","Nome Fantasia","text",!1,255),i("cnpj","CNPJ","text",!0,18),i("atividade","Atividade","text",!0,255),A("porte","Porte",Y),i("atuacao","Atua√ß√£o","text",!1,100)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"2"}),"Endere√ßo e Contato"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i("endereco","Endere√ßo","text",!0,255),i("cep","CEP","text",!0,10),i("municipio","Munic√≠pio","text",!0,100),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),e.jsx("input",{type:"text",value:"AM",disabled:!0,className:"mt-1 block w-full p-2 bg-gray-100 border border-gray-300 rounded-md text-gray-500"})]}),i("telefone","Telefone","tel",!1,20)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"3"}),"Origem da Fiscaliza√ß√£o"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A("origem","Origem",K,!0),s.origem==="outros"&&i("origem_outros","Especificar Outros","text",!1,255)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"4"}),"Data e Hora da Fiscaliza√ß√£o"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i("data_fiscalizacao","Data da Fiscaliza√ß√£o","date",!0),i("hora_fiscalizacao","Hora da Fiscaliza√ß√£o","time",!0)]}),e.jsx("div",{className:"mt-4 p-4 bg-orange-50 rounded-lg border border-orange-200",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Comina√ß√£o Legal:"})," √Äs ",e.jsx("strong",{children:s.hora_fiscalizacao||"__:__"})," horas do dia"," ",e.jsx("strong",{children:s.data_fiscalizacao?new Date(s.data_fiscalizacao+"T00:00:00").toLocaleDateString("pt-BR"):"__/__/____"}),", no exerc√≠cio das compet√™ncias dispostas no art. 55 e seguintes da Lei Federal n¬∫ 8.078/90, legalmente atribu√≠das ao Instituto de Defesa do Consumidor ‚Äì PROCON AMAZONAS, neste ato fiscalizat√≥rio, fora constatado que:"]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"5"}),"Comina√ß√£o Legal"]}),e.jsxs("div",{className:"space-y-4",children:[p("nada_consta","Nada consta"),p("sem_irregularidades","N√£o foram encontradas irregularidades")]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"6"}),"Pre√ßos dos Combust√≠veis Expostos no Totem"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i("preco_gasolina_comum","Gasolina Comum (R$ por litro)","number",!1,null,"0.001"),i("preco_gasolina_aditivada","Gasolina Aditivada (R$ por litro)","number",!1,null,"0.001"),i("preco_etanol","Etanol (R$ por litro)","number",!1,null,"0.001"),i("preco_diesel_comum","Diesel Comum (R$ por litro)","number",!1,null,"0.001"),i("preco_diesel_s10","Diesel S-10 (R$ por litro)","number",!1,null,"0.001"),i("preco_gnv","GNV (R$ por metro c√∫bico)","number",!1,null,"0.001")]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-md font-medium text-gray-800 mb-3",children:"Produtos n√£o comercializados pelo estabelecimento:"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[p("nao_vende_gas_comum","Gasolina Comum"),p("nao_vende_gas_aditivada","Gasolina Aditivada"),p("nao_vende_etanol","Etanol"),p("nao_vende_diesel_comum","Diesel Comum"),p("nao_vende_diesel_s10","Diesel S-10"),p("nao_vende_gnv","GNV")]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"7"}),"Notas Fiscais de Aquisi√ß√£o"]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 mb-4 max-h-40 overflow-y-auto",children:N.length>0?e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Notas Registradas:"}),e.jsx("div",{className:"space-y-2",children:N.map((a,t)=>{var o,n;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"NF:"})," ",a.numero_nota," |",e.jsx("strong",{children:" Data:"})," ",new Date(a.data+"T00:00:00").toLocaleDateString("pt-BR")," |",e.jsxs("strong",{children:[" ",(o=O.find(c=>c.value===a.produto))==null?void 0:o.label,":"]})," R$ ",a.preco," |",e.jsx("strong",{children:" Tipo:"})," ",(n=$.find(c=>c.value===a.tipo_nota))==null?void 0:n.label]}),e.jsx("button",{type:"button",onClick:()=>J(t),className:"text-red-600 hover:text-red-800 font-bold text-sm",children:"Remover"})]},t)})})]}):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nenhuma nota fiscal registrada"})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Adicionar Nova Nota Fiscal:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsx("select",{name:"tipo_nota",value:u.tipo_nota,onChange:h,className:"w-full p-2 border border-gray-300 rounded text-sm",children:$.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Produto"}),e.jsx("select",{name:"produto",value:u.produto,onChange:h,className:"w-full p-2 border border-gray-300 rounded text-sm",children:O.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"N√∫mero da NF"}),e.jsx("input",{type:"text",placeholder:"123456",name:"numero_nota",value:u.numero_nota,onChange:h,className:"w-full p-2 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Data"}),e.jsx("input",{type:"date",name:"data",value:u.data,onChange:h,className:"w-full p-2 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pre√ßo/Litro (R$)"}),e.jsx("input",{type:"number",step:"0.001",placeholder:"0.000",name:"preco",value:u.preco,onChange:h,className:"w-full p-2 border border-gray-300 rounded text-sm"})]})]}),e.jsx("button",{type:"button",onClick:U,className:"mt-3 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 text-sm font-medium",children:"Adicionar Nota Fiscal"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"8"}),"Cupons Fiscais de Venda"]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 mb-4 max-h-40 overflow-y-auto",children:y.length>0?e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Cupons Registrados:"}),e.jsx("div",{className:"space-y-2",children:y.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Item:"})," ",a.item_tabela," |",e.jsx("strong",{children:" Data:"})," ",new Date(a.dia+"T00:00:00").toLocaleDateString("pt-BR")," |",e.jsx("strong",{children:" Cupom:"})," ",a.numero_cupom," |",e.jsx("strong",{children:" Produto:"})," ",a.produto," |",e.jsx("strong",{children:" Valor:"})," R$ ",a.valor,a.percentual_diferenca&&e.jsxs("span",{children:[" | ",e.jsx("strong",{children:"Dif.:"})," ",a.percentual_diferenca,"%"]})]}),e.jsx("button",{type:"button",onClick:()=>W(t),className:"text-red-600 hover:text-red-800 font-bold text-sm",children:"Remover"})]},t))})]}):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nenhum cupom fiscal registrado"})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Adicionar Novo Cupom Fiscal:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Item Tabela"}),e.jsx("input",{type:"text",placeholder:"1",name:"item_tabela",value:m.item_tabela,onChange:g,className:"w-full p-2 border border-gray-300 rounded text-sm",maxLength:"5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Data"}),e.jsx("input",{type:"date",name:"dia",value:m.dia,onChange:g,className:"w-full p-2 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"N¬∫ Cupom"}),e.jsx("input",{type:"text",placeholder:"123456",name:"numero_cupom",value:m.numero_cupom,onChange:g,className:"w-full p-2 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Produto"}),e.jsx("input",{type:"text",placeholder:"Gasolina Comum",name:"produto",value:m.produto,onChange:g,className:"w-full p-2 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Valor (R$)"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",name:"valor",value:m.valor,onChange:g,className:"w-full p-2 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Diferen√ßa (%)"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",name:"percentual_diferenca",value:m.percentual_diferenca,onChange:g,className:"w-full p-2 border border-gray-300 rounded text-sm"})]})]}),e.jsx("button",{type:"button",onClick:Z,className:"mt-3 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 text-sm font-medium",children:"Adicionar Cupom Fiscal"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"9"}),"Prazo para Envio de Documentos"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsx("div",{children:A("prazo_envio_documentos","Prazo para apresenta√ß√£o dos documentos",ee)})}),e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Notifica√ß√£o:"})," A empresa fica notificada a apresentar, no prazo de ",s.prazo_envio_documentos||48," horas, via e-mail ",e.jsx("strong",{children:"fiscalizacaoprocon@procon.am.gov.br"}),", as notas fiscais de aquisi√ß√£o e os cupons fiscais de venda ao consumidor at√© a presente data desta fiscaliza√ß√£o."]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"10"}),"Outras Informa√ß√µes"]}),e.jsxs("div",{className:"space-y-4",children:[w("outras_irregularidades","Outras irregularidades constatadas/outras comina√ß√µes legais",4),w("dispositivos_legais","Dispositivos legais infringidos",4),w("info_adicionais","Informa√ß√µes adicionais",4)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm mr-2",children:"11"}),"Respons√°veis e Assinaturas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-700 mb-4 text-center",children:"AUTORIDADE FISCALIZADORA"}),e.jsxs("div",{className:"mb-4",children:[e.jsx(F,{name:"assinatura_fiscal_1",label:"Assinatura do Fiscal Principal",value:d.assinatura_fiscal_1,onChange:C,required:!0}),e.jsx("div",{className:"space-y-2 mt-3",children:i("fiscal_nome_1","Nome do Fiscal","text",!0,255)})]}),e.jsxs("div",{children:[e.jsx(F,{name:"assinatura_fiscal_2",label:"Assinatura do Fiscal 2 (Opcional)",value:d.assinatura_fiscal_2,onChange:C}),e.jsx("div",{className:"space-y-2 mt-3",children:i("fiscal_nome_2","Nome do Fiscal 2 (Opcional)","text",!1,255)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-700 mb-4 text-center",children:"ESTABELECIMENTO FISCALIZADO"}),e.jsxs("div",{children:[e.jsx(F,{name:"assinatura_representante",label:"Assinatura do Representante",value:d.assinatura_representante,onChange:C,required:!0}),e.jsxs("div",{className:"space-y-2 mt-3",children:[i("responsavel_nome","Nome do Respons√°vel","text",!0,255),i("responsavel_cpf","CPF","text",!0,20)]})]})]})]}),e.jsx(V,{})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Anexar Arquivos"}),e.jsx(re,{files:f,onFilesChange:H,maxFiles:10})]}),D&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Erro ao salvar"}),e.jsx("div",{className:"text-sm text-red-700 mt-1 whitespace-pre-line",children:D})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[e.jsx(oe,{to:"/fiscalizacao",className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"‚Üê Voltar para Lista"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 font-medium",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:z,className:"px-6 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium flex items-center",children:z?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Salvar Auto de Constata√ß√£o"]})})]})]}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-orange-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-800",children:"Informa√ß√µes Importantes"}),e.jsxs("div",{className:"text-sm text-orange-700 mt-1 space-y-1",children:[e.jsx("p",{children:"‚Ä¢ O n√∫mero do auto ser√° gerado automaticamente pelo sistema."}),e.jsxs("p",{children:["‚Ä¢ Campos marcados com ",e.jsx("span",{className:"text-red-500",children:"*"})," s√£o obrigat√≥rios."]}),e.jsx("p",{children:"‚Ä¢ Registre os pre√ßos dos combust√≠veis conforme exibidos no totem do posto."}),e.jsx("p",{children:"‚Ä¢ Adicione as notas fiscais e cupons fiscais para an√°lise de margens de lucro."}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Assinaturas s√£o obrigat√≥rias"})," apenas quando os nomes correspondentes s√£o preenchidos."]}),e.jsx("p",{children:"‚Ä¢ O procedimento administrativo ser√° regulado nos termos do Decreto Estadual 43.614/21."})]})]})]})}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z",clipRule:"evenodd"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Legisla√ß√£o Aplic√°vel"}),e.jsxs("div",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Lei Federal n¬∫ 8.078/90"})," - C√≥digo de Defesa do Consumidor"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"ANP - Ag√™ncia Nacional do Petr√≥leo"})," - Regulamenta√ß√£o de combust√≠veis"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Decreto Estadual n¬∫ 43.614/2021"})," - Processo administrativo"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Portaria ANP n¬∫ 116/2000"})," - Qualidade dos combust√≠veis"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Lei n¬∫ 9.847/99"})," - Atividades de revenda de combust√≠veis"]})]})]})]})})]})]})})})}export{ce as default};
