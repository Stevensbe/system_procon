import{p as P,j as e,t as A}from"./main-QkSqPps8.js";import{e as F,u as G,r as d,L as g}from"./router-C15yhWin.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";function V(){const{id:t}=F(),k=G(),[z,p]=d.useState(!0),[u,h]=d.useState(!1),[n,x]=d.useState(""),[a,_]=d.useState({numero:"",data_fiscalizacao:"",hora_fiscalizacao:"",razao_social:"",nome_fantasia:"",cnpj:"",endereco:"",municipio:"",cep:"",telefone:"",email:"",responsavel_nome:"",responsavel_cpf:"",responsavel_funcao:"",gasolina_comum_totem:"",gasolina_aditivada_totem:"",etanol_totem:"",diesel_comum_totem:"",diesel_s10_totem:"",gnv_totem:"",gasolina_comum_bomba:"",gasolina_aditivada_bomba:"",etanol_bomba:"",diesel_comum_bomba:"",diesel_s10_bomba:"",gnv_bomba:"",documentos_apresentados:!1,prazo_apresentacao:"24",observacoes:"",irregularidades_encontradas:"",fiscal_responsavel:"",fiscal_apoio:""});d.useEffect(()=>{S()},[t]);const S=async()=>{var r,l,m,i,c,b,v,j,f,N,y,w,C;try{p(!0);const o=await P(t),E={...o,data_fiscalizacao:o.data_fiscalizacao||"",hora_fiscalizacao:o.hora_fiscalizacao||"",documentos_apresentados:!!o.documentos_apresentados,prazo_apresentacao:((r=o.prazo_apresentacao)==null?void 0:r.toString())||"24",gasolina_comum_totem:((l=o.gasolina_comum_totem)==null?void 0:l.toString())||"",gasolina_aditivada_totem:((m=o.gasolina_aditivada_totem)==null?void 0:m.toString())||"",etanol_totem:((i=o.etanol_totem)==null?void 0:i.toString())||"",diesel_comum_totem:((c=o.diesel_comum_totem)==null?void 0:c.toString())||"",diesel_s10_totem:((b=o.diesel_s10_totem)==null?void 0:b.toString())||"",gnv_totem:((v=o.gnv_totem)==null?void 0:v.toString())||"",gasolina_comum_bomba:((j=o.gasolina_comum_bomba)==null?void 0:j.toString())||"",gasolina_aditivada_bomba:((f=o.gasolina_aditivada_bomba)==null?void 0:f.toString())||"",etanol_bomba:((N=o.etanol_bomba)==null?void 0:N.toString())||"",diesel_comum_bomba:((y=o.diesel_comum_bomba)==null?void 0:y.toString())||"",diesel_s10_bomba:((w=o.diesel_s10_bomba)==null?void 0:w.toString())||"",gnv_bomba:((C=o.gnv_bomba)==null?void 0:C.toString())||""};_(E)}catch(o){x(o.message||"Erro ao carregar auto de posto")}finally{p(!1)}},s=r=>{const{name:l,value:m,type:i,checked:c}=r.target;_(b=>({...b,[l]:i==="checkbox"?c:m}))},D=async r=>{r.preventDefault();try{h(!0),x("");const l={...a,gasolina_comum_totem:a.gasolina_comum_totem||null,gasolina_aditivada_totem:a.gasolina_aditivada_totem||null,etanol_totem:a.etanol_totem||null,diesel_comum_totem:a.diesel_comum_totem||null,diesel_s10_totem:a.diesel_s10_totem||null,gnv_totem:a.gnv_totem||null,gasolina_comum_bomba:a.gasolina_comum_bomba||null,gasolina_aditivada_bomba:a.gasolina_aditivada_bomba||null,etanol_bomba:a.etanol_bomba||null,diesel_comum_bomba:a.diesel_comum_bomba||null,diesel_s10_bomba:a.diesel_s10_bomba||null,gnv_bomba:a.gnv_bomba||null,prazo_apresentacao:parseInt(a.prazo_apresentacao)||24};await A(t,l),k(`/fiscalizacao/postos/${t}`,{state:{message:"Auto de posto atualizado com sucesso!"}})}catch(l){x(l.message||"Erro ao atualizar auto de posto")}finally{h(!1)}};return z?e.jsx("div",{className:"flex justify-center items-center p-8 min-h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"}),e.jsx("div",{className:"text-lg text-gray-600",children:"Carregando auto de posto..."})]})}):n&&!a.id?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Erro ao carregar auto"}),e.jsx("p",{className:"mt-2",children:n}),e.jsx(g,{to:"/fiscalizacao/posto",className:"mt-3 inline-block px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"← Voltar à lista"})]})}):e.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-orange-800",children:"Editar Auto de Posto"}),e.jsxs("p",{className:"text-gray-600",children:["Auto nº ",a.numero||t]})]}),e.jsx(g,{to:`/fiscalizacao/postos/${t}`,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"← Voltar"})]})}),n&&e.jsx("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:n}),e.jsxs("form",{onSubmit:D,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-4",children:"Dados Básicos"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número do Auto"}),e.jsx("input",{type:"text",name:"numero",value:a.numero,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ex: 2024/001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Fiscalização *"}),e.jsx("input",{type:"date",name:"data_fiscalizacao",value:a.data_fiscalizacao,onChange:s,required:!0,className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora da Fiscalização"}),e.jsx("input",{type:"time",name:"hora_fiscalizacao",value:a.hora_fiscalizacao,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-4",children:"Dados do Estabelecimento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razão Social *"}),e.jsx("input",{type:"text",name:"razao_social",value:a.razao_social,onChange:s,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite a razão social"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Fantasia"}),e.jsx("input",{type:"text",name:"nome_fantasia",value:a.nome_fantasia,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite o nome fantasia"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CNPJ *"}),e.jsx("input",{type:"text",name:"cnpj",value:a.cnpj,onChange:s,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"00.000.000/0000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Município *"}),e.jsx("input",{type:"text",name:"municipio",value:a.municipio,onChange:s,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite o município"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereço"}),e.jsx("input",{type:"text",name:"endereco",value:a.endereco,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Digite o endereço completo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP"}),e.jsx("input",{type:"text",name:"cep",value:a.cep,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"00000-000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"text",name:"telefone",value:a.telefone,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"email@exemplo.com"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-4",children:"Responsável Legal"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Responsável"}),e.jsx("input",{type:"text",name:"responsavel_nome",value:a.responsavel_nome,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Nome completo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF do Responsável"}),e.jsx("input",{type:"text",name:"responsavel_cpf",value:a.responsavel_cpf,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Função"}),e.jsx("input",{type:"text",name:"responsavel_funcao",value:a.responsavel_funcao,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ex: Gerente, Proprietário"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-4",children:"Preços dos Combustíveis"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"Preços no Totem"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gasolina Comum"}),e.jsx("input",{type:"number",step:"0.001",name:"gasolina_comum_totem",value:a.gasolina_comum_totem,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gasolina Aditivada"}),e.jsx("input",{type:"number",step:"0.001",name:"gasolina_aditivada_totem",value:a.gasolina_aditivada_totem,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etanol"}),e.jsx("input",{type:"number",step:"0.001",name:"etanol_totem",value:a.etanol_totem,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Diesel Comum"}),e.jsx("input",{type:"number",step:"0.001",name:"diesel_comum_totem",value:a.diesel_comum_totem,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Diesel S-10"}),e.jsx("input",{type:"number",step:"0.001",name:"diesel_s10_totem",value:a.diesel_s10_totem,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GNV"}),e.jsx("input",{type:"number",step:"0.001",name:"gnv_totem",value:a.gnv_totem,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"Preços nas Bombas"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gasolina Comum"}),e.jsx("input",{type:"number",step:"0.001",name:"gasolina_comum_bomba",value:a.gasolina_comum_bomba,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gasolina Aditivada"}),e.jsx("input",{type:"number",step:"0.001",name:"gasolina_aditivada_bomba",value:a.gasolina_aditivada_bomba,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etanol"}),e.jsx("input",{type:"number",step:"0.001",name:"etanol_bomba",value:a.etanol_bomba,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Diesel Comum"}),e.jsx("input",{type:"number",step:"0.001",name:"diesel_comum_bomba",value:a.diesel_comum_bomba,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Diesel S-10"}),e.jsx("input",{type:"number",step:"0.001",name:"diesel_s10_bomba",value:a.diesel_s10_bomba,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GNV"}),e.jsx("input",{type:"number",step:"0.001",name:"gnv_bomba",value:a.gnv_bomba,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"0.000"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-4",children:"Documentos"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"documentos_apresentados",checked:a.documentos_apresentados,onChange:s,className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Documentos apresentados no local"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prazo para apresentação (horas)"}),e.jsxs("select",{name:"prazo_apresentacao",value:a.prazo_apresentacao,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"24",children:"24 horas"}),e.jsx("option",{value:"48",children:"48 horas"}),e.jsx("option",{value:"72",children:"72 horas"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-4",children:"Fiscais Responsáveis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fiscal Responsável"}),e.jsx("input",{type:"text",name:"fiscal_responsavel",value:a.fiscal_responsavel,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Nome do fiscal responsável"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fiscal de Apoio"}),e.jsx("input",{type:"text",name:"fiscal_apoio",value:a.fiscal_apoio,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Nome do fiscal de apoio"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-4",children:"Observações"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Irregularidades Encontradas"}),e.jsx("textarea",{name:"irregularidades_encontradas",value:a.irregularidades_encontradas,onChange:s,rows:4,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Descreva as irregularidades encontradas..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observações Gerais"}),e.jsx("textarea",{name:"observacoes",value:a.observacoes,onChange:s,rows:4,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Observações adicionais..."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(g,{to:`/fiscalizacao/postos/${t}`,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:u,className:`px-6 py-3 rounded-lg text-white font-medium ${u?"bg-gray-400 cursor-not-allowed":"bg-orange-600 hover:bg-orange-700"}`,children:u?"Salvando...":"Salvar Alterações"})]})]})]})}export{V as default};
