import{j as e}from"./main-DVdFXPbZ.js";import{r as i,L as n}from"./router-C15yhWin.js";import{t as g}from"./tramitacaoService-DxYPaFC7.js";import{n as z}from"./index-CsOmCsbp.js";import{F as _}from"./ArrowPathIcon-DvGuXmm8.js";import{F as C}from"./PlusIcon-DZYmRjce.js";import{F as u}from"./DocumentArrowUpIcon-DBsAc1ml.js";import{F as p}from"./ClockIcon-CbdR_WDb.js";import{F as P}from"./CheckCircleIcon-B-MrGrlS.js";import{F as j}from"./ExclamationTriangleIcon-Y0luX6t1.js";import{F as S}from"./ChartBarIcon-DI9Vcfue.js";import{F as G}from"./MagnifyingGlassIcon-DxjVcYIb.js";import{F as M}from"./FunnelIcon-PU3yDtaQ.js";import{F as q}from"./DocumentArrowDownIcon-Bp61FGwk.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";const oe=()=>{const[c,$]=i.useState({total_tramitacoes:0,pendentes:0,concluidas:0,atrasadas:0,tempo_medio:0}),[m,L]=i.useState([]),[x,I]=i.useState([]),[B,N]=i.useState(!0),[h,V]=i.useState("todas"),[d,k]=i.useState("");i.useEffect(()=>{f()},[]);const f=async()=>{try{N(!0);const[s,t,a]=await Promise.all([g.obterEstatisticas(),g.listarTramitacoesPendentes(),g.listarTramitacoesRecentes()]);$(s),L(t),I(a)}catch(s){console.error("Erro ao carregar dados:",s),z.error("Erro ao carregar dados da tramitação")}finally{N(!1)}},b=s=>{let t=s;return h!=="todas"&&(t=t.filter(a=>a.status===h)),d&&(t=t.filter(a=>{var l,r,o,E,R,D,F,T;return((r=(l=a.protocolo)==null?void 0:l.numero_protocolo)==null?void 0:r.includes(d))||((E=(o=a.protocolo)==null?void 0:o.assunto)==null?void 0:E.toLowerCase().includes(d.toLowerCase()))||((D=(R=a.setor_origem)==null?void 0:R.nome)==null?void 0:D.toLowerCase().includes(d.toLowerCase()))||((T=(F=a.setor_destino)==null?void 0:F.nome)==null?void 0:T.toLowerCase().includes(d.toLowerCase()))})),t},v=s=>{switch(s){case"PENDENTE":return"text-yellow-600 bg-yellow-50";case"ENVIADA":return"text-blue-600 bg-blue-50";case"RECEBIDA":return"text-green-600 bg-green-50";case"ATRASADA":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},y=s=>{switch(s){case"PENDENTE":return e.jsx(p,{className:"w-4 h-4"});case"ENVIADA":return e.jsx(u,{className:"w-4 h-4"});case"RECEBIDA":return e.jsx(P,{className:"w-4 h-4"});case"ATRASADA":return e.jsx(j,{className:"w-4 h-4"});default:return e.jsx(_,{className:"w-4 h-4"})}},w=s=>new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),A=s=>{const t=new Date,a=new Date(s),l=t-a,r=Math.ceil(l/(1e3*60*60*24));return r>0?r:0};return B?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard de Tramitação"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gerencie e acompanhe todas as tramitações do sistema"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_,{className:"w-4 h-4"}),"Atualizar"]}),e.jsxs(n,{to:"/tramitacao/nova",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(C,{className:"w-4 h-4"}),"Nova Tramitação"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(u,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.total_tramitacoes})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(p,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.pendentes})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(P,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Concluídas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.concluidas})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(j,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Atrasadas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.atrasadas})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(S,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tempo Médio"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[c.tempo_medio," dias"]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por protocolo, assunto, setor...",value:d,onChange:s=>k(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:h,onChange:s=>V(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"todas",children:"Todas"}),e.jsx("option",{value:"PENDENTE",children:"Pendentes"}),e.jsx("option",{value:"ENVIADA",children:"Enviadas"}),e.jsx("option",{value:"RECEBIDA",children:"Recebidas"}),e.jsx("option",{value:"ATRASADA",children:"Atrasadas"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(M,{className:"w-4 h-4"}),"Filtrar"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Tramitações Pendentes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Documentos aguardando processamento"})]}),e.jsxs("div",{className:"p-6",children:[m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma tramitação pendente"})]}):e.jsx("div",{className:"space-y-4",children:b(m).slice(0,5).map(s=>{var t,a,l,r,o;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>window.location.href=`/tramitacao/${s.id}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${v(s.status)}`,children:[y(s.status),s.status]}),s.prazo_limite&&A(s.prazo_limite)>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium text-red-600 bg-red-50",children:[e.jsx(j,{className:"w-3 h-3"}),A(s.prazo_limite)," dias atrasado"]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:w(s.data_tramitacao)})]}),e.jsxs("h3",{className:"font-medium text-gray-900 mb-1",children:["Protocolo: ",((t=s.protocolo)==null?void 0:t.numero_protocolo)||"N/A"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:((a=s.protocolo)==null?void 0:a.assunto)||"Assunto não informado"}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:[(l=s.setor_origem)==null?void 0:l.nome," → ",(r=s.setor_destino)==null?void 0:r.nome]}),e.jsxs("span",{children:["Por: ",((o=s.usuario)==null?void 0:o.nome)||"Sistema"]})]})]},s.id)})}),m.length>5&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(n,{to:"/tramitacao/pendentes",className:"text-blue-600 hover:text-blue-700 font-medium",children:["Ver todas (",m.length,")"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Tramitações Recentes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Últimas movimentações"})]}),e.jsxs("div",{className:"p-6",children:[x.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma tramitação recente"})]}):e.jsx("div",{className:"space-y-4",children:b(x).slice(0,5).map(s=>{var t,a,l,r,o;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>window.location.href=`/tramitacao/${s.id}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${v(s.status)}`,children:[y(s.status),s.status]})}),e.jsx("span",{className:"text-sm text-gray-500",children:w(s.data_tramitacao)})]}),e.jsxs("h3",{className:"font-medium text-gray-900 mb-1",children:["Protocolo: ",((t=s.protocolo)==null?void 0:t.numero_protocolo)||"N/A"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:((a=s.protocolo)==null?void 0:a.assunto)||"Assunto não informado"}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:[(l=s.setor_origem)==null?void 0:l.nome," → ",(r=s.setor_destino)==null?void 0:r.nome]}),e.jsxs("span",{children:["Por: ",((o=s.usuario)==null?void 0:o.nome)||"Sistema"]})]}),s.observacoes&&e.jsx("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm text-gray-600",children:s.observacoes})]},s.id)})}),x.length>5&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(n,{to:"/tramitacao/historico",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Ver histórico completo"})})]})]})]}),e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Ações Rápidas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(n,{to:"/tramitacao/nova",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(C,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Nova Tramitação"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Criar nova tramitação"})]})]}),e.jsxs(n,{to:"/tramitacao/pendentes",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(p,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Pendentes"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ver tramitações pendentes"})]})]}),e.jsxs(n,{to:"/tramitacao/relatorios",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(S,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Relatórios"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gerar relatórios"})]})]})]})]})]})})};export{oe as default};
