import{j as e}from"./main-QkSqPps8.js";import{u as v,r as l}from"./router-C15yhWin.js";import{j as w}from"./juridicoService-64TRSV1W.js";import{L as _}from"./LoadingSpinner-CioJYzaJ.js";import{N as A}from"./NotificationContainer-Bqi_YeSK.js";import{u as F}from"./useNotification-Bm6NCblX.js";import{F as C}from"./PlusIcon-DZYmRjce.js";import{F as L}from"./FunnelIcon-PU3yDtaQ.js";import{F as R}from"./UserIcon-Crv8uqGG.js";import{F as E}from"./CalendarIcon-BxLx5Sh6.js";import{F as I}from"./EyeIcon-Cu0Wnbis.js";import{F as $}from"./PencilIcon-CajHx5Rb.js";import"./vendor-Csw2ODfV.js";import"./icons-C8WIGuh4.js";import"./XMarkIcon-C8R2LFm1.js";import"./InformationCircleIcon-o8enZ7c_.js";import"./ExclamationTriangleIcon-Y0luX6t1.js";import"./XCircleIcon-BTR4Rsg8.js";import"./CheckCircleIcon-B-MrGrlS.js";const Z=()=>{const n=v(),[x,p]=l.useState([]),[h,m]=l.useState(!0),[s,g]=l.useState({tipo_analise:"",analista:"",status:"",data_inicio:"",data_fim:""}),[r,d]=l.useState({page:1,page_size:10,total:0}),{notifications:u,addNotification:y,removeNotification:b}=F();l.useEffect(()=>{f()},[r.page,s]);const f=async()=>{try{m(!0);const a={page:r.page,page_size:r.page_size,...s},t=await w.listarAnalises(a);p(t.data.results||t.data),d(i=>({...i,total:t.data.count||t.data.length}))}catch(a){console.error("Erro ao carregar análises:",a),y("Erro ao carregar análises","error")}finally{m(!1)}},o=a=>{const{name:t,value:i}=a.target;g(c=>({...c,[t]:i})),d(c=>({...c,page:1}))},j=()=>{g({tipo_analise:"",analista:"",status:"",data_inicio:"",data_fim:""}),d(a=>({...a,page:1}))},N=a=>a?new Date(a).toLocaleString("pt-BR"):"-",k=a=>{switch(a){case"INICIAL":return"bg-blue-100 text-blue-800";case"COMPLEMENTAR":return"bg-green-100 text-green-800";case"FINAL":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return h?e.jsx(_,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(A,{notifications:u,onRemove:b}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Análises Jurídicas"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Gerencie as análises jurídicas dos processos"})]}),e.jsxs("button",{onClick:()=>n("/juridico/analises/nova"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center",children:[e.jsx(C,{className:"h-5 w-5 mr-2"}),"Nova Análise"]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(L,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mr-2"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tipo de Análise"}),e.jsxs("select",{name:"tipo_analise",value:s.tipo_analise,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"INICIAL",children:"Inicial"}),e.jsx("option",{value:"COMPLEMENTAR",children:"Complementar"}),e.jsx("option",{value:"FINAL",children:"Final"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Analista"}),e.jsx("input",{type:"text",name:"analista",value:s.analista,onChange:o,placeholder:"Nome do analista",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data Início"}),e.jsx("input",{type:"date",name:"data_inicio",value:s.data_inicio,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",name:"data_fim",value:s.data_fim,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:j,className:"w-full px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Limpar"})})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Análises (",r.total,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Processo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Analista"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:x.length>0?x.map(a=>{var t,i;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:((t=a.processo)==null?void 0:t.numero)||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:((i=a.processo)==null?void 0:i.parte)||"N/A"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(a.tipo_analise)}`,children:a.tipo_analise})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:a.analista?`${a.analista.user.first_name} ${a.analista.user.last_name}`:"N/A"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:N(a.data_criacao)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>n(`/juridico/analises/${a.id}`),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Ver detalhes",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>n(`/juridico/analises/${a.id}/editar`),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Editar",children:e.jsx($,{className:"h-5 w-5"})})]})})]},a.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Nenhuma análise encontrada"})})})]})}),r.total>r.page_size&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Mostrando ",(r.page-1)*r.page_size+1," a ",Math.min(r.page*r.page_size,r.total)," de ",r.total," resultados"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>d(a=>({...a,page:a.page-1})),disabled:r.page===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:"Anterior"}),e.jsx("button",{onClick:()=>d(a=>({...a,page:a.page+1})),disabled:r.page*r.page_size>=r.total,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:"Próxima"})]})]})})]})]})]})};export{Z as default};
