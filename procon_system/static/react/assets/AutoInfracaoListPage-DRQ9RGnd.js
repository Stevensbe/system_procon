import{y,j as e}from"./main-BZolao6g.js";import{r as d,L as n}from"./router-Cgdj9vyr.js";import"./vendor-Csw2ODfV.js";import"./icons-qiKTog5F.js";function w(){const[s,x]=d.useState([]),[m,l]=d.useState(!0),[c,g]=d.useState(""),[t,h]=d.useState({status:"",razao_social:"",cnpj:"",data_inicio:"",data_fim:""});d.useEffect(()=>{u()},[t]);const u=async()=>{try{l(!0);const a=await y(1,t);x(a.results||[])}catch(a){console.error("‚ùå Erro ao carregar autos:",a),g("Erro ao carregar autos de infra√ß√£o")}finally{l(!1)}},o=a=>{const{name:r,value:i}=a.target;h(f=>({...f,[r]:i}))},p=a=>({autuado:"bg-red-100 text-red-800",notificado:"bg-orange-100 text-orange-800",em_defesa:"bg-blue-100 text-blue-800",julgado:"bg-purple-100 text-purple-800",pago:"bg-green-100 text-green-800",cancelado:"bg-gray-100 text-gray-800"})[a]||"bg-gray-100 text-gray-800",j=a=>({autuado:"Autuado",notificado:"Notificado",em_defesa:"Em Defesa",julgado:"Julgado",pago:"Pago",cancelado:"Cancelado"})[a]||a;return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-[#0c0f12] transition-colors duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 dark:border-red-400 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300 transition-colors duration-300",children:"Carregando autos de infra√ß√£o..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0c0f12] py-6 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1d21] shadow rounded-lg mb-6 transition-colors duration-300",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white transition-colors duration-300",children:"Autos de Infra√ß√£o"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 transition-colors duration-300",children:"Gerenciar autua√ß√µes e processos administrativos"})]}),e.jsxs(n,{to:"/fiscalizacao/infracoes/novo",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 font-medium",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Novo Auto de Infra√ß√£o"]})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-[#0c0f12] transition-colors duration-300",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:"Status"}),e.jsxs("select",{name:"status",value:t.status,onChange:o,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors duration-300",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"autuado",children:"Autuado"}),e.jsx("option",{value:"notificado",children:"Notificado"}),e.jsx("option",{value:"em_defesa",children:"Em Defesa"}),e.jsx("option",{value:"julgado",children:"Julgado"}),e.jsx("option",{value:"pago",children:"Pago"}),e.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:"Raz√£o Social"}),e.jsx("input",{type:"text",name:"razao_social",value:t.razao_social,onChange:o,placeholder:"Buscar por empresa...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:"CNPJ"}),e.jsx("input",{type:"text",name:"cnpj",value:t.cnpj,onChange:o,placeholder:"00.000.000/0000-00",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:"Data In√≠cio"}),e.jsx("input",{type:"date",name:"data_inicio",value:t.data_inicio,onChange:o,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors duration-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:"Data Fim"}),e.jsx("input",{type:"date",name:"data_fim",value:t.data_fim,onChange:o,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors duration-300"})]})]})})]}),c?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 transition-colors duration-300",children:e.jsx("p",{className:"text-red-800 dark:text-red-200 transition-colors duration-300",children:c})}):e.jsx("div",{className:"bg-white dark:bg-[#1a1d21] shadow rounded-lg overflow-hidden transition-colors duration-300",children:s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white transition-colors duration-300",children:"Nenhum auto encontrado"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400 transition-colors duration-300",children:"Comece criando um novo auto de infra√ß√£o."}),e.jsx("div",{className:"mt-6",children:e.jsxs(n,{to:"/fiscalizacao/infracoes/novo",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Novo Auto de Infra√ß√£o"]})})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider transition-colors duration-300",children:"Auto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estabelecimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A√ß√µes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.numero}),e.jsx("div",{className:"text-sm text-gray-500",children:a.cnpj})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.razao_social}),e.jsx("div",{className:"text-sm text-gray-500",children:a.atividade})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(a.data_fiscalizacao).toLocaleDateString("pt-BR")}),e.jsx("div",{className:"text-sm text-gray-500",children:a.hora_fiscalizacao})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.valor_multa_formatado||`R$ ${parseFloat(a.valor_multa||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(a.status)}`,children:j(a.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{to:`/fiscalizacao/infracoes/${a.id}`,className:"text-red-600 hover:text-red-800",children:"üëÅÔ∏è Ver"}),e.jsx(n,{to:`/fiscalizacao/infracoes/${a.id}/editar`,className:"text-blue-600 hover:text-blue-800",children:"‚úèÔ∏è Editar"}),e.jsx("a",{href:`/api/infracoes/${a.id}/documento/`,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800",children:"üìÑ Documento"})]})})]},a.id))})]})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total de Infra√ß√µes"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(a=>["autuado","notificado"].includes(a.status)).length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Valor Total"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["R$ ",s.reduce((a,r)=>a+parseFloat(r.valor_multa||0),0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Este M√™s"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(a=>{const r=new Date(a.data_fiscalizacao),i=new Date;return r.getMonth()===i.getMonth()&&r.getFullYear()===i.getFullYear()}).length})]})]})})]})]})})}export{w as default};
